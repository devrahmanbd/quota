import{r as h,ct as Et,br as X,j as o,o as D,a5 as Pt,cu as Tt,aB as Qe,R as Oe,c1 as Ze,bX as Je,c2 as Mt,c3 as Ot,ap as et,bh as Rt,cv as At,bY as zt,cw as Ft,cx as Nt,as as de,an as Z,O as Re,ad as Ae,cy as Lt,aq as J,am as tt,b2 as ze,Z as Fe,bQ as we,bo as ve,w as C,ax as $t,b4 as Bt,H as ne,T as A,X as V,bR as nt,a4 as ye,y as _t,z as st,D as Ne,A as Vt,B as rt,C as Ut,G as at,m as ot,aR as Ht,n as je,bM as lt,S as Ce,bz as Kt,V as fe,aJ as Le,_ as q,bb as te,bN as Wt,E as Gt,a0 as it,u as qt,cz as Yt,ae as Xt,cc as Qt,bZ as ct,cA as Zt,bk as Jt,aG as ut,aN as en,b as tn,aD as dt,bA as nn,cB as Ve,cC as sn,cD as rn,N as an,aj as ft,ag as Ue,cE as on}from"./main-88666cc1.js";import{I as ln,u as cn,d as un,g as mt,D as ht,h as Pe,i as dn,e as gt,b as fn,a as mn,K as hn,f as vt,j as gn,t as vn,C as pn}from"./ArrowBack-f4b45c70.js";import{$ as He,E as xn,C as bn}from"./breadcrumb-71f79647.js";function pt(){let t=h.useRef(new Map),n=h.useCallback((r,a,l,i)=>{let c=i!=null&&i.once?(...d)=>{t.current.delete(l),l(...d)}:l;t.current.set(l,{type:a,eventTarget:r,fn:c,options:i}),r.addEventListener(a,l,i)},[]),e=h.useCallback((r,a,l,i)=>{var c;let d=((c=t.current.get(l))===null||c===void 0?void 0:c.fn)||l;r.removeEventListener(a,d,i),t.current.delete(l)},[]),s=h.useCallback(()=>{t.current.forEach((r,a)=>{e(r.eventTarget,r.type,a,r.options)})},[e]);return h.useEffect(()=>s,[s]),{addGlobalListener:n,removeGlobalListener:e,removeAllGlobalListeners:s}}function wn(t){let{ref:n,onInteractOutside:e,isDisabled:s,onInteractOutsideStart:r}=t,a=h.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),l=He(c=>{e&&he(c,n)&&(r&&r(c),a.current.isPointerDown=!0)}),i=He(c=>{e&&e(c)});h.useEffect(()=>{let c=a.current;if(s)return;const d=n.current,u=Et(d);if(typeof PointerEvent<"u"){let g=f=>{c.isPointerDown&&he(f,n)&&i(f),c.isPointerDown=!1};return u.addEventListener("pointerdown",l,!0),u.addEventListener("pointerup",g,!0),()=>{u.removeEventListener("pointerdown",l,!0),u.removeEventListener("pointerup",g,!0)}}else{let g=m=>{c.ignoreEmulatedMouseEvents?c.ignoreEmulatedMouseEvents=!1:c.isPointerDown&&he(m,n)&&i(m),c.isPointerDown=!1},f=m=>{c.ignoreEmulatedMouseEvents=!0,c.isPointerDown&&he(m,n)&&i(m),c.isPointerDown=!1};return u.addEventListener("mousedown",l,!0),u.addEventListener("mouseup",g,!0),u.addEventListener("touchstart",l,!0),u.addEventListener("touchend",f,!0),()=>{u.removeEventListener("mousedown",l,!0),u.removeEventListener("mouseup",g,!0),u.removeEventListener("touchstart",l,!0),u.removeEventListener("touchend",f,!0)}}},[n,s,l,i])}function he(t,n){if(t.button>0)return!1;if(t.target){const e=t.target.ownerDocument;if(!e||!e.documentElement.contains(t.target)||t.target.closest("[data-react-aria-top-layer]"))return!1}return n.current&&!n.current.contains(t.target)}const xr=X(o.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined");function yn({className:t,children:n,size:e,color:s,radius:r,selectable:a,wrap:l=!0}){return o.jsx("div",{className:D("flex items-center gap-8",l&&"flex-wrap",t),children:h.Children.map(n,i=>{if(h.isValidElement(i))return h.cloneElement(i,{size:e,color:s,selectable:a,radius:r})})})}function Te(t){return{id:t,name:`${t}`,description:`${t}`}}const Ke=["#3b82f6","#6366f1","#0284c7","#9333ea","#059669","#ea580c","#dc2626","#06b6d4","#e11d48"],jn=h.forwardRef(({size:t,label:n,color:e},s)=>{const{initial:r,bgColor:a}=h.useMemo(()=>{const l=(n||"").split("").reduce((i,c)=>c.charCodeAt(0)+i,(n==null?void 0:n.length)||0);return{initial:n.slice(0,1).toUpperCase(),bgColor:Ke[l%Ke.length]}},[n]);return o.jsx("div",{ref:s,style:e?void 0:{backgroundColor:a},className:D("flex h-full w-full items-center justify-center font-semibold leading-normal text-on-primary",e,Cn(t)),children:r})});function Cn(t){switch(t){case"xs":return"text-xs";case"sm":return"text-xs";case"xl":return"text-xl";case"md":return"text-base";default:return""}}const Ie=h.forwardRef(({className:t,circle:n,size:e="md",src:s,link:r,label:a,fallback:l="initials",fallbackColor:i,lazy:c=!0,...d},u)=>{let g=s?o.jsx("img",{ref:u,src:s,alt:a,loading:c?"lazy":void 0,className:"block h-full w-full object-cover"}):l==="initials"&&a?o.jsx(jn,{size:e,label:a,color:i}):o.jsx("div",{className:"h-full w-full bg-alt dark:bg-chip",children:o.jsx(Tt,{viewBox:"0 0 48 48",className:"h-full w-full text-muted"})});a&&(g=o.jsx(Qe,{label:a,children:g}));const f={...d,className:D(t,"relative block overflow-hidden select-none flex-shrink-0",In(e),n?"rounded-full":"rounded")};return r?o.jsx(Pt,{...f,to:r,children:g}):o.jsx("div",{...f,children:g})});function In(t){switch(t){case"xs":return"w-18 h-18";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";case"lg":return"w-40 h-40";case"xl":return"w-60 h-60";default:return t}}function kn(t,n){const e=h.useRef(null),s=Ze(n),{displayWith:r=B=>B.name,validateWith:a,children:l,suggestions:i,isLoading:c,inputValue:d,onInputValueChange:u,onItemSelected:g,placeholder:f,onOpenChange:m,chipSize:p="sm",openMenuOnFocus:b=!0,showEmptyMessage:x,value:v,defaultValue:w,onChange:y,valueKey:j,isAsync:S,allowCustomValue:O=!0,showDropdownArrow:E,onChipClick:z,alwaysShowAvatar:R=!1,readOnly:F,...I}=t,P=Je({...t,flexibleHeight:!0}),[N,se]=En(t),[re,ae]=h.useState(!1),k=o.jsx(Re,{isIndeterminate:!0,size:"sm","aria-label":"loading..."}),T=E?o.jsx(Ae,{}):null,{fieldProps:K,inputProps:W}=Mt({...I,focusRef:s,endAdornment:c&&re?k:T});return o.jsx(Ot,{fieldClassNames:P,...K,children:o.jsxs(ln,{ref:e,className:D("flex flex-wrap items-center",P.input),onClick:()=>{var B;(B=s.current)==null||B.focus()},children:[o.jsx(Dn,{displayChipUsing:r,onChipClick:z,items:N,setItems:se,chipSize:p,alwaysShowAvatar:R,readOnly:F}),o.jsx(Sn,{size:t.size,showEmptyMessage:x,inputProps:W,inputValue:d,onInputValueChange:u,fieldRef:e,inputRef:s,chips:N,setChips:se,validateWith:a,isLoading:c,suggestions:i,placeholder:f,openMenuOnFocus:b,listboxIsOpen:re,setListboxIsOpen:ae,allowCustomValue:O,readOnly:F,children:l})]})})}function Dn({items:t,setItems:n,displayChipUsing:e,chipSize:s,onChipClick:r,alwaysShowAvatar:a,readOnly:l}){const i=et(),c=h.useCallback(d=>{const u=t.findIndex(f=>f.id===d),g=[...t];return u>-1&&(g.splice(u,1),n(g)),g},[t,n]);return o.jsx(yn,{className:D("max-w-full flex-shrink-0 flex-wrap",s==="xs"?"my-6":"my-8"),size:s,selectable:!0,children:t.map(d=>o.jsx(Rt,{errorMessage:d.errorMessage,adornment:d.image||a?o.jsx(Ie,{circle:!0,src:d.image,fallback:"initials",label:d.name}):null,onClick:()=>r==null?void 0:r(d),onRemove:l?void 0:()=>{c(d.id).length?i==null||i.focusPrevious({tabbable:!0}):i==null||i.focusLast()},children:e(d)},d.id))})}function Sn(t){const{inputRef:n,fieldRef:e,validateWith:s,setChips:r,chips:a,suggestions:l,inputProps:i,placeholder:c,openMenuOnFocus:d,listboxIsOpen:u,setListboxIsOpen:g,allowCustomValue:f,isLoading:m,size:p,readOnly:b}=t,x=et(),v=h.useCallback(k=>{k=(k||[]).filter(T=>{const K=!T||!T.id||!T.name;return!(a.findIndex(B=>B.id===(T==null?void 0:T.id))>-1)&&!K}),k.length&&(s&&(k=k.map(T=>s(T))),r([...a,...k]))},[a,r,s]),w=At({...t,clearInputOnItemSelection:!0,isOpen:u,onOpenChange:g,items:l,selectionMode:"none",role:"listbox",virtualFocus:!0,onItemSelected:k=>{N(k)}}),{state:{activeIndex:y,setActiveIndex:j,isOpen:S,setIsOpen:O,inputValue:E,setInputValue:z},refs:R,listboxId:F,collection:I,onInputChange:P}=w,N=k=>{const T=I.size&&y!=null?[...I.values()][y]:null;T!=null&&T.item?v([T.item]):f&&v([Te(T?T.value:k)]),z(""),j(null),O(!1)};zt(()=>{e.current&&R.reference.current!==e.current&&w.reference(e.current)},[e,w,R]);const{handleTriggerKeyDown:se,handleListboxKeyboardNavigation:re}=Lt(w),ae=J(()=>{d&&!S&&O(!0)});return o.jsx(Ft,{listbox:w,mobileOverlay:Nt,isLoading:m,onPointerDown:k=>{k.preventDefault()},children:o.jsx("input",{readOnly:b,type:"text",className:D("mx-8 my-4 min-w-30 flex-[1_1_60px] bg-transparent text-sm outline-none",p==="xs"?"h-20":"h-30"),placeholder:c,...de(i,{ref:n,value:E,onChange:P,onPaste:k=>{const K=k.clipboardData.getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(K){k.preventDefault();const W=window.getSelection();W!=null&&W.rangeCount&&(W.deleteFromDocument(),v(K.map(B=>Te(B))))}},"aria-autocomplete":"list","aria-controls":S?F:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:k=>{if(b)return;const T=k.target;if(k.key==="Enter"){k.preventDefault(),N(T.value);return}if(k.key==="Escape"&&S&&(O(!1),z("")),k.key==="ArrowUp"&&S&&(y===0||y==null)){j(null);return}if(y!=null&&(k.key==="ArrowLeft"||k.key==="ArrowRight")){k.preventDefault();return}if((k.key==="ArrowLeft"||k.key==="Backspace"||k.key==="Delete")&&T.selectionStart===0&&y==null&&a.length){x==null||x.focusPrevious({tabbable:!0});return}se(k)||re(k)},onFocus:b?void 0:ae,onClick:b?void 0:ae})})})}function En({onChange:t,value:n,defaultValue:e,valueKey:s}){const r=h.useMemo(()=>We(n),[n]),a=h.useMemo(()=>We(e),[e]),l=h.useCallback(i=>{const c=s?i.map(d=>d[s]):i;t==null||t(c)},[t,s]);return Z(r||void 0,a||[],l)}function We(t){if(t!=null)return t.map(n=>typeof n!="object"?Te(n):n)}const Pn=Oe.forwardRef(kn),br=X(o.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),G=new Map,ge=new Map,Tn=new Map,_={status:"inactive"};function ke({e:t,rect:n,deltaX:e,deltaY:s}){return{rect:n,x:t.clientX,y:t.clientY,deltaX:e??0,deltaY:s??0,nativeEvent:t}}let xt=null;function Ge(t){xt=t}function Mn(t){return{left:t.left,top:t.top,width:t.width,height:t.height}}function On(t){const n=new IntersectionObserver(e=>{e.forEach(s=>{const{width:r,height:a,left:l,top:i}=s.boundingClientRect,[c,d]=[...t].find(([,g])=>g.ref.current===s.target)||[];if(c==null||d==null)return;const u={width:r,height:a,left:l,top:i};t.set(c,{...d,rect:u})}),n.disconnect()});[...t.values()].forEach(e=>{e.ref.current&&n.observe(e.ref.current)})}function wr({id:t,disabled:n,ref:e,preview:s,hidePreview:r,...a}){const l=h.useRef(null),{addGlobalListener:i,removeAllGlobalListeners:c}=pt(),d=h.useRef({lastPosition:{x:0,y:0}}).current,u=h.useRef(a);u.current=a,h.useLayoutEffect(()=>(n?G.delete(t):G.set(t,{...G.get(t),id:t,ref:e,type:u.current.type,getData:u.current.getData}),()=>{G.delete(t)}),[t,n,u,e]);const g=x=>{Tn.forEach(v=>{var w;v.type===((w=G.get(t))==null?void 0:w.type)&&x(v)})},f=x=>{var S,O;const v=G.get(t),w=e.current,y=!l.current||!d.clickedEl||l.current.contains(d.clickedEl);if(xt||!w||!v||!y){x.preventDefault(),x.stopPropagation();return}On(ge),Ge("drag"),r&&Rn(x),x.dataTransfer.effectAllowed="move",d.lastPosition={x:x.clientX,y:x.clientY},d.currentRect=Mn(w.getBoundingClientRect());const j=ke({rect:d.currentRect,e:x});s!=null&&s.current&&s.current(v,E=>{x.dataTransfer.setDragImage(E,0,0)}),_.status="dragging",_.dragTargetId=t,e.current&&(e.current.dataset.dragging="true"),(O=(S=u.current).onDragStart)==null||O.call(S,j,v),requestAnimationFrame(()=>{g(E=>{var z;return(z=E.onDragStart)==null?void 0:z.call(E,j,v)})}),i(window,"dragover",m,!0)},m=x=>{var O,E;if(x.preventDefault(),!d.currentRect)return;const v=x.clientX-d.lastPosition.x,w=x.clientY-d.lastPosition.y,y={...d.currentRect,left:d.currentRect.left+v,top:d.currentRect.top+w},j=ke({rect:y,e:x,deltaX:v,deltaY:w}),S=G.get(t);S&&((E=(O=u.current).onDragMove)==null||E.call(O,j,S),g(z=>{var R;return(R=z.onDragMove)==null?void 0:R.call(z,j,S)})),d.lastPosition={x:x.clientX,y:x.clientY},d.currentRect=y};return{draggableProps:{draggable:!n,onDragStart:f,onDragEnd:x=>{var y,j;if(c(),!d.currentRect)return;Ge(null),ee&&ee.remove();const v=ke({rect:d.currentRect,e:x}),w=G.get(t);w&&((j=(y=u.current).onDragEnd)==null||j.call(y,v,w),g(S=>{var O;return(O=S.onDragEnd)==null?void 0:O.call(S,v,w,_.status)})),requestAnimationFrame(()=>{_.dragTargetId=void 0,_.status="inactive",e.current&&delete e.current.dataset.dragging})},onPointerDown:x=>{d.clickedEl=x.target}},dragHandleRef:l}}let ee;function Rn(t){ee||(ee=new Image,document.body.append(ee),ee.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),t.dataTransfer.setDragImage(ee,0,0)}async function*An(t){const n=[];for(const e of t.items)if(e.kind==="file"){const s=e.webkitGetAsEntry();s&&n.push(s)}for(const e of n)if(e.isFile){if(e.name===".DS_Store")continue;const s=await wt(e);yield new tt(s,e.fullPath)}else e.isDirectory&&(yield*bt(e))}async function*bt(t){const n=t.createReader();let e;do{e=await new Promise((s,r)=>{n.readEntries(s,r)});for(const s of e)if(s.isFile){if(s.name===".DS_Store")continue;const r=await wt(s);yield new tt(r,s.fullPath)}else s.isDirectory&&(yield*bt(s))}while(e.length>0)}function wt(t){return new Promise((n,e)=>t.file(n,e))}async function zn(t){const n=[];for await(const e of t)n.push(e);return n}const Fn=400;function yr({id:t,disabled:n,ref:e,...s}){const r=h.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,a=h.useRef(s);a.current=s,h.useLayoutEffect(()=>(ge.set(t,{...ge.get(t),disabled:n,id:t,ref:e}),()=>{ge.delete(t)}),[t,a,n,e]);const l=f=>{var b;const m=a.current,p=m.allowDragEventsFromItself||e.current!==((b=f.ref)==null?void 0:b.current);return!!(f!=null&&f.type&&p&&m.types.includes(f.type)&&(!m.acceptsDrop||m.acceptsDrop(f)))},i=f=>{var p,b;const m=ce(f);m&&((b=(p=a.current).onDragLeave)==null||b.call(p,m))};return{droppableProps:n?{}:{onDragOver:f=>{var p,b;f.preventDefault(),f.stopPropagation();const m=ce(f);m&&l(m)&&((b=(p=a.current).onDragOver)==null||b.call(p,m,f))},onDragEnter:f=>{var p,b;if(f.stopPropagation(),r.dragOverElements.add(f.target),r.dragOverElements.size>1)return;const m=ce(f);m&&l(m)&&((b=(p=a.current).onDragEnter)==null||b.call(p,m),clearTimeout(r.dropActivateTimer),typeof a.current.onDropActivate=="function"&&(r.dropActivateTimer=setTimeout(()=>{var x,v;m&&((v=(x=a.current).onDropActivate)==null||v.call(x,m))},Fn)))},onDragLeave:f=>{f.stopPropagation(),r.dragOverElements.delete(f.target);for(const p of r.dragOverElements)f.currentTarget.contains(p)||r.dragOverElements.delete(p);if(r.dragOverElements.size>0)return;const m=ce(f);m&&l(m)&&(i(f),clearTimeout(r.dropActivateTimer))},onDrop:async f=>{var p,b,x,v;f.preventDefault(),f.stopPropagation(),r.dragOverElements.clear(),i(f),clearTimeout(r.dropActivateTimer);const m=ce(f);if(m)if((b=(p=a.current).onDragLeave)==null||b.call(p,m),!l(m))_.status!=="inactive"&&(_.status="dropFail");else{const w=(v=(x=a.current).onDrop)==null?void 0:v.call(x,m);_.status!=="inactive"&&(_.status=w===!1?"dropFail":"dropSuccess")}}}}}function ce(t){if(_.dragTargetId!=null)return G.get(_.dragTargetId);if(t.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>zn(An(t.dataTransfer))}}function jr(t){return"next_cursor"in t?t.next_cursor!=null:"last_page"in t?t.current_page<t.last_page:"next_page"in t?t.next_page!=null:t.data.length>0&&t.data.length>=t.per_page}var L=(t=>(t.Select="select",t.DateRangePicker="dateRangePicker",t.SelectModel="selectModel",t.Input="input",t.BooleanToggle="booleanToggle",t.ChipField="chipField",t.Custom="custom",t))(L||{}),ue=(t=>(t.eq="=",t.ne="!=",t.gt=">",t.gte=">=",t.lt="<",t.lte="<=",t.has="has",t.notNull="notNull",t.contains="contains",t.notContains="notContains",t.startsWith="startsWith",t.endsWith="endsWith",t.hasAll="hasAll",t.doesntHave="doesntHave",t.between="between",t))(ue||{});const Nn="user";function Ln(t){var f,m;const{granularity:n,closeDialogOnSelection:e,...s}=t,r=cn(t),a=h.useRef(null),i=ze()&&n!=="day",c=o.jsx(Fe,{offset:8,placement:"bottom-start",isOpen:r.calendarIsOpen,onOpenChange:r.setCalendarIsOpen,type:"popover",triggerRef:a,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:o.jsx(un,{state:r})}),d={onClick:p=>{p.stopPropagation(),p.preventDefault(),$n(p)?r.setCalendarIsOpen(!1):r.setCalendarIsOpen(!0)}},u=r.selectedValue,g=r.setSelectedValue;return o.jsxs(h.Fragment,{children:[o.jsxs(mt,{ref:a,wrapperProps:d,endAdornment:i?void 0:o.jsx(ht,{}),...s,children:[o.jsx(Pe,{isPlaceholder:(f=r.isPlaceholder)==null?void 0:f.start,state:r,segmentProps:d,value:u.start,onChange:p=>{g({start:p,end:u.end})}}),o.jsx(dn,{className:"block flex-shrink-0 text-muted",size:"md"}),o.jsx(Pe,{isPlaceholder:(m=r.isPlaceholder)==null?void 0:m.end,state:r,segmentProps:d,value:u.end,onChange:p=>{g({start:u.start,end:p})}})]}),c]})}function $n(t){return["hour","minute","dayPeriod"].includes(t.currentTarget.ariaLabel||"")}function Bn(t){const{field:{onChange:n,onBlur:e,value:s,ref:r},fieldState:{invalid:a,error:l}}=we({name:t.name}),i={onChange:c=>{n(c?yt(c):null)},onBlur:e,value:_n(s),invalid:a,errorMessage:l==null?void 0:l.message,inputRef:r};return o.jsx(Ln,{...de(i,t)})}function _n(t){const{start:n,end:e,preset:s}=t||{},r={preset:s};try{n&&(r.start=typeof n=="string"?ve(n):n),e&&(r.end=typeof e=="string"?ve(e):e)}catch{}return r}function yt({start:t,end:n,preset:e}={}){const s={preset:e};return t&&(s.start=t.toAbsoluteString()),n&&(s.end=n.toAbsoluteString()),s}function jt(t){var n;return{...t,defaultOperator:ue.between,control:{type:L.DateRangePicker,defaultValue:((n=t.control)==null?void 0:n.defaultValue)||yt(gt[3].getRangeValue())}}}function Vn(t){return jt({key:"created_at",label:C("Date created"),...t})}function Un(t){return jt({key:"updated_at",label:C("Last updated"),...t})}const Hn={key:"type",label:C("Type"),description:C("Type of the file"),defaultOperator:ue.eq,control:{type:L.Select,defaultValue:"05",options:[{key:"02",label:C("Text"),value:"text"},{key:"03",label:C("Audio"),value:"audio"},{key:"04",label:C("Video"),value:"video"},{key:"05",label:C("Image"),value:"image"},{key:"06",label:C("PDF"),value:"pdf"},{key:"07",label:C("Spreadsheet"),value:"spreadsheet"},{key:"08",label:C("Word Document"),value:"word"},{key:"09",label:C("Photoshop"),value:"photoshop"},{key:"10",label:C("Archive"),value:"archive"},{key:"11",label:C("Folder"),value:"folder"}]}},Cr=[Hn,{key:"public",label:C("Visibility"),description:C("Whether file is publicly accessible"),defaultOperator:ue.eq,control:{type:L.Select,defaultValue:"01",options:[{key:"01",label:C("Private"),value:!1},{key:"02",label:C("Public"),value:!0}]}},Vn({description:C("Date file was uploaded")}),Un({description:C("Date file was last changed")}),{key:"owner_id",label:C("Uploader"),description:C("User that this file was uploaded by"),defaultOperator:ue.eq,control:{type:L.SelectModel,model:Nn}}],De="filters";function Kn(t){if(!t)return[];let n=[];try{n=JSON.parse(atob(decodeURIComponent(t))),n.map(e=>(e.valueKey!=null&&(e.value=e.valueKey),e))}catch{}return n}function Wn(t,n){return!t||(t=n?t.filter(e=>e.value!=="").map(e=>Gn(e,n)):t,t=t.filter(e=>!e.isInactive),!t.length)?"":encodeURIComponent(btoa(JSON.stringify(t)))}function Gn(t,n){var s;const e=n.find(r=>r.key===t.key);if((e==null?void 0:e.control.type)==="select"){const r=(e.control.options||[]).find(a=>a.key===t.value);if(r)return{...t,value:r.value,valueKey:r.key}}return(s=e==null?void 0:e.extraFilters)!=null&&s.length&&(t.extraFilters=e.extraFilters),t}function qn(t,n){const[e]=$t(),s=Bt(),r=e.get(De),a=h.useMemo(()=>{if(!t)return[];const u=Kn(r);return(n||[]).forEach(g=>{if(!u.find(f=>f.key===g)){const f=t.find(m=>m.key===g);u.push({key:g,value:f.control.defaultValue,operator:f.defaultOperator,isInactive:!0})}}),u.sort((g,f)=>t.findIndex(m=>m.key===g.key)-t.findIndex(m=>m.key===f.key)),u},[r,n,t]),l=h.useCallback(u=>{const g=[...a];return u.forEach(f=>{const m=typeof f=="object"?f.key:f,p=g.findIndex(b=>b.key===m);p>-1&&g.splice(p,1)}),g},[a]),i=h.useCallback(u=>{const g=Wn(u,t);g?e.set(De,g):e.delete(De),s({search:`?${e}`},{replace:!0})},[t,s,e]),c=h.useCallback(u=>{const f=[...l(u),...u];i(f)},[l,i]),d=h.useCallback(u=>i(l([u])),[l,i]);return{add:c,remove:d,replaceAll:i,decodedFilters:a,encodedFilters:r}}const Ct=h.forwardRef((t,n)=>{const{isInactive:e,filter:s,...r}=t;return e?o.jsx(Yn,{filter:s,...r,ref:n}):o.jsx(Xn,{filter:s,...r,ref:n})}),Yn=h.forwardRef(({filter:t,...n},e)=>o.jsx(ne,{variant:"outline",size:"xs",color:"paper",radius:"rounded-md",border:"border",ref:e,endIcon:o.jsx(Ae,{}),...n,children:o.jsx(A,{...t.label})})),Xn=h.forwardRef(({filter:t,children:n,...e},s)=>{const r=t.control.type===L.BooleanToggle;return o.jsxs(ne,{variant:"outline",size:"xs",color:"primary",radius:"rounded-r-md",border:"border-y border-r",endIcon:!r&&o.jsx(Ae,{}),ref:s,...e,children:[o.jsx("span",{className:D(!r&&"mr-8 border-r border-r-primary-light pr-8"),children:o.jsx(A,{...t.label})}),n]})});function Qn({filter:t}){const{trans:n}=V();return o.jsx(nt,{size:"sm",name:`${t.key}.value`,selectionMode:"single",showSearchField:t.control.showSearchField,placeholder:t.control.placeholder?n(t.control.placeholder):void 0,searchPlaceholder:t.control.searchPlaceholder?n(t.control.searchPlaceholder):void 0,children:t.control.options.map(e=>o.jsx(ye,{value:e.key,children:typeof e.label=="string"?e.label:o.jsx(A,{...e.label})},e.key))})}function me(t){const{onValueChange:n,isInactive:e,filter:s,label:r}=t;return o.jsxs(Fe,{offset:10,type:"popover",onClose:a=>{a!==void 0&&n(a)},children:[o.jsx(Ct,{isInactive:e,filter:s,children:r}),o.jsx(Zn,{...t})]})}function Zn({filter:t,panel:n,value:e,operator:s}){const r=_t({defaultValues:{[t.key]:{value:e,operator:s}}}),{close:a,formId:l}=st();return o.jsxs(Ne,{size:"xs",children:[o.jsx(Vt,{children:o.jsx(A,{...t.label})}),o.jsx(rt,{padding:"px-14 pt-14 pb-4 max-h-288",children:o.jsxs(Ut,{form:r,id:l,onSubmit:i=>{a(i[t.key])},children:[t.description&&o.jsx("div",{className:"mb-14 text-xs text-muted",children:o.jsx(A,{...t.description})}),n]})}),o.jsx(at,{children:o.jsx(ne,{form:l,type:"submit",variant:"flat",color:"primary",size:"xs",children:o.jsx(A,{message:"Apply"})})})]})}function Jn(t,n,e){return ot({queryKey:[...t.split("/"),n],queryFn:()=>es(t,n),placeholderData:Ht,...e})}async function es(t,n){return je.get(t,{params:n}).then(e=>"results"in e.data?e.data:{results:Object.values(e.data).find(r=>Array.isArray(r))})}function It(t,n,e){return ot({queryKey:[t,n],queryFn:()=>ts(t,n),...e})}async function ts(t,n){return je.get(t,{params:n}).then(e=>e.data)}function ns({label:t,className:n,background:e,value:s,defaultValue:r="",placeholder:a=C("Select item..."),searchPlaceholder:l=C("Find an item..."),onChange:i,description:c,errorMessage:d,invalid:u,autoFocus:g,queryParams:f,endpoint:m,disabled:p,required:b}){var z;const x=h.useRef(null),[v,w]=h.useState(""),[y,j]=Z(s,r,i),S=Jn(m,{query:v,...f}),{trans:O}=V(),E=Je({size:"md"});return y?o.jsxs("div",{className:n,children:[o.jsx("div",{className:E.label,children:t}),o.jsx("div",{className:D("rounded-input border p-8",e,u&&"border-danger"),children:o.jsx(Ce,{initial:!1,mode:"wait",children:o.jsx(ss,{disabled:p,endpoint:m,modelId:y,queryParams:f,onEditClick:()=>{j(""),w(""),requestAnimationFrame(()=>{var R,F;(R=x.current)==null||R.focus(),(F=x.current)==null||F.click()})}})})}),c&&!d&&o.jsx("div",{className:E.description,children:c}),d&&o.jsx("div",{className:E.error,children:d})]}):o.jsx(Kt,{className:n,showSearchField:!0,invalid:u,errorMessage:d,description:c,color:"white",isAsync:!0,background:e,placeholder:O(a),searchPlaceholder:O(l),label:t,isLoading:S.isFetching,items:(z=S.data)==null?void 0:z.results,inputValue:v,onInputValueChange:w,selectionMode:"single",selectedValue:y,onSelectionChange:j,ref:x,autoFocus:g,disabled:p,required:b,children:R=>o.jsx(ye,{value:R.id,description:R.description,startIcon:o.jsx(Ie,{src:R.image,size:"sm",label:R.name}),children:R.name},R.id)})}function ss({modelId:t,onEditClick:n,endpoint:e,disabled:s,queryParams:r}){const{data:a,isLoading:l}=It(`${e}/${t}`,r);return l||!(a!=null&&a.model)?o.jsx(rs,{},"skeleton"):o.jsxs(fe.div,{className:D("flex items-center gap-10",s&&"pointer-events-none cursor-not-allowed text-disabled"),...Le,children:[o.jsx(Ie,{src:a.model.image,label:a.model.name}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm leading-4",children:a.model.name}),o.jsx("div",{className:"text-xs text-muted",children:a.model.description})]}),o.jsx(Qe,{label:o.jsx(A,{message:"Change item"}),children:o.jsx(q,{className:"ml-auto text-muted",size:"sm",onClick:n,disabled:s,children:o.jsx(xn,{})})})]},"preview")}function rs(){return o.jsxs(fe.div,{className:"flex items-center gap-10",...Le,children:[o.jsx(te,{variant:"rect",size:"w-32 h-32"}),o.jsxs("div",{className:"max-h-[36px] flex-auto",children:[o.jsx(te,{className:"text-xs"}),o.jsx(te,{className:"max-h-8 text-xs"})]}),o.jsx(te,{variant:"icon",size:"w-24 h-24"})]})}function as({name:t,...n}){const{clearErrors:e}=lt(),{field:{onChange:s,value:r=""},fieldState:{invalid:a,error:l}}=we({name:t});return o.jsx(ns,{value:r,onChange:i=>{s(i),e(t)},invalid:a,errorMessage:l==null?void 0:l.message,...n})}function os({filter:t}){return o.jsx(as,{name:`${t.key}.value`,endpoint:t.control.endpoint?t.control.endpoint:`normalized-models/${t.control.model}`})}function ls({filter:t}){return o.jsx(Bn,{min:t.control.min,max:t.control.max,size:"sm",name:`${t.key}.value`,granularity:"day",closeDialogOnSelection:!0})}const kt={"=":C("is"),"!=":C("is not"),">":C("is greater than"),">=":C("is greater than or equal to"),"<":C("is less than"),"<=":C("is less than or equal to"),notNull:C("has any value"),contains:C("contains"),notContains:C("does not contain"),startsWith:C("starts with"),endsWith:C("ends with"),has:C("Include"),doesntHave:C("Do not include"),between:C("Is between"),hasAll:C("Include all")};function is({filter:t}){var r,a;const n=t.control,e=lt(),s=Wt({control:e.control,name:`${t.key}.operator`});return o.jsxs(h.Fragment,{children:[(r=t.operators)!=null&&r.length?o.jsx(nt,{selectionMode:"single",name:`${t.key}.operator`,className:"mb-14",size:"sm",children:(a=t.operators)==null?void 0:a.map(l=>o.jsx(ye,{value:l,children:o.jsx(A,{...kt[l]})},l))}):null,s==="notNull"?null:o.jsx(Gt,{size:"sm",name:`${t.key}.value`,type:t.control.inputType,min:"minValue"in n?n.minValue:void 0,max:"maxValue"in n?n.maxValue:void 0,minLength:"minLength"in n?n.minLength:void 0,maxLength:"maxLength"in n?n.maxLength:void 0})]})}function cs({children:t,...n}){const{field:{onChange:e,onBlur:s,value:r=[],ref:a},fieldState:{invalid:l,error:i}}=we({name:n.name}),c={onChange:e,onBlur:s,value:r,invalid:l,errorMessage:i==null?void 0:i.message};return o.jsx(Pn,{ref:a,...de(c,n),children:t})}function us({filter:t}){const{trans:n}=V();return o.jsx(cs,{size:"sm",name:`${t.key}.value`,valueKey:"id",allowCustomValue:!1,showDropdownArrow:!0,placeholder:t.control.placeholder?n(t.control.placeholder):void 0,displayWith:e=>{const s=t.control.options.find(r=>r.key===e.id);if(s)return typeof s.label=="string"?s.label:s.label.message},suggestions:t.control.options.map(e=>({id:e.key,name:typeof e.label=="string"?e.label:e.label.message})),children:e=>o.jsx(ye,{value:e.id,children:o.jsx(A,{message:e.name})},e.id)})}function ds(t){switch(t.filter.control.type){case L.DateRangePicker:return o.jsx(fs,{...t});case L.BooleanToggle:return o.jsx(ms,{...t});case L.Select:return o.jsx(hs,{...t});case L.ChipField:return o.jsx(gs,{...t});case L.Input:return o.jsx(ps,{...t});case L.SelectModel:return o.jsx(xs,{...t});case L.Custom:const n=t.filter.control.listItem;return o.jsx(n,{...t});default:return null}}function fs(t){const{value:n,filter:e}=t;let s;return n.preset!==void 0?s=o.jsx(A,{...gt[n.preset].label}):s=o.jsx(fn,{start:new Date(n.start),end:new Date(n.end),options:{dateStyle:"medium"}}),o.jsx(me,{...t,label:s,panel:o.jsx(ls,{filter:e})})}function ms({filter:t,isInactive:n,onValueChange:e}){return o.jsx(Ct,{onClick:()=>{e({value:t.control.defaultValue})},filter:t,isInactive:n})}function hs(t){const{filter:n,value:e}=t,s=n.control.options.find(r=>r.key===e);return o.jsx(me,{...t,label:s?typeof s.label=="string"?s.label:o.jsx(A,{...s.label}):null,panel:o.jsx(Qn,{filter:n})})}function gs(t){return o.jsx(me,{...t,label:o.jsx(vs,{...t}),panel:o.jsx(us,{filter:t.filter})})}function vs(t){const{trans:n}=V(),{filter:e,value:s}=t,r=s.map(c=>e.control.options.find(d=>d.key===c)),a=3,l=s.length-a,i=o.jsx(h.Fragment,{children:r.filter(Boolean).slice(0,a).map((c,d)=>{let u="";return d!==0&&(u+=", "),u+=typeof c.label=="string"?c.label:n(c.label),u})});return l>0?o.jsx(A,{message:":names + :count more",values:{names:i,count:l}}):i}function ps(t){const{filter:n,value:e,operator:s}=t,r=s?o.jsx(A,{...kt[s]}):null,a=n.control.inputType==="number"?o.jsx(mn,{value:e}):e;return o.jsx(me,{...t,label:o.jsxs(h.Fragment,{children:[r," ",a]}),panel:o.jsx(is,{filter:n})})}function xs(t){const{value:n,filter:e}=t,{isLoading:s,data:r}=It(e.control.endpoint?`${e.control.endpoint}/${n}`:`normalized-models/${e.control.model}/${n}`,void 0,{enabled:!!n}),a=o.jsxs(h.Fragment,{children:[o.jsx(te,{variant:"avatar",size:"w-18 h-18 mr-6"}),o.jsx(te,{variant:"rect",size:"w-50"})]}),l=o.jsxs(h.Fragment,{children:[o.jsx(Ie,{size:"xs",src:r==null?void 0:r.model.image,label:r==null?void 0:r.model.name,className:"mr-6"}),r==null?void 0:r.model.name]}),i=s||!r?a:l;return o.jsx(me,{...t,label:i,panel:o.jsx(os,{filter:e})})}function Ir({filters:t,pinnedFilters:n,className:e}){const{decodedFilters:s,remove:r,replaceAll:a}=qn(t,n);return s.length?o.jsx("div",{className:D("flex items-center gap-6 overflow-x-auto",e),children:s.map((l,i)=>{const c=t.find(u=>u.key===l.key);if(!c)return null;const d=u=>{const g=[...s];g.splice(i,1,{key:c.key,value:u.value,isInactive:!1,operator:u.operator||c.defaultOperator}),a(g)};return o.jsxs("div",{children:[!l.isInactive&&o.jsx(q,{variant:"outline",color:"primary",size:"xs",radius:"rounded-l-md",onClick:()=>{r(l.key)},children:o.jsx(it,{})}),o.jsx(ds,{filter:c,isInactive:l.isInactive,value:l.valueKey!=null?l.valueKey:l.value,operator:l.operator,onValueChange:d})]},l.key)})}):null}const $e=h.createContext(null);function bs({onMoveStart:t,onMove:n,onMoveEnd:e,minimumMovement:s=0,preventDefault:r,stopPropagation:a=!0,onPress:l,onLongPress:i,...c}){const u=h.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:g,removeGlobalListener:f}=pt(),m=v=>{!u.el||(t==null?void 0:t(v,u.el))===!1||(u.originalTouchAction=u.el.style.touchAction,u.el.style.touchAction="none",u.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",u.started=!0)},p=v=>{var w;if(v.button===0&&u.id==null){if(u.started=!1,((w=c.onPointerDown)==null?void 0:w.call(c,v))===!1)return;a&&v.stopPropagation(),r&&v.preventDefault(),u.id=v.pointerId,u.el=v.currentTarget,u.lastPosition={x:v.clientX,y:v.clientY},i&&(u.longPressTimer=setTimeout(()=>{i(v,u.el),u.longPressTriggered=!0},400)),(t||n)&&g(window,"pointermove",b,!1),g(window,"pointerup",x,!1),g(window,"pointercancel",x,!1)}},b=v=>{if(v.pointerId===u.id){const w=v.clientX-u.lastPosition.x,y=v.clientY-u.lastPosition.y;(Math.abs(w)>=s||Math.abs(y)>=s)&&!u.started&&m(v),u.started&&(n==null||n(v,w,y),u.lastPosition={x:v.clientX,y:v.clientY})}},x=v=>{var w;if(v.pointerId===u.id){u.longPressTimer&&clearTimeout(u.longPressTimer);const y=u.longPressTriggered;u.longPressTriggered=!1,u.started&&(e==null||e(v)),u.el&&(v.type!=="pointercancel"&&((w=c.onPointerUp)==null||w.call(c,v,u.el),v.target&&u.el.contains(v.target)&&(y?i==null||i(v,u.el):l==null||l(v,u.el))),document.documentElement.style.userSelect=u.originalUserSelect||"",u.el.style.touchAction=u.originalTouchAction||""),u.id=void 0,u.started=!1,f(window,"pointermove",b,!1),f(window,"pointerup",x,!1),f(window,"pointercancel",x,!1)}};return{domProps:{onPointerDown:J(p)}}}const kr=X(o.jsx("path",{d:"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z"}),"LinkOutlined"),qe=X(o.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined"),ws=Oe.createContext(null);function Q(t,n){const{base_url:e}=qt(),s=h.useContext(ws);return h.useMemo(()=>{if(!t)return{};const a={previewUrl:ys(t,(n==null?void 0:n.thumbnail)||!1),downloadUrl:`${e}/api/v1/file-entries/download/${(n==null?void 0:n.downloadHashes)||t.hash}`};return s&&(a.previewUrl&&(a.previewUrl=Ye(a.previewUrl,{...s,thumbnail:n!=null&&n.thumbnail?"true":""},e)),a.downloadUrl=Ye(a.downloadUrl,s,e)),a},[e,t,n==null?void 0:n.downloadHashes,n==null?void 0:n.thumbnail,s])}function ys(t,n){if(t.url){if(Yt(t.url))if(n){const e=t.extension??"jpg";return t.url.replace(new RegExp(t.file_name+"$"),`thumbnail.${e}`)}else return t.url;return`${Xt().settings.base_url}/${t.url}`}}function Ye(t,n,e){const s=new URL(t,e);return Object.entries(n).forEach(([r,a])=>{s.searchParams.append(r,a)}),s.toString()}function Me(t,n){const e=document.createElement("a");e.href=t,n&&(e.download=n),document.body.appendChild(e),e.click(),document.body.removeChild(e)}const Dr=X(o.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined");function pe(t){return Qt()?t.metaKey:t.ctrlKey}function js(t){const{cellCount:n,rowCount:e}=t;return{onKeyDown:r=>{switch(r.key){case"ArrowLeft":U(r,{cell:{op:"decrement"}},t);break;case"ArrowRight":U(r,{cell:{op:"increment"}},t);break;case"ArrowUp":U(r,{row:{op:"decrement"}},t);break;case"ArrowDown":U(r,{row:{op:"increment"}},t);break;case"PageUp":U(r,{row:{op:"decrement",count:5}},t);break;case"PageDown":U(r,{row:{op:"increment",count:5}},t);break;case"Tab":Cs(r);break;case"Home":pe(r)?U(r,{row:{op:"decrement",count:e},cell:{op:"decrement",count:n}},t):U(r,{cell:{op:"decrement",count:n}},t);break;case"End":pe(r)?U(r,{row:{op:"increment",count:e},cell:{op:"increment",count:n}},t):U(r,{cell:{op:"increment",count:n}},t);break}}}}function U(t,n,{cellCount:e,rowCount:s}){var p,b,x,v,w,y,j;if(((p=document.activeElement)==null?void 0:p.tagName)==="input")return;t.preventDefault();const r=t.currentTarget,a=t.target.closest("[aria-colindex]");if(!a||!r)return;const l=a.closest("[aria-rowindex]");if(!l)return;let i=parseInt(l.getAttribute("aria-rowindex")),c=parseInt(a.getAttribute("aria-colindex"));if(Number.isNaN(i)||Number.isNaN(c))return;const d=((b=n.row)==null?void 0:b.count)??1;((x=n.row)==null?void 0:x.op)==="increment"?i=Math.min(s,i+d):((v=n.row)==null?void 0:v.op)==="decrement"&&(i=Math.max(1,i-d));const u=((w=n.cell)==null?void 0:w.count)??1;((y=n.cell)==null?void 0:y.op)==="increment"?c=Math.min(e,c+u):((j=n.cell)==null?void 0:j.op)==="decrement"&&(c=Math.max(1,c-u));const g=r.querySelector(`[aria-rowindex="${i}"] [aria-colindex="${c}"]`);if(!g)return;const m=ct(g).nextNode()||g;a.setAttribute("tabindex","-1"),m.setAttribute("tabindex","0"),m.focus()}function Cs(t){const n=t.currentTarget;if(t.shiftKey)n.focus();else{const e=ct(n,{tabbable:!0});let s,r;do r=e.lastChild(),r&&(s=r);while(r);s&&!s.contains(document.activeElement)&&Zt(s)}}const H=h.createContext(null);function Dt({index:t,isHeader:n}){const{columns:e,cellHeight:s="h-46",headerCellHeight:r="h-46"}=h.useContext(H),a=e[t],l=a==null?void 0:a.padding;let i="justify-start";return(a==null?void 0:a.align)==="center"?i="justify-center":(a==null?void 0:a.align)==="end"&&(i="justify-end"),D("flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2",n?r:s,(a==null?void 0:a.width)??"flex-1",a==null?void 0:a.maxWidth,a==null?void 0:a.minWidth,i,l,a==null?void 0:a.className)}function Is({rowIndex:t,rowIsHovered:n,index:e,item:s,id:r}){const{columns:a}=h.useContext(H),l=a[e],i=h.useMemo(()=>({index:t,isHovered:n,isPlaceholder:s.isPlaceholder}),[t,n,s.isPlaceholder]),c=Dt({index:e,isHeader:!1});return o.jsx("div",{tabIndex:-1,role:"gridcell","aria-colindex":e+1,id:r,className:c,children:o.jsx("div",{className:"w-full min-w-0 overflow-hidden overflow-ellipsis",children:l.body(s,i)})})}function ks(t){return t.shiftKey||pe(t)}function Ds({index:t,isSelected:n,isHeader:e}){const s=Jt(),r=ze(),{hideBorder:a,enableSelection:l,collapseOnMobile:i,onAction:c}=h.useContext(H);return D("flex gap-x-16 break-inside-avoid outline-none border border-transparent",c&&"cursor-pointer",r&&i&&a?"mb-8 pl-8 pr-0 rounded":"px-16",!a&&"border-b-divider",!a&&t===0&&"border-t-divider",n&&!s&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",n&&s&&"bg-selected hover:bg-focus focus-visible:bg-focus",!n&&!e&&(l||c)&&"focus-visible:bg-focus hover:bg-hover")}const Ss=["button","a","input","select","textarea"];function Es({item:t,index:n,renderAs:e,className:s,style:r}){const{selectedRows:a,columns:l,toggleRow:i,selectRow:c,onAction:d,selectRowOnContextMenu:u,enableSelection:g,selectionStyle:f,hideHeaderRow:m}=h.useContext(H),p=h.useRef(!1),b=a.includes(t.id),[x,v]=h.useState(!1),w=I=>I.target.closest(Ss.join(",")),y=I=>{f==="highlight"&&d&&!p.current&&!w(I)&&(I.preventDefault(),I.stopPropagation(),d(t,n))},j=!!a.length,S=I=>{w(I)||(f==="checkbox"?g&&(j||!d)?i(t):d&&d(t,n):f==="highlight"&&(p.current?g&&j?i(t):d==null||d(t,n):g&&c(t,ks(I))))},{domProps:O}=bs({onPointerDown:I=>{p.current=I.pointerType==="touch"},onPress:S,onLongPress:g?()=>{p.current&&i(t)}:void 0}),E=I=>{g&&I.key===" "?(I.preventDefault(),I.stopPropagation(),f==="checkbox"?i(t):c(t)):I.key==="Enter"&&!a.length&&d&&(I.preventDefault(),I.stopPropagation(),d(t,n))},z=I=>{u&&g&&(a.includes(t.id)||c(t)),p.current&&(I.preventDefault(),I.stopPropagation())},R=Ds({index:n,isSelected:b}),F=e||"div";return o.jsx(F,{role:"row","aria-rowindex":n+1+(m?0:1),"aria-selected":b,tabIndex:-1,className:D(s,R),item:F==="div"?void 0:t,onDoubleClick:J(y),onKeyDown:J(E),onContextMenu:J(z),onPointerEnter:J(()=>v(!0)),onPointerLeave:J(()=>v(!1)),style:r,...O,children:l.map((I,P)=>o.jsx(Is,{rowIndex:n,rowIsHovered:x,index:P,item:t},`${t.id}-${I.key}`))})}const Ps={key:"checkbox",header:()=>o.jsx(Ms,{}),align:"center",width:"w-24 flex-shrink-0",body:(t,n)=>n.isPlaceholder?o.jsx(te,{size:"w-24 h-24",variant:"rect"}):o.jsx(Ts,{item:t})};function Ts({item:t}){const{selectedRows:n,toggleRow:e}=h.useContext(H);return o.jsx(ut,{checked:n.includes(t.id),onChange:()=>e(t)})}function Ms(){const{trans:t}=V(),{data:n,selectedRows:e,onSelectionChange:s}=h.useContext(H),r=!!n.length&&n.length===e.length,a=!r&&!!e.length;return o.jsx(ut,{"aria-label":t({message:"Select all"}),isIndeterminate:a,checked:r,onChange:()=>{s(r?[]:n.map(l=>l.id))}})}const Os=X(o.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function Rs({index:t}){const{columns:n,sortDescriptor:e,onSortChange:s,enableSorting:r}=h.useContext(H),a=n[t],l=Dt({index:t,isHeader:!0}),[i,c]=h.useState(!1),d=a.sortingKey||a.key,u=a.allowsSorting&&r,{orderBy:g,orderDir:f}=e||{},m=u&&g===d;let p;m&&f==="asc"?p="ascending":m&&f==="desc"?p="descending":u&&(p="none");const b=()=>{if(!u)return;let w;m&&f==="desc"?w={orderDir:"asc",orderBy:d}:m&&f==="asc"?w={orderBy:void 0,orderDir:void 0}:w={orderDir:"desc",orderBy:d},s==null||s(w)},x=m||i,v={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return o.jsxs("div",{role:"columnheader",tabIndex:-1,"aria-colindex":t+1,"aria-sort":p,className:D(l,"text-xs font-medium text-muted",u&&"cursor-pointer"),onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},onKeyDown:w=>{(w.key===" "||w.key==="Enter")&&(w.preventDefault(),b())},onClick:b,children:[a.hideHeader?o.jsx("div",{className:"opacity-0",children:a.header()}):a.header(),o.jsx(Ce,{children:u&&o.jsx(fe.span,{variants:v,animate:x?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"-mt-2 ml-6 inline-block","data-testid":"table-sort-button","aria-hidden":!x,children:o.jsx(Os,{size:"xs",className:D("text-muted",f==="asc"&&g===d&&"rotate-180 transition-transform")})},"sort-icon")})]})}function As(){const{columns:t}=h.useContext(H);return o.jsx("div",{role:"row","aria-rowindex":1,tabIndex:-1,className:"flex gap-x-16 px-16",children:t.map((n,e)=>o.jsx(Rs,{index:e},n.key))})}function Sr({className:t,columns:n,collapseOnMobile:e=!0,hideHeaderRow:s=!1,hideBorder:r=!1,data:a,selectedRows:l,defaultSelectedRows:i,onSelectionChange:c,sortDescriptor:d,onSortChange:u,enableSorting:g=!0,onDelete:f,enableSelection:m=!0,selectionStyle:p="checkbox",ariaLabelledBy:b,selectRowOnContextMenu:x,onAction:v,renderRowAs:w,tableBody:y,meta:j,tableRef:S,closeOnInteractOutside:O=!1,cellHeight:E,headerCellHeight:z,...R}){const F=ze(),I=!!F&&e;I&&(s=!0,r=!0);const[P,N]=Z(l,i||[],c),[se,re]=Z(d,void 0,u),ae=h.useCallback(M=>{const $=[...P];if(!$.includes(M.id))$.push(M.id);else{const oe=$.indexOf(M.id);$.splice(oe,1)}N($)},[P,N]),k=h.useCallback((M,$)=>{let oe=[];M&&(oe=$?[...P==null?void 0:P.filter(ie=>ie!==M.id),M.id]:[M.id]),N(oe)},[P,N]),T=h.useMemo(()=>{const M=n.filter(oe=>{const ie=oe.visibleInMode||"regular";if(ie==="all"||ie==="compact"&&I||ie==="regular"&&!I)return!0});return m&&p!=="highlight"&&!F&&M.unshift(Ps),M},[F,n,m,p,I]),K={isCollapsedMode:I,cellHeight:E,headerCellHeight:z,hideBorder:r,hideHeaderRow:s,selectedRows:P,onSelectionChange:N,enableSorting:g,enableSelection:m,selectionStyle:p,data:a,columns:T,sortDescriptor:se,onSortChange:re,toggleRow:ae,selectRow:k,onAction:v,selectRowOnContextMenu:x,meta:j,collapseOnMobile:e},W=js({cellCount:m?T.length+1:T.length,rowCount:a.length+1}),B={renderRowAs:w};y?y=h.cloneElement(y,B):y=o.jsx(zs,{...B});const _e=Ze(S);return wn({ref:_e,onInteractOutside:M=>{O&&m&&(P!=null&&P.length)&&!M.target.closest('[role="dialog"]')&&N([])}}),o.jsx(H.Provider,{value:K,children:o.jsxs("div",{...de(R,W,{onKeyDown:M=>{M.key==="Escape"?(M.preventDefault(),M.stopPropagation(),P!=null&&P.length&&N([])):M.key==="Delete"?(M.preventDefault(),M.stopPropagation(),P!=null&&P.length&&(f==null||f(a.filter($=>P==null?void 0:P.includes($.id))))):pe(M)&&M.key==="a"&&(M.preventDefault(),M.stopPropagation(),m&&N(a.map($=>$.id)))}}),role:"grid",tabIndex:0,"aria-rowcount":a.length+1,"aria-colcount":T.length+1,ref:_e,"aria-multiselectable":m?!0:void 0,"aria-labelledby":b,className:D(t,"isolate select-none text-sm outline-none focus-visible:ring-2"),children:[!s&&o.jsx(As,{}),y]})})}function zs({renderRowAs:t}){const{data:n}=h.useContext(H);return o.jsx(h.Fragment,{children:n.map((e,s)=>o.jsx(Es,{item:e,index:s,renderAs:t},e.id))})}const Fs=2*1024*1024;function Ns({file:t,className:n,iconClassName:e,showImage:s=!0}){const{trans:r}=V(),{previewUrl:a}=Q(t,{thumbnail:!0});if(t.file_size&&t.file_size>Fs&&!t.thumbnail&&(s=!1),s&&t.type==="image"&&a){const l=r({message:":fileName thumbnail",values:{fileName:t.name}});return o.jsx("img",{className:D(n,"object-cover"),src:a,alt:l,draggable:!1})}return o.jsx(en,{className:e,type:t.type})}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xe(){return xe=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},xe.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function be(){return be=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},be.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function le(t,n,e){var s,r=(s=e.initialDeps)!=null?s:[],a;return function(){var l;e.key&&e.debug!=null&&e.debug()&&(l=Date.now());var i=t(),c=i.length!==r.length||i.some(function(p,b){return r[b]!==p});if(!c)return a;r=i;var d;if(e.key&&e.debug!=null&&e.debug()&&(d=Date.now()),a=n.apply(void 0,i),e.key&&e.debug!=null&&e.debug()){var u=Math.round((Date.now()-l)*100)/100,g=Math.round((Date.now()-d)*100)/100,f=g/16,m=function(b,x){for(b=String(b);b.length<x;)b=" "+b;return b};console.info("%câ± "+m(g,5)+" /"+m(u,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*f,120))+"deg 100% 31%);",e==null?void 0:e.key)}return e==null||e.onChange==null||e.onChange(a),a}}function Se(t,n){if(t===void 0)throw new Error("Unexpected undefined"+(n?": "+n:""));return t}var Ls=function(n,e){return Math.abs(n-e)<1};/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $s=function(n){return n},Bs=function(n){for(var e=Math.max(n.startIndex-n.overscan,0),s=Math.min(n.endIndex+n.overscan,n.count-1),r=[],a=e;a<=s;a++)r.push(a);return r},_s=function(n,e){var s=n.scrollElement;if(s){var r=function(i){var c=i.width,d=i.height;e({width:Math.round(c),height:Math.round(d)})};r(s.getBoundingClientRect());var a=new ResizeObserver(function(l){var i=l[0];if(i!=null&&i.borderBoxSize){var c=i.borderBoxSize[0];if(c){r({width:c.inlineSize,height:c.blockSize});return}}r(s.getBoundingClientRect())});return a.observe(s,{box:"border-box"}),function(){a.unobserve(s)}}},Vs=function(n,e){var s=n.scrollElement;if(s){var r=function(){e(s[n.options.horizontal?"scrollLeft":"scrollTop"])};return r(),s.addEventListener("scroll",r,{passive:!0}),function(){s.removeEventListener("scroll",r)}}},Us=function(n,e,s){if(e!=null&&e.borderBoxSize){var r=e.borderBoxSize[0];if(r){var a=Math.round(r[s.options.horizontal?"inlineSize":"blockSize"]);return a}}return Math.round(n.getBoundingClientRect()[s.options.horizontal?"width":"height"])},Hs=function(n,e,s){var r,a,l=e.adjustments,i=l===void 0?0:l,c=e.behavior,d=n+i;(r=s.scrollElement)==null||r.scrollTo==null||r.scrollTo((a={},a[s.options.horizontal?"left":"top"]=d,a.behavior=c,a))},Ks=function(n){var e=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=function(){var s=null,r=function(){return s||(typeof ResizeObserver<"u"?s=new ResizeObserver(function(l){l.forEach(function(i){e._measureElement(i.target,i)})}):null)};return{disconnect:function(){var l;return(l=r())==null?void 0:l.disconnect()},observe:function(l){var i;return(i=r())==null?void 0:i.observe(l,{box:"border-box"})},unobserve:function(l){var i;return(i=r())==null?void 0:i.unobserve(l)}}}(),this.range=null,this.setOptions=function(s){Object.entries(s).forEach(function(r){var a=r[0],l=r[1];typeof l>"u"&&delete s[a]}),e.options=be({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:$s,rangeExtractor:Bs,onChange:function(){},measureElement:Us,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},s)},this.notify=function(s){e.options.onChange==null||e.options.onChange(e,s)},this.maybeNotify=le(function(){return e.calculateRange(),[e.isScrolling,e.range?e.range.startIndex:null,e.range?e.range.endIndex:null]},function(s){e.notify(s)},{key:!1,debug:function(){return e.options.debug},initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=function(){e.unsubs.filter(Boolean).forEach(function(s){return s()}),e.unsubs=[],e.scrollElement=null},this._didMount=function(){return e.measureElementCache.forEach(e.observer.observe),function(){e.observer.disconnect(),e.cleanup()}},this._willUpdate=function(){var s=e.options.getScrollElement();e.scrollElement!==s&&(e.cleanup(),e.scrollElement=s,e._scrollToOffset(e.scrollOffset,{adjustments:void 0,behavior:void 0}),e.unsubs.push(e.options.observeElementRect(e,function(r){e.scrollRect=r,e.maybeNotify()})),e.unsubs.push(e.options.observeElementOffset(e,function(r){e.scrollAdjustments=0,e.scrollOffset!==r&&(e.isScrollingTimeoutId!==null&&(clearTimeout(e.isScrollingTimeoutId),e.isScrollingTimeoutId=null),e.isScrolling=!0,e.scrollDirection=e.scrollOffset<r?"forward":"backward",e.scrollOffset=r,e.maybeNotify(),e.isScrollingTimeoutId=setTimeout(function(){e.isScrollingTimeoutId=null,e.isScrolling=!1,e.scrollDirection=null,e.maybeNotify()},e.options.scrollingDelay))})))},this.getSize=function(){return e.scrollRect[e.options.horizontal?"width":"height"]},this.memoOptions=le(function(){return[e.options.count,e.options.paddingStart,e.options.scrollMargin,e.options.getItemKey]},function(s,r,a,l){return e.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:r,scrollMargin:a,getItemKey:l}},{key:!1}),this.getFurthestMeasurement=function(s,r){for(var a=new Map,l=new Map,i=r-1;i>=0;i--){var c=s[i];if(!a.has(c.lane)){var d=l.get(c.lane);if(d==null||c.end>d.end?l.set(c.lane,c):c.end<d.end&&a.set(c.lane,!0),a.size===e.options.lanes)break}}return l.size===e.options.lanes?Array.from(l.values()).sort(function(u,g){return u.end-g.end})[0]:void 0},this.getMeasurements=le(function(){return[e.memoOptions(),e.itemSizeCache]},function(s,r){var a=s.count,l=s.paddingStart,i=s.scrollMargin,c=s.getItemKey,d=e.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,e.pendingMeasuredCacheIndexes):0;e.pendingMeasuredCacheIndexes=[];for(var u=e.measurementsCache.slice(0,d),g=d;g<a;g++){var f=c(g),m=e.options.lanes===1?u[g-1]:e.getFurthestMeasurement(u,g),p=m?m.end:l+i,b=r.get(f),x=typeof b=="number"?b:e.options.estimateSize(g),v=p+x,w=m?m.lane:g%e.options.lanes;u[g]={index:g,start:p,size:x,end:v,key:f,lane:w}}return e.measurementsCache=u,u},{key:!1,debug:function(){return e.options.debug}}),this.calculateRange=le(function(){return[e.getMeasurements(),e.getSize(),e.scrollOffset]},function(s,r,a){return e.range=s.length>0&&r>0?Ws({measurements:s,outerSize:r,scrollOffset:a}):null},{key:!1,debug:function(){return e.options.debug}}),this.getIndexes=le(function(){return[e.options.rangeExtractor,e.calculateRange(),e.options.overscan,e.options.count]},function(s,r,a,l){return r===null?[]:s(be({},r,{overscan:a,count:l}))},{key:!1,debug:function(){return e.options.debug}}),this.indexFromElement=function(s){var r=e.options.indexAttribute,a=s.getAttribute(r);return a?parseInt(a,10):(console.warn("Missing attribute name '"+r+"={index}' on measured element."),-1)},this._measureElement=function(s,r){var a=e.measurementsCache[e.indexFromElement(s)];if(!a||!s.isConnected){e.measureElementCache.forEach(function(c,d){c===s&&(e.observer.unobserve(s),e.measureElementCache.delete(d))});return}var l=e.measureElementCache.get(a.key);l!==s&&(l&&e.observer.unobserve(l),e.observer.observe(s),e.measureElementCache.set(a.key,s));var i=e.options.measureElement(s,r,e);e.resizeItem(a,i)},this.resizeItem=function(s,r){var a,l=(a=e.itemSizeCache.get(s.key))!=null?a:s.size,i=r-l;i!==0&&(s.start<e.scrollOffset&&e._scrollToOffset(e.scrollOffset,{adjustments:e.scrollAdjustments+=i,behavior:void 0}),e.pendingMeasuredCacheIndexes.push(s.index),e.itemSizeCache=new Map(e.itemSizeCache.set(s.key,r)),e.notify(!1))},this.measureElement=function(s){s&&e._measureElement(s,void 0)},this.getVirtualItems=le(function(){return[e.getIndexes(),e.getMeasurements()]},function(s,r){for(var a=[],l=0,i=s.length;l<i;l++){var c=s[l],d=r[c];a.push(d)}return a},{key:!1,debug:function(){return e.options.debug}}),this.getVirtualItemForOffset=function(s){var r=e.getMeasurements();return Se(r[St(0,r.length-1,function(a){return Se(r[a]).start},s)])},this.getOffsetForAlignment=function(s,r){var a=e.getSize();r==="auto"&&(s<=e.scrollOffset?r="start":s>=e.scrollOffset+a?r="end":r="start"),r==="start"?s=s:r==="end"?s=s-a:r==="center"&&(s=s-a/2);var l=e.options.horizontal?"scrollWidth":"scrollHeight",i=e.scrollElement?"document"in e.scrollElement?e.scrollElement.document.documentElement[l]:e.scrollElement[l]:0,c=i-e.getSize();return Math.max(Math.min(c,s),0)},this.getOffsetForIndex=function(s,r){r===void 0&&(r="auto"),s=Math.max(0,Math.min(s,e.options.count-1));var a=Se(e.getMeasurements()[s]);if(r==="auto")if(a.end>=e.scrollOffset+e.getSize()-e.options.scrollPaddingEnd)r="end";else if(a.start<=e.scrollOffset+e.options.scrollPaddingStart)r="start";else return[e.scrollOffset,r];var l=r==="end"?a.end+e.options.scrollPaddingEnd:a.start-e.options.scrollPaddingStart;return[e.getOffsetForAlignment(l,r),r]},this.isDynamicMode=function(){return e.measureElementCache.size>0},this.cancelScrollToIndex=function(){e.scrollToIndexTimeoutId!==null&&(clearTimeout(e.scrollToIndexTimeoutId),e.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(s,r){var a=r===void 0?{}:r,l=a.align,i=l===void 0?"start":l,c=a.behavior;e.cancelScrollToIndex(),c==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e._scrollToOffset(e.getOffsetForAlignment(s,i),{adjustments:void 0,behavior:c})},this.scrollToIndex=function(s,r){var a=r===void 0?{}:r,l=a.align,i=l===void 0?"auto":l,c=a.behavior;s=Math.max(0,Math.min(s,e.options.count-1)),e.cancelScrollToIndex(),c==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var d=e.getOffsetForIndex(s,i),u=d[0],g=d[1];e._scrollToOffset(u,{adjustments:void 0,behavior:c}),c!=="smooth"&&e.isDynamicMode()&&(e.scrollToIndexTimeoutId=setTimeout(function(){e.scrollToIndexTimeoutId=null;var f=e.measureElementCache.has(e.options.getItemKey(s));if(f){var m=e.getOffsetForIndex(s,g),p=m[0];Ls(p,e.scrollOffset)||e.scrollToIndex(s,{align:g,behavior:c})}else e.scrollToIndex(s,{align:g,behavior:c})}))},this.scrollBy=function(s,r){var a=r===void 0?{}:r,l=a.behavior;e.cancelScrollToIndex(),l==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e._scrollToOffset(e.scrollOffset+s,{adjustments:void 0,behavior:l})},this.getTotalSize=function(){var s;return(((s=e.getMeasurements()[e.options.count-1])==null?void 0:s.end)||e.options.paddingStart)-e.options.scrollMargin+e.options.paddingEnd},this._scrollToOffset=function(s,r){var a=r.adjustments,l=r.behavior;e.options.scrollToFn(s,{behavior:l,adjustments:a},e)},this.measure=function(){e.itemSizeCache=new Map,e.notify(!1)},this.setOptions(n),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(s){e.itemSizeCache.set(s.key,s.size)}),this.maybeNotify()},St=function(n,e,s,r){for(;n<=e;){var a=(n+e)/2|0,l=s(a);if(l<r)n=a+1;else if(l>r)e=a-1;else return a}return n>0?n-1:0};function Ws(t){for(var n=t.measurements,e=t.outerSize,s=t.scrollOffset,r=n.length-1,a=function(d){return n[d].start},l=St(0,r,a,s),i=l;i<r&&n[i].end<s+e;)i++;return{startIndex:l,endIndex:i}}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Gs=typeof document<"u"?h.useLayoutEffect:h.useEffect;function qs(t){var n=h.useReducer(function(){return{}},{})[1],e=xe({},t,{onChange:function(l,i){i?tn.flushSync(n):n(),t.onChange==null||t.onChange(l,i)}}),s=h.useState(function(){return new Ks(e)}),r=s[0];return r.setOptions(e),h.useEffect(function(){return r._didMount()},[]),Gs(function(){return r._willUpdate()}),r}function Er(t){return qs(xe({observeElementRect:_s,observeElementOffset:Vs,scrollToFn:Hs},t))}const Be=Oe.createContext(null);function Y({message:t,className:n,allowDownload:e}){const{entries:s,activeIndex:r}=h.useContext(Be),a=s[r],l=t||o.jsx(A,{message:"No file preview available"}),{downloadUrl:i}=Q(a);return o.jsxs("div",{className:D(n,"w-[calc(100%-40px)] max-w-400 rounded bg-paper p-40 text-center shadow"),children:[o.jsx("div",{className:"text-lg",children:l}),e&&o.jsx("div",{className:"mt-20 block text-center",children:o.jsx(ne,{variant:"flat",color:"primary",onClick:()=>{i&&Me(i)},children:o.jsx(A,{message:"Download"})})})]})}function Ys(t){const{entry:n,className:e}=t,{trans:s}=V(),{previewUrl:r}=Q(n);return r?o.jsx("img",{className:D(e,"shadow"),src:r,alt:s({message:"Preview for :name",values:{name:n.name}})}):o.jsx(Y,{...t})}const Xs=5242880;function Qs(t){const{entry:n,className:e}=t,{trans:s}=V(),[r,a]=h.useState(!1),[l,i]=h.useState(!0),[c,d]=h.useState(!1),[u,g]=h.useState(null),{previewUrl:f}=Q(n);return h.useEffect(()=>{n&&(f?n.file_size>=Xs?(a(!0),i(!1)):Zs(f).then(m=>{g(m.data)}).catch(()=>{d(!0)}).finally(()=>{i(!1)}):d(!0))},[n,f]),l?o.jsx(Re,{isIndeterminate:!0,"aria-label":s({message:"Loading file contents"})}):r?o.jsx(Y,{...t,message:o.jsx(A,{message:"This file is too large to preview."})}):c?o.jsx(Y,{...t,message:o.jsx(A,{message:"There was an issue previewing this file"})}):o.jsx("pre",{className:D("h-full w-full overflow-y-auto whitespace-pre-wrap break-words rounded bg-paper p-20 text-sm",e),children:o.jsx("div",{className:"container mx-auto",children:`${u}`})})}function Zs(t){return je.get(t,{responseType:"text",withCredentials:!1,headers:{Accept:"text/plain"}})}function Js(t){const{entry:n,className:e}=t,{previewUrl:s}=Q(n),r=h.useRef(null),[a,l]=h.useState(!1);return h.useEffect(()=>{var i;l(!((i=r.current)!=null&&i.canPlayType(n.mime)))},[n]),a||!s?o.jsx(Y,{...t}):o.jsx("video",{className:e,ref:r,controls:!0,controlsList:"nodownload noremoteplayback",playsInline:!0,autoPlay:!0,children:o.jsx("source",{src:s,type:n.mime,onError:()=>{l(!0)}})})}function er(t){const{entry:n,className:e}=t,{previewUrl:s}=Q(n),r=h.useRef(null),[a,l]=h.useState(!1);return h.useEffect(()=>{var i;l(!((i=r.current)!=null&&i.canPlayType(n.mime)))},[n]),a||!s?o.jsx(Y,{...t}):o.jsx("audio",{className:e,ref:r,controls:!0,controlsList:"nodownload noremoteplayback",autoPlay:!0,children:o.jsx("source",{src:s,type:n.mime,onError:()=>{l(!0)}})})}function tr(t){const{entry:n,className:e}=t,{trans:s}=V(),{previewUrl:r}=Q(n);return r?o.jsx("iframe",{title:s({message:"Preview for :name",values:{name:n.name}}),className:D(e,"h-full w-full"),src:`${r}#toolbar=0`}):o.jsx(Y,{...t})}function Ee(t){const{entry:n,className:e}=t,{trans:s}=V(),r=h.useRef(null),[a,l]=h.useState(!1),i=h.useRef(),[c,d]=h.useState(!1),{previewUrl:u}=Q(n);return h.useEffect(()=>{u?n.file_size&&n.file_size>25e6?l(!0):r.current&&(r.current.onload=()=>{clearTimeout(i.current),d(!1)},nr(u,n).then(g=>{r.current&&(r.current.src=g)}),i.current=setTimeout(()=>{l(!0)},5e3)):l(!0)},[n,u]),a?o.jsx(Y,{...t}):o.jsxs("div",{className:D(e,"h-full w-full"),children:[c&&o.jsx(Re,{}),o.jsx("iframe",{ref:r,title:s({message:"Preview for :name",values:{name:n.name}}),className:D("h-full w-full",c&&"hidden")})]})}async function nr(t,n){const e=new URL(t);if(!e.searchParams.has("shareable_link")){const{data:s}=await je.post(`file-entries/${n.id}/add-preview-token`);e.searchParams.append("preview_token",s.preview_token)}return sr(e)}function sr(t){return`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(t.toString())}`}const Xe={text:Qs,video:Js,audio:er,image:Ys,pdf:tr,spreadsheet:Ee,powerPoint:Ee,word:Ee,"text/rtf":Y};function rr(t){const n=t==null?void 0:t.mime,e=t==null?void 0:t.type;return Xe[n]||Xe[e]||Y}const ar=X(o.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"}),"ChevronLeftOutlined");function or({entries:t,onClose:n,showHeader:e=!0,className:s,headerActionsLeft:r,allowDownload:a=!0,...l}){const i=dt("(max-width: 1024px)"),[c,d]=Z(l.activeIndex,l.defaultActiveIndex||0,l.onActiveIndexChange),u=t[c],g=h.useMemo(()=>({entries:t,activeIndex:c}),[t,c]),f=rr(u);if(!u)return n==null||n(),null;const m=t.length-1>c,p=()=>{d(c+1)},b=c>0,x=()=>{d(c-1)};return o.jsxs(Be.Provider,{value:g,children:[e&&o.jsx(lr,{actionsLeft:r,isMobile:i,onClose:n,onNext:m?p:void 0,onPrevious:b?x:void 0,allowDownload:a}),o.jsxs("div",{className:D("relative flex-auto overflow-hidden",s),children:[i&&o.jsx(q,{size:"lg",className:"absolute left-0 top-1/2 z-10 -translate-y-1/2 transform text-muted",disabled:!b,onClick:x,children:o.jsx(nn,{})}),o.jsx(Ce,{initial:!1,children:o.jsx(fe.div,{className:"absolute inset-0 flex items-center justify-center",...Le,children:o.jsx(f,{className:"max-h-[calc(100%-30px)]",entry:u,allowDownload:a})},u.id)}),i&&o.jsx(q,{size:"lg",className:"absolute right-0 top-1/2 z-10 -translate-y-1/2 transform text-muted",disabled:!m,onClick:p,children:o.jsx(hn,{})})]})]})}function lr({onNext:t,onPrevious:n,onClose:e,isMobile:s,actionsLeft:r,allowDownload:a}){const{entries:l,activeIndex:i}=h.useContext(Be),c=l[i],{downloadUrl:d}=Q(c),f=s?o.jsx(q,{onClick:()=>{d&&Me(d)},children:o.jsx(qe,{})}):o.jsx(ne,{startIcon:o.jsx(qe,{}),variant:"text",onClick:()=>{d&&Me(d)},children:o.jsx(A,{message:"Download"})});return o.jsxs("div",{className:"flex min-h-50 flex-shrink-0 items-center justify-between gap-20 border-b bg-paper px-10 text-sm text-muted",children:[o.jsxs("div",{className:"flex w-1/3 items-center justify-start gap-4",children:[r,a?f:void 0]}),o.jsxs("div",{className:"flex w-1/3 flex-nowrap items-center justify-center gap-10 text-main",children:[o.jsx(Ns,{file:c,iconClassName:"w-16 h-16",showImage:!1}),o.jsx("div",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap",children:c.name})]}),o.jsxs("div",{className:"flex w-1/3 items-center justify-end gap-10 whitespace-nowrap",children:[!s&&o.jsxs(h.Fragment,{children:[o.jsx(q,{disabled:!n,onClick:n,children:o.jsx(ar,{})}),o.jsx("div",{children:i+1}),o.jsx("div",{children:"/"}),o.jsx("div",{children:l.length}),o.jsx(q,{disabled:!t,onClick:t,children:o.jsx(bn,{})}),o.jsx("div",{className:"mx-20 h-24 w-1 bg-divider"})]}),o.jsx(q,{radius:"rounded-none",onClick:e,children:o.jsx(it,{})})]})]})}function Pr(t){return o.jsx(Ne,{size:"fullscreenTakeover",background:"bg-alt",className:"flex flex-col",children:o.jsx(ir,{...t})})}function ir(t){const{close:n}=st();return o.jsx(or,{onClose:n,...t})}function cr(t){const n=vt(),[e,s]=h.useState(!t.value&&!t.defaultValue),r=t.onChange,[a,l]=Z(t.value||n,t.defaultValue||n,j=>{s(!1),r==null||r(j)}),{min:i,max:c,granularity:d,timezone:u,calendarIsOpen:g,setCalendarIsOpen:f,closeDialogOnSelection:m}=gn(a,t),p=h.useCallback(()=>{s(!0),l(n),r==null||r(null),f(!1)},[n,l,r,f]),[b,x]=h.useState(()=>[Ve(a)]),v=h.useCallback(j=>{i&&j.compare(i)<0?j=i:c&&j.compare(c)>0&&(j=c);const S=a?a.set(j):vn(j,u);l(S),x([Ve(S)]),s(!1)},[l,i,c,a,u]),w=h.useCallback(j=>!e&&sn(a,j),[a,e]),y=h.useCallback(j=>({onClick:()=>{v==null||v(j),m&&(f==null||f(!1))}}),[v,f,m]);return{selectedValue:a,setSelectedValue:l,calendarIsOpen:g,setCalendarIsOpen:f,dayIsActive:w,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:y,calendarDates:b,setCalendarDates:x,isPlaceholder:e,clear:p,setIsPlaceholder:s,min:i,max:c,granularity:d,timezone:u,closeDialogOnSelection:m}}function ur({showCalendarFooter:t,...n}){const e=cr(n),s=h.useRef(null),r=vt(),a=t&&o.jsx(at,{padding:"px-14 pb-14",startAction:o.jsx(ne,{disabled:e.isPlaceholder,variant:"text",color:"primary",onClick:()=>{e.clear()},children:o.jsx(A,{message:"Clear"})}),children:o.jsx(ne,{variant:"text",color:"primary",onClick:()=>{e.setSelectedValue(r),e.setCalendarIsOpen(!1)},children:o.jsx(A,{message:"Today"})})}),l=o.jsx(Fe,{offset:8,placement:"bottom-start",isOpen:e.calendarIsOpen,onOpenChange:e.setCalendarIsOpen,type:"popover",triggerRef:s,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:o.jsxs(Ne,{size:"auto",children:[o.jsx(rt,{className:"flex items-start gap-40",padding:t?"px-24 pt-20 pb-10":null,children:o.jsx(pn,{state:e,visibleMonths:1})}),a]})}),i={onClick:c=>{c.stopPropagation(),c.preventDefault(),dr(c)?e.setCalendarIsOpen(!1):e.setCalendarIsOpen(!0)}};return o.jsxs(h.Fragment,{children:[o.jsx(mt,{ref:s,wrapperProps:i,endAdornment:o.jsx(ht,{className:D(n.disabled&&"text-disabled")}),...n,children:o.jsx(Pe,{segmentProps:i,state:e,value:e.selectedValue,onChange:e.setSelectedValue,isPlaceholder:e.isPlaceholder})}),l]})}function Tr(t){const{min:n,max:e}=t,{trans:s}=V(),{format:r}=rn(),{field:{onChange:a,onBlur:l,value:i=null,ref:c},fieldState:{invalid:d,error:u}}=we({name:t.name,rules:{validate:m=>{if(!m)return;const p=ve(m);if(n&&p.compare(n)<0)return s({message:"Enter a date after :date",values:{date:r(m)}});if(e&&p.compare(e)>0)return s({message:"Enter a date before :date",values:{date:r(m)}})}}}),g=i?ve(i):null,f={onChange:m=>{a(m&&m.toAbsoluteString())},onBlur:l,value:g,invalid:d,errorMessage:u==null?void 0:u.message,inputRef:c};return o.jsx(ur,{...de(f,t)})}function dr(t){return["hour","minute","dayPeriod"].includes(t.currentTarget.ariaLabel||"")}const Mr=X(o.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");function Or({className:t,position:n,children:e,size:s="md",mode:r,overlayPosition:a="fixed",display:l="flex",overflow:i="overflow-hidden",forceClosed:c=!1}){const{isMobileMode:d,leftSidenavStatus:u,setLeftSidenavStatus:g,rightSidenavStatus:f,setRightSidenavStatus:m}=h.useContext($e),p=n==="left"?u:f,b=d||r==="overlay",x={open:{display:l,width:null},compact:{display:l,width:null},closed:{width:0,transitionEnd:{display:"none"}}},v=fr(p==="compact"?"compact":s);return o.jsx(fe.div,{variants:x,initial:!1,animate:c?"closed":p,transition:{type:"tween",duration:.15},onClick:w=>{const y=w.target;d&&(y.closest("button")||y.closest("a"))&&(g("closed"),m("closed"))},className:D(t,n==="left"?"dashboard-grid-sidenav-left":"dashboard-grid-sidenav-right","will-change-[width]",i,v,b&&`${a} bottom-0 top-0 z-20 shadow-2xl`,b&&n==="left"&&"left-0",b&&n==="right"&&"right-0"),children:h.cloneElement(e,{className:D(e.props.className,"w-full h-full",p==="compact"&&"compact-scrollbar"),isCompactMode:p==="compact"})})}function fr(t){switch(t){case"compact":return"w-60";case"sm":return"w-224";case"md":return"w-240";case"lg":return"w-288";default:return t||""}}function Rr({children:t,isScrollable:n=!0,stableScrollbar:e=!0}){return h.cloneElement(t,{className:D(t.props.className,n&&"overflow-y-auto",n&&e&&"stable-scrollbar","dashboard-grid-content")})}const mr=X(o.jsx("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"}),"MenuOpenOutlined");function Ar({children:t,className:n,hideToggleButton:e,...s}){const{isMobileMode:r,leftSidenavStatus:a,setLeftSidenavStatus:l,name:i,leftSidenavCanBeCompact:c}=h.useContext($e),d=c&&!r,u=!e&&(r||c),g=()=>{l(a==="open"?"closed":"open")},f=()=>{const m=a==="compact"?"open":"compact";ft(`${i}.sidenav.compact`,m==="compact"),l(m)};return o.jsx(an,{className:D("dashboard-grid-navbar",n),border:"border-b",size:"sm",toggleButton:u?o.jsx(q,{size:"md",onClick:()=>{d?f():g()},children:o.jsx(mr,{})}):void 0,...s,children:t})}function hr(t=!1){h.useEffect(()=>(t?document.documentElement.classList.remove("no-page-overflow"):document.documentElement.classList.add("no-page-overflow"),()=>{document.documentElement.classList.remove("no-page-overflow")}),[t])}function zr({children:t,leftSidenavStatus:n,onLeftSidenavChange:e,rightSidenavStatus:s,initialRightSidenavStatus:r,onRightSidenavChange:a,name:l,leftSidenavCanBeCompact:i,height:c="h-screen",className:d,gridClassName:u="dashboard-grid",blockBodyOverflow:g=!0,...f}){hr(!g);const m=dt("(max-width: 1024px)"),b=h.useMemo(()=>l?Ue(`${l}.sidenav.compact`):!1,[l])?"compact":"open",[x,v]=Z(n,m?"closed":b,e),w=h.useMemo(()=>{if(m)return"closed";if(r!=null)return r;const E=Ue(`${l}.sidenav.right.position`,"open");return E??(r||"closed")},[m,l,r]),[y,j]=Z(s,w,a),S=h.useCallback(E=>{j(E),ft(`${l}.sidenav.right.position`,E)},[j,l]),O=m&&(x==="open"||y==="open");return o.jsx($e.Provider,{value:{leftSidenavStatus:x,setLeftSidenavStatus:v,rightSidenavStatus:y,setRightSidenavStatus:S,leftSidenavCanBeCompact:i,name:l,isMobileMode:m},children:o.jsxs("div",{...f,className:D("relative isolate",u,d,c),children:[t,o.jsx(Ce,{children:O&&o.jsx(on,{position:"fixed",onClick:()=>{v("closed"),S("closed")}},"dashboard-underlay")})]})})}export{as as $,Ie as A,Tn as B,Pn as C,br as D,ws as E,Hn as F,zr as G,Or as H,Mr as I,Rr as J,Ar as K,kr as L,Dr as M,or as N,qn as O,is as P,os as Q,ls as R,us as S,H as T,Qn as U,De as V,yn as W,cs as X,Nn as Y,Cr as Z,jt as _,xr as a,pt as a0,Os as a1,ar as a2,mr as a3,wr as b,ue as c,L as d,Vn as e,Un as f,$e as g,jr as h,Ir as i,ge as j,bs as k,xt as l,On as m,Q as n,qe as o,Me as p,Ns as q,Sr as r,ks as s,pe as t,yr as u,Er as v,Pr as w,Jn as x,Tr as y,Wn as z};
//# sourceMappingURL=dashboard-layout-9680aaa1.js.map
