{"version":3,"file":"dashboard-layout-9680aaa1.js","sources":["../../../node_modules/@react-aria/utils/dist/useGlobalListeners.mjs","../../../node_modules/@react-aria/interactions/dist/useInteractOutside.mjs","../../../common/foundation/resources/client/ui/library/icons/material/Add.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/chip-field/chip-list.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/chip-field/string-to-chip-value.ts","../../../common/foundation/resources/client/ui/library/avatar/avatar-initials-fallback.tsx","../../../common/foundation/resources/client/ui/library/avatar/avatar.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/chip-field/chip-field.tsx","../../../common/foundation/resources/client/ui/library/icons/material/Delete.tsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/drag-state.ts","../../../common/foundation/resources/client/ui/library/interactions/interactable-event.ts","../../../common/foundation/resources/client/ui/library/interactions/active-interaction.ts","../../../common/foundation/resources/client/ui/library/interactions/utils/dom-rect-to-obj.ts","../../../common/foundation/resources/client/ui/library/interactions/dnd/update-rects.ts","../../../common/foundation/resources/client/ui/library/interactions/dnd/use-draggable.ts","../../../common/foundation/resources/client/ui/library/interactions/dnd/read-files-from-data-transfer.ts","../../../common/foundation/resources/client/ui/library/utils/array/async-iterable-to-array.ts","../../../common/foundation/resources/client/ui/library/interactions/dnd/use-droppable.ts","../../../common/foundation/resources/client/http/backend-response/pagination-response.ts","../../../common/foundation/resources/client/datatable/filters/backend-filter.ts","../../../common/foundation/resources/client/ui/library/types/user.ts","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/date-range-picker.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/form-date-range-picker.tsx","../../../common/foundation/resources/client/datatable/filters/timestamp-filters.ts","../../../common/foundation/resources/client/admin/file-entry/file-entry-index-filters.ts","../../../common/foundation/resources/client/datatable/filters/backend-filters-url-key.ts","../../../common/foundation/resources/client/datatable/filters/utils/decode-backend-filters.ts","../../../common/foundation/resources/client/datatable/filters/utils/encode-backend-filters.ts","../../../common/foundation/resources/client/datatable/filters/backend-filter-url-params.ts","../../../common/foundation/resources/client/datatable/filters/filter-list/filter-list-trigger-button.tsx","../../../common/foundation/resources/client/datatable/filters/panels/select-filter-panel.tsx","../../../common/foundation/resources/client/datatable/filters/filter-list/filter-list-item-dialog-trigger.tsx","../../../common/foundation/resources/client/ui/normalized-model/use-normalized-models.ts","../../../common/foundation/resources/client/ui/normalized-model/use-normalized-model.ts","../../../common/foundation/resources/client/ui/normalized-model/normalized-model-field.tsx","../../../common/foundation/resources/client/datatable/filters/panels/normalized-model-filter-panel.tsx","../../../common/foundation/resources/client/datatable/filters/panels/date-range-filter-panel.tsx","../../../common/foundation/resources/client/datatable/filters/filter-operator-names.ts","../../../common/foundation/resources/client/datatable/filters/panels/input-filter-panel.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/chip-field/form-chip-field.tsx","../../../common/foundation/resources/client/datatable/filters/panels/chip-field-filter-panel.tsx","../../../common/foundation/resources/client/datatable/filters/filter-list/filter-list-control.tsx","../../../common/foundation/resources/client/datatable/filters/filter-list/filter-list.tsx","../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-layout-context.ts","../../../common/foundation/resources/client/ui/library/interactions/use-pointer-events.ts","../../../common/foundation/resources/client/ui/library/icons/material/Link.tsx","../../../common/foundation/resources/client/ui/library/icons/material/FileDownload.tsx","../../../common/foundation/resources/client/uploads/file-entry-urls.ts","../../../common/foundation/resources/client/ui/library/utils/files/download-file-from-url.ts","../../../common/foundation/resources/client/ui/library/icons/material/MoreVert.tsx","../../../common/foundation/resources/client/ui/library/utils/keybinds/is-ctrl-key-pressed.ts","../../../common/foundation/resources/client/ui/tables/navigate-grid.ts","../../../common/foundation/resources/client/ui/tables/table-context.ts","../../../common/foundation/resources/client/ui/tables/style/use-table-cell-style.ts","../../../common/foundation/resources/client/ui/tables/table-cell.tsx","../../../common/foundation/resources/client/ui/library/utils/keybinds/is-ctrl-or-shift-pressed.ts","../../../common/foundation/resources/client/ui/tables/style/use-table-row-style.ts","../../../common/foundation/resources/client/ui/tables/table-row.tsx","../../../common/foundation/resources/client/ui/tables/checkbox-column-config.tsx","../../../common/foundation/resources/client/ui/library/icons/material/ArrowDownward.tsx","../../../common/foundation/resources/client/ui/tables/header-cell.tsx","../../../common/foundation/resources/client/ui/tables/table-header-row.tsx","../../../common/foundation/resources/client/ui/tables/table.tsx","../../../common/foundation/resources/client/uploads/components/file-type-icon/file-thumbnail.tsx","../../../node_modules/@tanstack/react-virtual/build/lib/_virtual/_rollupPluginBabelHelpers.mjs","../../../node_modules/@tanstack/virtual-core/build/lib/_virtual/_rollupPluginBabelHelpers.mjs","../../../node_modules/@tanstack/virtual-core/build/lib/utils.mjs","../../../node_modules/@tanstack/virtual-core/build/lib/index.mjs","../../../node_modules/@tanstack/react-virtual/build/lib/index.mjs","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview-context.ts","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/default-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/image-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/text-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/video-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/audio-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/pdf-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/word-document-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/available-previews.ts","../../../common/foundation/resources/client/ui/library/icons/material/ChevronLeft.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview-container.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview-dialog.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-picker/use-date-picker-state.ts","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-picker/date-picker.tsx","../../../common/foundation/resources/client/ui/library/icons/material/Info.tsx","../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-sidenav.tsx","../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-content.tsx","../../../common/foundation/resources/client/ui/library/icons/material/MenuOpen.tsx","../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-navbar.tsx","../../../common/foundation/resources/client/ui/library/utils/hooks/use-block-body-overflow.ts","../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-layout.tsx"],"sourcesContent":["import {useRef as $lPAwt$useRef, useCallback as $lPAwt$useCallback, useEffect as $lPAwt$useEffect} from \"react\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ \nfunction $03deb23ff14920c4$export$4eaf04e54aa8eed6() {\n    let globalListeners = (0, $lPAwt$useRef)(new Map());\n    let addGlobalListener = (0, $lPAwt$useCallback)((eventTarget, type, listener, options)=>{\n        // Make sure we remove the listener after it is called with the `once` option.\n        let fn = (options === null || options === void 0 ? void 0 : options.once) ? (...args)=>{\n            globalListeners.current.delete(listener);\n            listener(...args);\n        } : listener;\n        globalListeners.current.set(listener, {\n            type: type,\n            eventTarget: eventTarget,\n            fn: fn,\n            options: options\n        });\n        eventTarget.addEventListener(type, listener, options);\n    }, []);\n    let removeGlobalListener = (0, $lPAwt$useCallback)((eventTarget, type, listener, options)=>{\n        var _globalListeners_current_get;\n        let fn = ((_globalListeners_current_get = globalListeners.current.get(listener)) === null || _globalListeners_current_get === void 0 ? void 0 : _globalListeners_current_get.fn) || listener;\n        eventTarget.removeEventListener(type, fn, options);\n        globalListeners.current.delete(listener);\n    }, []);\n    let removeAllGlobalListeners = (0, $lPAwt$useCallback)(()=>{\n        globalListeners.current.forEach((value, key)=>{\n            removeGlobalListener(value.eventTarget, value.type, key, value.options);\n        });\n    }, [\n        removeGlobalListener\n    ]);\n    // eslint-disable-next-line arrow-body-style\n    (0, $lPAwt$useEffect)(()=>{\n        return removeAllGlobalListeners;\n    }, [\n        removeAllGlobalListeners\n    ]);\n    return {\n        addGlobalListener: addGlobalListener,\n        removeGlobalListener: removeGlobalListener,\n        removeAllGlobalListeners: removeAllGlobalListeners\n    };\n}\n\n\nexport {$03deb23ff14920c4$export$4eaf04e54aa8eed6 as useGlobalListeners};\n//# sourceMappingURL=useGlobalListeners.module.js.map\n","import {useEffectEvent as $ispOf$useEffectEvent, getOwnerDocument as $ispOf$getOwnerDocument} from \"@react-aria/utils\";\nimport {useRef as $ispOf$useRef, useEffect as $ispOf$useEffect} from \"react\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ // Portions of the code in this file are based on code from react.\n// Original licensing for the following can be found in the\n// NOTICE file in the root directory of this source tree.\n// See https://github.com/facebook/react/tree/cc7c1aece46a6b69b41958d731e0fd27c94bfc6c/packages/react-interactions\n\n\nfunction $e0b6e0b68ec7f50f$export$872b660ac5a1ff98(props) {\n    let { ref: ref, onInteractOutside: onInteractOutside, isDisabled: isDisabled, onInteractOutsideStart: onInteractOutsideStart } = props;\n    let stateRef = (0, $ispOf$useRef)({\n        isPointerDown: false,\n        ignoreEmulatedMouseEvents: false\n    });\n    let onPointerDown = (0, $ispOf$useEffectEvent)((e)=>{\n        if (onInteractOutside && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) {\n            if (onInteractOutsideStart) onInteractOutsideStart(e);\n            stateRef.current.isPointerDown = true;\n        }\n    });\n    let triggerInteractOutside = (0, $ispOf$useEffectEvent)((e)=>{\n        if (onInteractOutside) onInteractOutside(e);\n    });\n    (0, $ispOf$useEffect)(()=>{\n        let state = stateRef.current;\n        if (isDisabled) return;\n        const element = ref.current;\n        const documentObject = (0, $ispOf$getOwnerDocument)(element);\n        // Use pointer events if available. Otherwise, fall back to mouse and touch events.\n        if (typeof PointerEvent !== 'undefined') {\n            let onPointerUp = (e)=>{\n                if (state.isPointerDown && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) triggerInteractOutside(e);\n                state.isPointerDown = false;\n            };\n            // changing these to capture phase fixed combobox\n            documentObject.addEventListener('pointerdown', onPointerDown, true);\n            documentObject.addEventListener('pointerup', onPointerUp, true);\n            return ()=>{\n                documentObject.removeEventListener('pointerdown', onPointerDown, true);\n                documentObject.removeEventListener('pointerup', onPointerUp, true);\n            };\n        } else {\n            let onMouseUp = (e)=>{\n                if (state.ignoreEmulatedMouseEvents) state.ignoreEmulatedMouseEvents = false;\n                else if (state.isPointerDown && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) triggerInteractOutside(e);\n                state.isPointerDown = false;\n            };\n            let onTouchEnd = (e)=>{\n                state.ignoreEmulatedMouseEvents = true;\n                if (state.isPointerDown && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) triggerInteractOutside(e);\n                state.isPointerDown = false;\n            };\n            documentObject.addEventListener('mousedown', onPointerDown, true);\n            documentObject.addEventListener('mouseup', onMouseUp, true);\n            documentObject.addEventListener('touchstart', onPointerDown, true);\n            documentObject.addEventListener('touchend', onTouchEnd, true);\n            return ()=>{\n                documentObject.removeEventListener('mousedown', onPointerDown, true);\n                documentObject.removeEventListener('mouseup', onMouseUp, true);\n                documentObject.removeEventListener('touchstart', onPointerDown, true);\n                documentObject.removeEventListener('touchend', onTouchEnd, true);\n            };\n        }\n    }, [\n        ref,\n        isDisabled,\n        onPointerDown,\n        triggerInteractOutside\n    ]);\n}\nfunction $e0b6e0b68ec7f50f$var$isValidEvent(event, ref) {\n    if (event.button > 0) return false;\n    if (event.target) {\n        // if the event target is no longer in the document, ignore\n        const ownerDocument = event.target.ownerDocument;\n        if (!ownerDocument || !ownerDocument.documentElement.contains(event.target)) return false;\n        // If the target is within a top layer element (e.g. toasts), ignore.\n        if (event.target.closest('[data-react-aria-top-layer]')) return false;\n    }\n    return ref.current && !ref.current.contains(event.target);\n}\n\n\nexport {$e0b6e0b68ec7f50f$export$872b660ac5a1ff98 as useInteractOutside};\n//# sourceMappingURL=useInteractOutside.module.js.map\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const AddIcon = createSvgIcon(\n  <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\n, 'AddOutlined');\n","import React, {\n  Children,\n  cloneElement,\n  isValidElement,\n  ReactElement,\n} from 'react';\nimport clsx from 'clsx';\nimport type {ChipProps} from './chip';\n\nexport interface ChipListProps {\n  className?: string;\n  children?: ReactElement | ReactElement[];\n  size?: ChipProps['size'];\n  radius?: ChipProps['radius'];\n  color?: ChipProps['color'];\n  selectable?: ChipProps['selectable'];\n  wrap?: boolean;\n}\nexport function ChipList({\n  className,\n  children,\n  size,\n  color,\n  radius,\n  selectable,\n  wrap = true,\n}: ChipListProps) {\n  return (\n    <div\n      className={clsx(\n        'flex items-center gap-8',\n        wrap && 'flex-wrap',\n        className,\n      )}\n    >\n      {Children.map(children, chip => {\n        if (isValidElement<ChipProps>(chip)) {\n          return cloneElement<ChipProps>(chip, {\n            size,\n            color,\n            selectable,\n            radius,\n          });\n        }\n      })}\n    </div>\n  );\n}\n","import {ChipValue} from './chip-field';\n\nexport function stringToChipValue(value: string | number): ChipValue {\n  // add both name and description so \"validateWith\" works properly in chip field, if it depends on description\n  return {id: value, name: `${value}`, description: `${value}`};\n}\n","import clsx from 'clsx';\nimport React, {forwardRef, useMemo} from 'react';\nimport {AvatarProps} from '@ui/avatar/avatar';\n\nconst colors = [\n  '#3b82f6',\n  '#6366f1',\n  '#0284c7',\n  '#9333ea',\n  '#059669',\n  '#ea580c',\n  '#dc2626',\n  '#06b6d4',\n  '#e11d48',\n];\n\ninterface Props {\n  size: AvatarProps['size'];\n  label: string;\n  color?: string;\n}\nexport const AvatarInitialsFallback = forwardRef<HTMLDivElement, Props>(\n  ({size, label, color}, ref) => {\n    const {initial, bgColor} = useMemo(() => {\n      const hash = (label || '')\n        .split('')\n        .reduce((accum, val) => val.charCodeAt(0) + accum, label?.length || 0);\n      return {\n        initial: label.slice(0, 1).toUpperCase(),\n        bgColor: colors[hash % colors.length],\n      };\n    }, [label]);\n    return (\n      <div\n        ref={ref}\n        style={!color ? {backgroundColor: bgColor} : undefined}\n        className={clsx(\n          'flex h-full w-full items-center justify-center font-semibold leading-normal text-on-primary',\n          color,\n          getTextFallbackFontSize(size),\n        )}\n      >\n        {initial}\n      </div>\n    );\n  },\n);\n\nfunction getTextFallbackFontSize(size: AvatarProps['size']) {\n  switch (size) {\n    case 'xs':\n      return 'text-xs';\n    case 'sm':\n      return 'text-xs';\n    case 'xl':\n      return 'text-xl';\n    case 'md':\n      return 'text-base';\n    default:\n      return '';\n  }\n}\n","import clsx from 'clsx';\nimport React, {\n  ComponentProps,\n  ComponentPropsWithoutRef,\n  forwardRef,\n} from 'react';\nimport {Link} from 'react-router-dom';\nimport {Tooltip} from '@ui/tooltip/tooltip';\nimport {AvatarPlaceholderIcon} from '@ui/avatar/avatar-placeholder-icon';\nimport {AvatarInitialsFallback} from '@ui/avatar/avatar-initials-fallback';\n\ntype Size = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | string;\n\nexport interface AvatarProps extends ComponentPropsWithoutRef<any> {\n  className?: string;\n  src?: string;\n  label?: string;\n  circle?: boolean;\n  size?: Size;\n  link?: string;\n  fallback?: 'initials' | 'generic';\n  fallbackColor?: string;\n  lazy?: boolean;\n}\nexport const Avatar = forwardRef<HTMLImageElement, AvatarProps>(\n  (\n    {\n      className,\n      circle,\n      size = 'md',\n      src,\n      link,\n      label,\n      fallback = 'initials',\n      fallbackColor,\n      lazy = true,\n      ...domProps\n    },\n    ref,\n  ) => {\n    let renderedAvatar = src ? (\n      <img\n        ref={ref}\n        src={src}\n        alt={label}\n        loading={lazy ? 'lazy' : undefined}\n        className=\"block h-full w-full object-cover\"\n      />\n    ) : fallback === 'initials' && label ? (\n      <AvatarInitialsFallback size={size} label={label} color={fallbackColor} />\n    ) : (\n      <div className=\"h-full w-full bg-alt dark:bg-chip\">\n        <AvatarPlaceholderIcon\n          viewBox=\"0 0 48 48\"\n          className=\"h-full w-full text-muted\"\n        />\n      </div>\n    );\n\n    if (label) {\n      renderedAvatar = <Tooltip label={label}>{renderedAvatar}</Tooltip>;\n    }\n\n    const wrapperProps: ComponentProps<any> = {\n      ...domProps,\n      className: clsx(\n        className,\n        'relative block overflow-hidden select-none flex-shrink-0',\n        getSizeClassName(size),\n        circle ? 'rounded-full' : 'rounded',\n      ),\n    };\n\n    return link ? (\n      <Link {...wrapperProps} to={link}>\n        {renderedAvatar}\n      </Link>\n    ) : (\n      <div {...wrapperProps}>{renderedAvatar}</div>\n    );\n  },\n);\n\nfunction getSizeClassName(size: Size) {\n  switch (size) {\n    case 'xs':\n      return 'w-18 h-18';\n    case 'sm':\n      return 'w-24 h-24';\n    case 'md':\n      return 'w-32 h-32';\n    case 'lg':\n      return 'w-40 h-40';\n    case 'xl':\n      return 'w-60 h-60';\n    // allow overriding with custom classNames\n    default:\n      return size;\n  }\n}\n","import React, {\n  HTMLAttributes,\n  Key,\n  ReactElement,\n  ReactNode,\n  Ref,\n  RefObject,\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport {useFocusManager} from '@react-aria/focus';\nimport clsx from 'clsx';\nimport {mergeProps, useLayoutEffect, useObjectRef} from '@react-aria/utils';\nimport {useControlledState} from '@react-stately/utils';\nimport {ChipList} from './chip-list';\nimport {Field, FieldProps} from '../field';\nimport {Input} from '../input';\nimport {Chip, ChipProps} from './chip';\nimport {NormalizedModel} from '@ui/types/normalized-model';\nimport {getInputFieldClassNames} from '../get-input-field-class-names';\nimport {ProgressCircle} from '@ui/progress/progress-circle';\nimport {useField} from '../use-field';\nimport {Listbox} from '../../listbox/listbox';\nimport {useListbox} from '../../listbox/use-listbox';\nimport {BaseFieldPropsWithDom} from '../base-field-props';\nimport {useListboxKeyboardNavigation} from '../../listbox/use-listbox-keyboard-navigation';\nimport {createEventHandler} from '@ui/utils/dom/create-event-handler';\nimport {ListBoxChildren, ListboxProps} from '../../listbox/types';\nimport {stringToChipValue} from './string-to-chip-value';\nimport {KeyboardArrowDownIcon} from '@ui/icons/material/KeyboardArrowDown';\nimport {Avatar} from '@ui/avatar/avatar';\nimport {Popover} from '@ui/overlays/popover';\n\nexport interface ChipValue extends Omit<NormalizedModel, 'model_type'> {\n  invalid?: boolean;\n  errorMessage?: string;\n}\n\nexport type ChipFieldProps<T> = Omit<\n  ListboxProps,\n  'selectionMode' | 'displayWith'\n> &\n  Omit<\n    BaseFieldPropsWithDom<HTMLInputElement>,\n    'value' | 'onChange' | 'defaultValue'\n  > & {\n    value?: (ChipValue | string)[];\n    defaultValue?: (ChipValue | string)[];\n    displayWith?: (value: ChipValue) => ReactNode;\n    validateWith?: (value: ChipValue) => ChipValue;\n    allowCustomValue?: boolean;\n    showDropdownArrow?: boolean;\n    onChange?: (value: ChipValue[]) => void;\n    suggestions?: T[];\n    children?: ListBoxChildren<T>['children'];\n    placeholder?: string;\n    chipSize?: ChipProps['size'];\n    openMenuOnFocus?: boolean;\n    valueKey?: 'id' | 'name';\n    onChipClick?: (value: ChipValue) => void;\n    alwaysShowAvatar?: boolean;\n    readOnly?: boolean;\n  };\n\nfunction ChipFieldInner<T>(\n  props: ChipFieldProps<T>,\n  ref: Ref<HTMLInputElement>,\n) {\n  const fieldRef = useRef<HTMLDivElement>(null);\n  const inputRef = useObjectRef(ref);\n  const {\n    displayWith = v => v.name,\n    validateWith,\n    children,\n    suggestions,\n    isLoading,\n    inputValue,\n    onInputValueChange,\n    onItemSelected,\n    placeholder,\n    onOpenChange,\n    chipSize = 'sm',\n    openMenuOnFocus = true,\n    showEmptyMessage,\n    value: propsValue,\n    defaultValue,\n    onChange: propsOnChange,\n    valueKey,\n    isAsync,\n    allowCustomValue = true,\n    showDropdownArrow,\n    onChipClick,\n    alwaysShowAvatar = false,\n    readOnly,\n    ...inputFieldProps\n  } = props;\n  const fieldClassNames = getInputFieldClassNames({\n    ...props,\n    flexibleHeight: true,\n  });\n\n  const [value, onChange] = useChipFieldValueState(props);\n\n  const [listboxIsOpen, setListboxIsOpen] = useState(false);\n\n  const loadingIndicator = (\n    <ProgressCircle isIndeterminate size=\"sm\" aria-label=\"loading...\" />\n  );\n\n  const dropdownArrow = showDropdownArrow ? <KeyboardArrowDownIcon /> : null;\n\n  const {fieldProps, inputProps} = useField({\n    ...inputFieldProps,\n    focusRef: inputRef,\n    endAdornment: isLoading && listboxIsOpen ? loadingIndicator : dropdownArrow,\n  });\n\n  return (\n    <Field fieldClassNames={fieldClassNames} {...fieldProps}>\n      <Input\n        ref={fieldRef}\n        className={clsx('flex flex-wrap items-center', fieldClassNames.input)}\n        onClick={() => {\n          // refocus input when clicking outside it, but while still inside chip field\n          inputRef.current?.focus();\n        }}\n      >\n        <ListWrapper\n          displayChipUsing={displayWith}\n          onChipClick={onChipClick}\n          items={value}\n          setItems={onChange}\n          chipSize={chipSize}\n          alwaysShowAvatar={alwaysShowAvatar}\n          readOnly={readOnly}\n        />\n        <ChipInput\n          size={props.size}\n          showEmptyMessage={showEmptyMessage}\n          inputProps={inputProps}\n          inputValue={inputValue}\n          onInputValueChange={onInputValueChange}\n          fieldRef={fieldRef}\n          inputRef={inputRef}\n          chips={value}\n          setChips={onChange}\n          validateWith={validateWith}\n          isLoading={isLoading}\n          suggestions={suggestions}\n          placeholder={placeholder}\n          openMenuOnFocus={openMenuOnFocus}\n          listboxIsOpen={listboxIsOpen}\n          setListboxIsOpen={setListboxIsOpen}\n          allowCustomValue={allowCustomValue}\n          readOnly={readOnly}\n        >\n          {children}\n        </ChipInput>\n      </Input>\n    </Field>\n  );\n}\n\ninterface ListWrapperProps {\n  items: ChipValue[];\n  setItems: (items: ChipValue[]) => void;\n  displayChipUsing: (value: ChipValue) => ReactNode;\n  chipSize?: ChipProps['size'];\n  onChipClick?: (value: ChipValue) => void;\n  alwaysShowAvatar?: boolean;\n  readOnly?: boolean;\n}\nfunction ListWrapper({\n  items,\n  setItems,\n  displayChipUsing,\n  chipSize,\n  onChipClick,\n  alwaysShowAvatar,\n  readOnly,\n}: ListWrapperProps) {\n  const manager = useFocusManager();\n  const removeItem = useCallback(\n    (key: Key) => {\n      const i = items.findIndex(cr => cr.id === key);\n      const newItems = [...items];\n      if (i > -1) {\n        newItems.splice(i, 1);\n        setItems(newItems);\n      }\n      return newItems;\n    },\n    [items, setItems],\n  );\n\n  return (\n    <ChipList\n      className={clsx(\n        'max-w-full flex-shrink-0 flex-wrap',\n        chipSize === 'xs' ? 'my-6' : 'my-8',\n      )}\n      size={chipSize}\n      selectable\n    >\n      {items.map(item => (\n        <Chip\n          key={item.id}\n          errorMessage={item.errorMessage}\n          adornment={\n            item.image || alwaysShowAvatar ? (\n              <Avatar\n                circle\n                src={item.image}\n                fallback=\"initials\"\n                label={item.name}\n              />\n            ) : null\n          }\n          onClick={() => onChipClick?.(item)}\n          onRemove={\n            readOnly\n              ? undefined\n              : () => {\n                  const newItems = removeItem(item.id);\n                  if (newItems.length) {\n                    // focus previous chip\n                    manager?.focusPrevious({tabbable: true});\n                  } else {\n                    // focus input\n                    manager?.focusLast();\n                  }\n                }\n          }\n        >\n          {displayChipUsing(item)}\n        </Chip>\n      ))}\n    </ChipList>\n  );\n}\n\ninterface ChipInputProps<T> {\n  showEmptyMessage?: boolean;\n  inputProps: ReturnType<typeof useField>['inputProps'];\n  inputValue?: string;\n  onInputValueChange?: (value: string) => void;\n  fieldRef: RefObject<HTMLDivElement>;\n  inputRef: RefObject<HTMLInputElement>;\n  chips: ChipValue[];\n  setChips: (items: ChipValue[]) => void;\n  validateWith?: (value: ChipValue) => ChipValue;\n  isLoading?: boolean;\n  suggestions?: T[];\n  placeholder?: string;\n  openMenuOnFocus?: boolean;\n  listboxIsOpen: boolean;\n  setListboxIsOpen: (value: boolean) => void;\n  allowCustomValue: boolean;\n  children: ListBoxChildren<T>['children'];\n  size: FieldProps['size'];\n  readOnly?: boolean;\n}\nfunction ChipInput<T>(props: ChipInputProps<T>) {\n  const {\n    inputRef,\n    fieldRef,\n    validateWith,\n    setChips,\n    chips,\n    suggestions,\n    inputProps,\n    placeholder,\n    openMenuOnFocus,\n    listboxIsOpen,\n    setListboxIsOpen,\n    allowCustomValue,\n    isLoading,\n    size,\n    readOnly,\n  } = props;\n  const manager = useFocusManager();\n\n  const addItems = useCallback(\n    (items?: ChipValue[]) => {\n      items = (items || []).filter(item => {\n        const invalid = !item || !item.id || !item.name;\n        const alreadyExists = chips.findIndex(cr => cr.id === item?.id) > -1;\n        return !alreadyExists && !invalid;\n      });\n      if (!items.length) return;\n\n      if (validateWith) {\n        items = items.map(item => validateWith(item));\n      }\n      setChips([...chips, ...items]);\n    },\n    [chips, setChips, validateWith],\n  );\n\n  const listbox = useListbox<T>({\n    ...props,\n    clearInputOnItemSelection: true,\n    isOpen: listboxIsOpen,\n    onOpenChange: setListboxIsOpen,\n    items: suggestions,\n    selectionMode: 'none',\n    role: 'listbox',\n    virtualFocus: true,\n    onItemSelected: value => {\n      handleItemSelection(value as string);\n    },\n  });\n\n  const {\n    state: {\n      activeIndex,\n      setActiveIndex,\n      isOpen,\n      setIsOpen,\n      inputValue,\n      setInputValue,\n    },\n    refs,\n    listboxId,\n    collection,\n    onInputChange,\n  } = listbox;\n\n  const handleItemSelection = (textValue: string) => {\n    const option =\n      collection.size && activeIndex != null\n        ? [...collection.values()][activeIndex]\n        : null;\n    if (option?.item) {\n      addItems([option.item]);\n    } else if (allowCustomValue) {\n      addItems([stringToChipValue(option ? option.value : textValue)]);\n    }\n\n    setInputValue('');\n    setActiveIndex(null);\n    setIsOpen(false);\n  };\n\n  // position dropdown relative to whole chip field, not the input\n  useLayoutEffect(() => {\n    if (fieldRef.current && refs.reference.current !== fieldRef.current) {\n      listbox.reference(fieldRef.current);\n    }\n  }, [fieldRef, listbox, refs]);\n\n  const {handleTriggerKeyDown, handleListboxKeyboardNavigation} =\n    useListboxKeyboardNavigation(listbox);\n\n  const handleFocusAndClick = createEventHandler(() => {\n    if (openMenuOnFocus && !isOpen) {\n      setIsOpen(true);\n    }\n  });\n\n  return (\n    <Listbox\n      listbox={listbox}\n      mobileOverlay={Popover}\n      isLoading={isLoading}\n      onPointerDown={e => {\n        // prevent focus from leaving input when scrolling listbox via mouse\n        e.preventDefault();\n      }}\n    >\n      <input\n        readOnly={readOnly}\n        type=\"text\"\n        className={clsx(\n          'mx-8 my-4 min-w-30 flex-[1_1_60px] bg-transparent text-sm outline-none',\n          size === 'xs' ? 'h-20' : 'h-30',\n        )}\n        placeholder={placeholder}\n        {...mergeProps(inputProps, {\n          ref: inputRef,\n          value: inputValue,\n          onChange: onInputChange,\n          onPaste: e => {\n            const paste = e.clipboardData.getData('text');\n            const emails = paste.match(\n              /([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\\.[a-zA-Z0-9._-]+)/gi,\n            );\n            if (emails) {\n              e.preventDefault();\n              const selection = window.getSelection();\n              if (selection?.rangeCount) {\n                selection.deleteFromDocument();\n                addItems(emails.map(email => stringToChipValue(email)));\n              }\n            }\n          },\n          'aria-autocomplete': 'list',\n          'aria-controls': isOpen ? listboxId : undefined,\n          autoComplete: 'off',\n          autoCorrect: 'off',\n          spellCheck: 'false',\n          onKeyDown: e => {\n            if (readOnly) return;\n\n            const input = e.target as HTMLInputElement;\n\n            if (e.key === 'Enter') {\n              // prevent form submitting\n              e.preventDefault();\n              // add chip from selected listbox option or current input text value\n              handleItemSelection(input.value);\n              return;\n            }\n\n            // on escape, clear input and close dropdown\n            if (e.key === 'Escape' && isOpen) {\n              setIsOpen(false);\n              setInputValue('');\n            }\n\n            // move focus to input when focus is on first item and prevent arrow up from cycling listbox\n            if (\n              e.key === 'ArrowUp' &&\n              isOpen &&\n              (activeIndex === 0 || activeIndex == null)\n            ) {\n              setActiveIndex(null);\n              return;\n            }\n\n            // block left and right arrows from navigating in input, if focus is on listbox\n            if (\n              activeIndex != null &&\n              (e.key === 'ArrowLeft' || e.key === 'ArrowRight')\n            ) {\n              e.preventDefault();\n              return;\n            }\n\n            // move focus on the last chip, if focus is at the  start of input\n            if (\n              (e.key === 'ArrowLeft' ||\n                e.key === 'Backspace' ||\n                e.key === 'Delete') &&\n              input.selectionStart === 0 &&\n              activeIndex == null &&\n              chips.length\n            ) {\n              manager?.focusPrevious({tabbable: true});\n              return;\n            }\n\n            // fallthrough to listbox navigation handlers for arrow keys\n            const handled = handleTriggerKeyDown(e);\n            if (!handled) {\n              handleListboxKeyboardNavigation(e);\n            }\n          },\n          onFocus: readOnly ? undefined : handleFocusAndClick,\n          onClick: readOnly ? undefined : handleFocusAndClick,\n        } as HTMLAttributes<HTMLInputElement>)}\n      />\n    </Listbox>\n  );\n}\n\nfunction useChipFieldValueState({\n  onChange,\n  value,\n  defaultValue,\n  valueKey,\n}: ChipFieldProps<any>) {\n  // convert value from string[] to ChipValue[], if needed\n  const propsValue = useMemo(() => {\n    return mixedValueToChipValue(value);\n  }, [value]);\n\n  // convert defaultValue from string[] to ChipValue[], if needed\n  const propsDefaultValue = useMemo(() => {\n    return mixedValueToChipValue(defaultValue);\n  }, [defaultValue]);\n\n  // emit string[] or ChipValue[] on change, based on \"valueKey\" prop\n  const handleChange = useCallback(\n    (value: ChipValue[]) => {\n      const newValue = valueKey ? value.map(v => v[valueKey]) : value;\n      onChange?.(newValue as any);\n    },\n    [onChange, valueKey],\n  );\n\n  return useControlledState<ChipValue[]>(\n    !propsValue ? undefined : propsValue,\n    propsDefaultValue || [],\n    handleChange,\n  );\n}\n\nfunction mixedValueToChipValue(\n  value?: (string | number | ChipValue)[] | null,\n): ChipValue[] | undefined {\n  if (value == null) {\n    return undefined;\n  }\n\n  return value.map(v => {\n    return typeof v !== 'object' ? stringToChipValue(v as string) : v;\n  });\n}\n\nexport const ChipField = React.forwardRef(ChipFieldInner) as <T>(\n  props: ChipFieldProps<T> & {ref?: Ref<HTMLInputElement>},\n) => ReactElement;\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DeleteIcon = createSvgIcon(\n  <path d=\"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z\" />\n, 'DeleteOutlined');\n","import {DragMonitor} from './use-drag-monitor';\nimport {ConnectedDraggable, DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport type DragSessionStatus =\n  | 'dropSuccess'\n  | 'dropFail'\n  | 'dragging'\n  | 'inactive';\n\nexport interface DragSession {\n  dragTargetId?: DraggableId;\n  status: DragSessionStatus;\n}\n\nexport const draggables = new Map<DraggableId, ConnectedDraggable>();\nexport const droppables = new Map<DraggableId, ConnectedDroppable>();\nexport const dragMonitors = new Map<DraggableId, DragMonitor>();\nexport const dragSession: DragSession = {\n  status: 'inactive',\n};\n","import React from 'react';\n\ntype NativeEvent =\n  | React.PointerEvent\n  | PointerEvent\n  | React.DragEvent<HTMLElement>\n  | DragEvent;\n\nexport interface InteractableEvent {\n  x: number;\n  y: number;\n  deltaX: number;\n  deltaY: number;\n  rect: InteractableRect;\n  nativeEvent: NativeEvent;\n}\n\nexport interface InteractableRect {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n  angle?: number;\n}\n\nexport function interactableEvent({\n  e,\n  rect,\n  deltaX,\n  deltaY,\n}: {\n  e: NativeEvent;\n  rect: InteractableRect;\n  deltaX?: number;\n  deltaY?: number;\n}): InteractableEvent {\n  return {\n    rect,\n    x: e.clientX,\n    y: e.clientY,\n    deltaX: deltaX ?? 0,\n    deltaY: deltaY ?? 0,\n    nativeEvent: e,\n  };\n}\n","type InteractionName = null | 'resize' | 'rotate' | 'drag' | 'move';\n\nexport let activeInteraction: InteractionName = null;\n\nexport function setActiveInteraction(name: InteractionName) {\n  activeInteraction = name;\n}\n","import {InteractableRect} from '../interactable-event';\n\nexport function domRectToObj(rect: DOMRect): InteractableRect {\n  return {\n    left: rect.left,\n    top: rect.top,\n    width: rect.width,\n    height: rect.height,\n  };\n}\n","// use intersection observer instead of getBoundingClientRect for better performance as this will be called in onPointerMove event\nimport {InteractableRect} from '../interactable-event';\nimport {ConnectedMouseSelectable} from './mouse-selection/use-mouse-selectable';\nimport {DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport function updateRects(\n  targets: Map<DraggableId, ConnectedDroppable | ConnectedMouseSelectable>\n) {\n  const observer = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n      const {width, height, left, top} = entry.boundingClientRect;\n      const [id, target] =\n        [...targets].find(\n          ([, target]) => target.ref.current === entry.target\n        ) || [];\n      if (id == null || target == null) return;\n\n      const rect: InteractableRect = {\n        width,\n        height,\n        left,\n        top,\n      };\n      targets.set(id, {...target, rect});\n    });\n    observer.disconnect();\n  });\n\n  [...targets.values()].forEach(target => {\n    if (target.ref.current) {\n      observer.observe(target.ref.current);\n    }\n  });\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragMonitors, dragSession, droppables} from './drag-state';\nimport {\n  InteractableEvent,\n  interactableEvent,\n  InteractableRect,\n} from '../interactable-event';\nimport {activeInteraction, setActiveInteraction} from '../active-interaction';\nimport {domRectToObj} from '../utils/dom-rect-to-obj';\nimport {updateRects} from './update-rects';\nimport {useGlobalListeners} from '@react-aria/utils';\nimport {DragMonitor} from './use-drag-monitor';\nimport {NativeFileDraggable} from './use-droppable';\n\ninterface DragState {\n  currentRect?: InteractableRect;\n  lastPosition: {x: number; y: number};\n  clickedEl?: HTMLElement;\n}\n\nexport type DragPreviewRenderer = (\n  draggable: ConnectedDraggable,\n  callback: (node: HTMLElement) => void\n) => void;\n\nexport type DraggableId = string | number | object;\n\nexport interface ConnectedDraggable<T = any> {\n  type: string;\n  id: DraggableId;\n  getData: () => T;\n  ref: RefObject<HTMLElement>;\n}\n\n// Either draggable from within the app, or file dragged in from the desktop\nexport type MixedDraggable = ConnectedDraggable | NativeFileDraggable;\n\ninterface UseDragProps extends ConnectedDraggable {\n  disabled?: boolean;\n  onDragStart?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragMove?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragEnd?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  preview?: RefObject<DragPreviewRenderer>;\n  hidePreview?: boolean;\n}\nexport function useDraggable({\n  id,\n  disabled,\n  ref,\n  preview,\n  hidePreview,\n  ...options\n}: UseDragProps) {\n  const dragHandleRef = useRef<HTMLButtonElement>(null);\n  const {addGlobalListener, removeAllGlobalListeners} = useGlobalListeners();\n\n  const state = useRef<DragState>({\n    lastPosition: {x: 0, y: 0},\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    if (!disabled) {\n      draggables.set(id, {\n        ...draggables.get(id),\n        id,\n        ref,\n        type: optionsRef.current.type,\n        getData: optionsRef.current.getData,\n      });\n    } else {\n      draggables.delete(id);\n    }\n    return () => {\n      draggables.delete(id);\n    };\n  }, [id, disabled, optionsRef, ref]);\n\n  // notify monitors connected to the same drag type as this draggable\n  const notifyMonitors = (callback: (m: DragMonitor) => void) => {\n    dragMonitors.forEach(monitor => {\n      if (monitor.type === draggables.get(id)?.type) {\n        callback(monitor);\n      }\n    });\n  };\n\n  const onDragStart = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = draggables.get(id);\n    const el = ref.current;\n    const clickedOnHandle =\n      !dragHandleRef.current ||\n      !state.clickedEl ||\n      dragHandleRef.current.contains(state.clickedEl);\n\n    // if another interaction is in progress (rotate, resize, drag etc.), bail\n    if (activeInteraction || !el || !draggable || !clickedOnHandle) {\n      e.preventDefault();\n      e.stopPropagation();\n      return;\n    }\n\n    updateRects(droppables);\n    setActiveInteraction('drag');\n\n    // hide default browser ghost image\n    if (hidePreview) {\n      hideNativeGhostImage(e);\n    }\n    // this will hide default browser cursor icon, if \"dropEffect\" is not set in dragOver/dragEnter\n    e.dataTransfer.effectAllowed = 'move';\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = domRectToObj(el.getBoundingClientRect());\n    const ie = interactableEvent({rect: state.currentRect!, e});\n\n    // If there is a preview option, use it to render a custom preview image that will\n    // appear under the pointer while dragging. If not, the element itself is dragged by the browser.\n    if (preview?.current) {\n      preview.current(draggable, node => {\n        e.dataTransfer.setDragImage(node, 0, 0);\n      });\n    }\n\n    dragSession.status = 'dragging';\n    dragSession.dragTargetId = id;\n    if (ref.current) {\n      ref.current.dataset.dragging = 'true';\n    }\n\n    optionsRef.current.onDragStart?.(ie, draggable);\n\n    // wait until next frame so changes made in \"onDragStart\" are reflected in drag monitors\n    requestAnimationFrame(() => {\n      notifyMonitors(m => m.onDragStart?.(ie, draggable));\n    });\n\n    // firefox does not provide clientX/clientY in \"onDrag\", need to listen for dragOver on window instead\n    addGlobalListener(window, 'dragover', onDragOver, true);\n  };\n\n  const onDragOver = (e: React.DragEvent<HTMLElement> | DragEvent) => {\n    e.preventDefault();\n\n    if (!state.currentRect) return;\n\n    const deltaX = e.clientX - state.lastPosition.x;\n    const deltaY = e.clientY - state.lastPosition.y;\n\n    const newRect = {\n      ...state.currentRect,\n      left: state.currentRect.left + deltaX,\n      top: state.currentRect.top + deltaY,\n    };\n\n    const ie = interactableEvent({rect: newRect, e, deltaX, deltaY});\n\n    const target = draggables.get(id);\n    if (target) {\n      optionsRef.current.onDragMove?.(ie, target);\n      notifyMonitors(m => m.onDragMove?.(ie, target));\n    }\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = newRect;\n  };\n\n  const onDragEnd = (e: React.DragEvent<HTMLElement>) => {\n    removeAllGlobalListeners();\n    if (!state.currentRect) return;\n\n    setActiveInteraction(null);\n    if (emptyImage) {\n      emptyImage.remove();\n    }\n\n    const ie = interactableEvent({rect: state.currentRect, e});\n\n    const draggable = draggables.get(id);\n    if (draggable) {\n      optionsRef.current.onDragEnd?.(ie, draggable);\n      notifyMonitors(m => m.onDragEnd?.(ie, draggable, dragSession!.status));\n    }\n\n    // wait a frame before clearing so monitors have a chance to use drag session status\n    requestAnimationFrame(() => {\n      dragSession.dragTargetId = undefined;\n      dragSession.status = 'inactive';\n      if (ref.current) {\n        delete ref.current.dataset.dragging;\n      }\n    });\n  };\n\n  const draggableProps = {\n    draggable: !disabled,\n    onDragStart,\n    onDragEnd,\n    onPointerDown: (e: React.PointerEvent) => {\n      state.clickedEl = e.target as HTMLElement;\n    },\n  };\n\n  return {draggableProps, dragHandleRef};\n}\n\nlet emptyImage: HTMLImageElement | undefined;\nfunction hideNativeGhostImage(e: React.DragEvent) {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    // image needs to be in the dom to prevent \"globe\" icon in chrome\n    document.body.append(emptyImage);\n    emptyImage.src =\n      'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  e.dataTransfer.setDragImage(emptyImage, 0, 0);\n}\n","import {UploadedFile} from '@ui/utils/files/uploaded-file';\n\nexport async function* readFilesFromDataTransfer(dataTransfer: DataTransfer) {\n  const entries: FileSystemEntry[] = [];\n\n  // Pull out all entries before reading them, otherwise\n  // some entries will be lost due to recursion with promises\n  for (const item of dataTransfer.items) {\n    if (item.kind === 'file') {\n      const entry = item.webkitGetAsEntry();\n      if (entry) {\n        entries.push(entry);\n      }\n    }\n  }\n\n  for (const entry of entries) {\n    if (entry.isFile) {\n      if (entry.name === '.DS_Store') continue;\n      const file = await getEntryFile(entry as FileSystemFileEntry);\n      yield new UploadedFile(file, entry.fullPath);\n    } else if (entry.isDirectory) {\n      yield* getEntriesFromDirectory(entry as FileSystemDirectoryEntry);\n    }\n  }\n}\n\nasync function* getEntriesFromDirectory(\n  item: FileSystemDirectoryEntry,\n): AsyncIterable<any> {\n  const reader = item.createReader();\n\n  // We must call readEntries repeatedly because there may be a limit to the\n  // number of entries that are returned at once.\n  let entries: FileSystemEntry[];\n  do {\n    entries = await new Promise((resolve, reject) => {\n      reader.readEntries(resolve, reject);\n    });\n\n    for (const entry of entries) {\n      if (entry.isFile) {\n        if (entry.name === '.DS_Store') continue;\n        const file = await getEntryFile(entry as FileSystemFileEntry);\n        yield new UploadedFile(file, entry.fullPath);\n      } else if (entry.isDirectory) {\n        yield* getEntriesFromDirectory(entry as FileSystemDirectoryEntry);\n      }\n    }\n  } while (entries.length > 0);\n}\n\nfunction getEntryFile(entry: FileSystemFileEntry): Promise<File> {\n  return new Promise((resolve, reject) => entry.file(resolve, reject));\n}\n","export async function asyncIterableToArray<T>(\n  iterator: AsyncIterable<T>\n): Promise<T[]> {\n  const items: T[] = [];\n  for await (const item of iterator) {\n    items.push(item);\n  }\n  return items;\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragSession, droppables} from './drag-state';\nimport {readFilesFromDataTransfer} from './read-files-from-data-transfer';\nimport {asyncIterableToArray} from '@ui/utils/array/async-iterable-to-array';\nimport {InteractableRect} from '../interactable-event';\nimport {DraggableId, MixedDraggable} from './use-draggable';\nimport {UploadedFile} from '@ui/utils/files/uploaded-file';\n\nexport interface ConnectedDroppable {\n  id: DraggableId;\n  rect?: InteractableRect;\n  disabled?: boolean;\n  ref: RefObject<HTMLElement>;\n}\n\n// File dragged in from desktop\nexport interface NativeFileDraggable {\n  type: 'nativeFile';\n  el: null;\n  ref: null;\n  getData: () => Promise<UploadedFile[]>;\n}\n\ninterface UseDroppableProps<T extends HTMLElement> {\n  id: DraggableId;\n  disabled?: boolean;\n  types: ('nativeFile' | string)[];\n  ref: RefObject<T>;\n  // this will fire dragEnter/dragLeave/dragOver events when same element is both draggable and drop target and dragging target over itself. Used for showing line previews before/after element during sort.\n  allowDragEventsFromItself?: boolean;\n  onDragEnter?: (target: MixedDraggable) => void;\n  onDragLeave?: (target: MixedDraggable) => void;\n  onDragOver?: (\n    target: MixedDraggable,\n    e: React.DragEvent<HTMLElement>,\n  ) => void;\n  // Handler that is called after draggable is held over droppable for a period of time.\n  // This typically opens the item so that the user can drop within it.\n  onDropActivate?: (e: MixedDraggable) => void;\n  onDrop?: (target: MixedDraggable) => void | Promise<void> | false;\n  acceptsDrop?: (target: MixedDraggable) => boolean;\n}\n\ninterface DroppableState {\n  dragOverElements: Set<Element>;\n  dropActivateTimer: ReturnType<typeof setTimeout> | undefined;\n}\n\nconst DROP_ACTIVATE_TIMEOUT = 400;\n\nexport function useDroppable<T extends HTMLElement>({\n  id,\n  disabled,\n  ref,\n  ...options\n}: UseDroppableProps<T>) {\n  const state = useRef<DroppableState>({\n    dragOverElements: new Set<Element>(),\n    dropActivateTimer: undefined,\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    droppables.set(id, {\n      ...droppables.get(id),\n      disabled,\n      id,\n      ref,\n    });\n    return () => {\n      droppables.delete(id);\n    };\n  }, [id, optionsRef, disabled, ref]);\n\n  // check if drop target accepts drag target\n  const canDrop = (draggable: MixedDraggable): boolean => {\n    const options = optionsRef.current;\n\n    const allowEventsOnSelf =\n      options.allowDragEventsFromItself ||\n      ref.current !== draggable.ref?.current;\n\n    return !!(\n      draggable?.type &&\n      allowEventsOnSelf &&\n      options.types.includes(draggable.type) &&\n      (!options.acceptsDrop || options.acceptsDrop(draggable))\n    );\n  };\n\n  const fireDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n    }\n  };\n\n  const onDragEnter = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    state.dragOverElements.add(e.target as Element);\n    if (state.dragOverElements.size > 1) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      optionsRef.current.onDragEnter?.(draggable);\n\n      clearTimeout(state.dropActivateTimer);\n      if (typeof optionsRef.current.onDropActivate === 'function') {\n        state.dropActivateTimer = setTimeout(() => {\n          if (draggable) {\n            optionsRef.current.onDropActivate?.(draggable);\n          }\n        }, DROP_ACTIVATE_TIMEOUT);\n      }\n    }\n  };\n\n  const onDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    // Track all the targets of dragenter events in a set, and remove them\n    // in dragleave. When the set becomes empty, we've left the drop target completely.\n    // We must also remove any elements that are no longer in the DOM, because dragleave\n    // events will never be fired for these. This can happen, for example, with drop\n    // indicators between items, which disappear when the drop target changes.\n    state.dragOverElements.delete(e.target as Element);\n    for (const element of state.dragOverElements) {\n      if (!e.currentTarget.contains(element)) {\n        state.dragOverElements.delete(element);\n      }\n    }\n\n    if (state.dragOverElements.size > 0) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      fireDragLeave(e);\n      clearTimeout(state.dropActivateTimer);\n    }\n  };\n\n  const onDrop = async (e: React.DragEvent<HTMLElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    state.dragOverElements.clear();\n\n    fireDragLeave(e);\n    clearTimeout(state.dropActivateTimer);\n\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n\n      // drop target does not accept this type of droppable\n      if (!canDrop(draggable)) {\n        if (dragSession.status !== 'inactive') {\n          dragSession.status = 'dropFail';\n        }\n        // drop target accepts this type, but it might still reject the drop in callback\n      } else {\n        // allow callback to mark drop as failed\n        const dropResult = optionsRef.current.onDrop?.(draggable);\n\n        // drag session will only be active for draggables within the app, never for files dragged in from desktop\n        if (dragSession.status !== 'inactive') {\n          dragSession.status =\n            dropResult === false ? 'dropFail' : 'dropSuccess';\n        }\n      }\n    }\n  };\n\n  const droppableProps = {\n    onDragOver: (e: React.DragEvent<HTMLElement>) => {\n      e.preventDefault();\n      e.stopPropagation();\n      const draggable = getDraggable(e);\n      if (draggable && canDrop(draggable)) {\n        optionsRef.current.onDragOver?.(draggable, e);\n      }\n    },\n    onDragEnter,\n    onDragLeave,\n    onDrop,\n  };\n\n  return {\n    droppableProps: disabled ? {} : droppableProps,\n  };\n}\n\nfunction getDraggable(\n  e: React.DragEvent<HTMLElement>,\n): MixedDraggable | undefined {\n  if (dragSession.dragTargetId != null) {\n    return draggables.get(dragSession.dragTargetId);\n  } else if (e.dataTransfer.types.includes('Files')) {\n    return {\n      type: 'nativeFile',\n      el: null,\n      ref: null,\n      getData: () => {\n        return asyncIterableToArray(readFilesFromDataTransfer(e.dataTransfer));\n      },\n    };\n  }\n}\n","import {BackendResponse} from './backend-response';\n\nexport interface LengthAwarePaginationResponse<T = unknown> {\n  data: T[];\n  from: number;\n  to: number;\n  total: number;\n  per_page: number;\n  current_page: number;\n  last_page: number;\n  next_page?: number;\n  prev_page?: number;\n}\n\nexport interface SimplePaginationResponse<T = unknown> {\n  data: T[];\n  from: number;\n  to: number;\n  per_page: number;\n  current_page: number;\n  next_page?: number | null;\n  prev_page?: number | null;\n}\n\ninterface CursorPaginationResponse<T> {\n  data: T[];\n  next_cursor: string | null;\n  per_page: number;\n  prev_cursor: string | null;\n}\n\nexport type PaginationResponse<T> =\n  | LengthAwarePaginationResponse<T>\n  | SimplePaginationResponse<T>\n  | CursorPaginationResponse<T>;\n\nexport const EMPTY_PAGINATION_RESPONSE = {\n  pagination: {data: [], from: 0, to: 0, per_page: 15, current_page: 1},\n};\n\nexport interface PaginatedBackendResponse<T> extends BackendResponse {\n  pagination: PaginationResponse<T>;\n}\n\nexport function hasPreviousPage(\n  pagination: PaginationResponse<unknown>,\n): boolean {\n  if ('prev_cursor' in pagination) {\n    return pagination.prev_cursor != null;\n  }\n\n  if ('prev_page' in pagination) {\n    return pagination.prev_page != null;\n  }\n\n  return pagination.current_page > 1;\n}\n\nexport function hasNextPage(pagination: PaginationResponse<unknown>): boolean {\n  if ('next_cursor' in pagination) {\n    return pagination.next_cursor != null;\n  }\n\n  if ('last_page' in pagination) {\n    return pagination.current_page < pagination.last_page;\n  }\n\n  if ('next_page' in pagination) {\n    return pagination.next_page != null;\n  }\n\n  return (\n    pagination.data.length > 0 && pagination.data.length >= pagination.per_page\n  );\n}\n","import {ComponentType} from 'react';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\nimport {NormalizedModel} from '@ui/types/normalized-model';\nimport {ChipValue} from '@ui/forms/input-field/chip-field/chip-field';\nimport {AbsoluteDateRange} from '@ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {DateValue} from '@internationalized/date';\nimport {FilterListControlProps} from '@common/datatable/filters/filter-list/filter-list-control';\n\nexport interface FilterSelectControl {\n  type: FilterControlType.Select;\n  options: {\n    label: MessageDescriptor | string;\n    key: string | number;\n    value: any;\n  }[];\n  defaultValue?: string | number | boolean;\n  placeholder?: MessageDescriptor;\n  searchPlaceholder?: MessageDescriptor;\n  showSearchField?: boolean;\n}\n\nexport interface FilterNumberInputControl {\n  type: FilterControlType.Input;\n  placeholder?: MessageDescriptor;\n  inputType: 'number';\n  minValue?: number;\n  maxValue?: number;\n  defaultValue: number;\n}\n\nexport interface FilterTextInputControl {\n  type: FilterControlType.Input;\n  placeholder?: MessageDescriptor;\n  inputType: 'string';\n  minLength?: number;\n  maxLength?: number;\n  defaultValue: string;\n}\n\nexport interface FilterSelectModelControl {\n  type: FilterControlType.SelectModel;\n  model: string;\n  endpoint?: string;\n  defaultValue?: NormalizedModel;\n}\n\nexport interface FilterChipFieldControl {\n  type: FilterControlType.ChipField;\n  options: FilterSelectControl['options'];\n  placeholder?: MessageDescriptor;\n  defaultValue: ChipValue[];\n}\n\nexport interface FilterBooleanToggleControl {\n  type: FilterControlType.BooleanToggle;\n  // value can be something other than boolean, toggling will either send that value or nothing\n  defaultValue: string | number | boolean | null;\n}\n\nexport interface DatePickerFilterControl {\n  type: FilterControlType.DateRangePicker;\n  defaultValue: AbsoluteDateRange;\n  min?: DateValue;\n  max?: DateValue;\n}\n\nexport interface CustomFilterControl {\n  type: FilterControlType.Custom;\n  panel: ComponentType<{filter: BackendFilter<CustomFilterControl>}>;\n  listItem: ComponentType<FilterListControlProps<number, CustomFilterControl>>;\n  defaultValue?: any;\n}\n\nexport type FilterControl =\n  | FilterSelectControl\n  | FilterNumberInputControl\n  | FilterTextInputControl\n  | FilterSelectModelControl\n  | FilterChipFieldControl\n  | DatePickerFilterControl\n  | FilterBooleanToggleControl\n  | CustomFilterControl;\n\nexport interface BackendFilter<T = FilterControl> {\n  key: string;\n  label: MessageDescriptor;\n  description?: MessageDescriptor;\n  control: T;\n  defaultOperator: FilterOperator;\n  operators?: FilterOperator[];\n  extraFilters?: {key: string; operator: FilterOperator; value: any}[];\n}\n\nexport enum FilterControlType {\n  Select = 'select',\n  DateRangePicker = 'dateRangePicker',\n  SelectModel = 'selectModel',\n  Input = 'input',\n  BooleanToggle = 'booleanToggle',\n  ChipField = 'chipField',\n  Custom = 'custom',\n}\n\nexport enum FilterOperator {\n  eq = '=',\n  ne = '!=',\n  gt = '>',\n  gte = '>=',\n  lt = '<',\n  lte = '<=',\n  has = 'has',\n  notNull = 'notNull',\n  contains = 'contains',\n  notContains = 'notContains',\n  startsWith = 'startsWith',\n  endsWith = 'endsWith',\n  hasAll = 'hasAll',\n  doesntHave = 'doesntHave',\n  between = 'between',\n}\n\nexport const ALL_STRING_OPERATORS = [\n  FilterOperator.eq,\n  FilterOperator.ne,\n  FilterOperator.contains,\n  FilterOperator.notContains,\n  FilterOperator.startsWith,\n  FilterOperator.endsWith,\n  FilterOperator.notNull,\n];\n\nexport const ALL_NUMBER_OPERATORS = [\n  FilterOperator.eq,\n  FilterOperator.ne,\n  FilterOperator.gt,\n  FilterOperator.gte,\n  FilterOperator.lt,\n  FilterOperator.lte,\n  FilterOperator.notNull,\n];\n","export const USER_MODEL = 'user';\n\nexport interface User {\n  id: number;\n  name: string;\n  email: string;\n  language?: string;\n  timezone?: string;\n  country?: string;\n}\n\nexport interface CompactUser {\n  id: number;\n  name: string;\n  image?: string;\n}\n\nexport interface CompactUserWithEmail extends CompactUser {\n  email: string;\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  Fragment,\n  MouseEvent,\n  useRef,\n} from 'react';\nimport {DateRangeIcon} from '@ui/icons/material/DateRange';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {DatePickerField, DatePickerFieldProps} from './date-picker-field';\nimport {useDateRangePickerState} from './use-date-range-picker-state';\nimport {ArrowRightAltIcon} from '@ui/icons/material/ArrowRightAlt';\nimport {DatePickerValueProps} from '../date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-value';\nimport {DateSegmentList} from '../segments/date-segment-list';\nimport {DateRangeDialog} from './dialog/date-range-dialog';\nimport {useIsMobileMediaQuery} from '@ui/utils/hooks/is-mobile-media-query';\n\nexport interface DateRangePickerProps\n  extends DatePickerValueProps<Partial<DateRangeValue>>,\n    Omit<DatePickerFieldProps, 'children'> {}\nexport function DateRangePicker(props: DateRangePickerProps) {\n  const {granularity, closeDialogOnSelection, ...fieldProps} = props;\n  const state = useDateRangePickerState(props);\n  const inputRef = useRef<HTMLDivElement>(null);\n  const isMobile = useIsMobileMediaQuery();\n  const hideCalendarIcon = isMobile && granularity !== 'day';\n\n  const dialog = (\n    <DialogTrigger\n      offset={8}\n      placement=\"bottom-start\"\n      isOpen={state.calendarIsOpen}\n      onOpenChange={state.setCalendarIsOpen}\n      type=\"popover\"\n      triggerRef={inputRef}\n      returnFocusToTrigger={false}\n      moveFocusToDialog={false}\n    >\n      <DateRangeDialog state={state} />\n    </DialogTrigger>\n  );\n\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\n    onClick: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!isHourSegment(e)) {\n        state.setCalendarIsOpen(true);\n      } else {\n        state.setCalendarIsOpen(false);\n      }\n    },\n  };\n\n  const value = state.selectedValue;\n  const onChange = state.setSelectedValue;\n\n  return (\n    <Fragment>\n      <DatePickerField\n        ref={inputRef}\n        wrapperProps={openOnClick}\n        endAdornment={!hideCalendarIcon ? <DateRangeIcon /> : undefined}\n        {...fieldProps}\n      >\n        <DateSegmentList\n          isPlaceholder={state.isPlaceholder?.start}\n          state={state}\n          segmentProps={openOnClick}\n          value={value.start}\n          onChange={newValue => {\n            onChange({start: newValue, end: value.end});\n          }}\n        />\n        <ArrowRightAltIcon\n          className=\"block flex-shrink-0 text-muted\"\n          size=\"md\"\n        />\n        <DateSegmentList\n          isPlaceholder={state.isPlaceholder?.end}\n          state={state}\n          segmentProps={openOnClick}\n          value={value.end}\n          onChange={newValue => {\n            onChange({start: value.start, end: newValue});\n          }}\n        />\n      </DatePickerField>\n      {dialog}\n    </Fragment>\n  );\n}\n\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\n  return ['hour', 'minute', 'dayPeriod'].includes(\n    (e.currentTarget as HTMLElement).ariaLabel || '',\n  );\n}\n","import {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\nimport {DateRangeValue} from './date-range-value';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport React from 'react';\nimport {DateRangePicker, DateRangePickerProps} from './date-range-picker';\n\nexport interface AbsoluteDateRange {\n  start?: string;\n  end?: string;\n  preset?: number;\n}\n\ninterface FormDateRange {\n  start?: string | ZonedDateTime;\n  end?: string | ZonedDateTime;\n  preset?: number;\n}\n\nexport interface FormDateRangePickerProps extends DateRangePickerProps {\n  name: string;\n}\nexport function FormDateRangePicker(props: FormDateRangePickerProps) {\n  const {\n    field: {onChange, onBlur, value, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<DateRangePickerProps> = {\n    onChange: e => {\n      onChange(e ? dateRangeToAbsoluteRange(e) : null);\n    },\n    onBlur,\n    value: absoluteRangeToDateRange(value),\n    invalid,\n    errorMessage: error?.message,\n    inputRef: ref,\n  };\n\n  return <DateRangePicker {...mergeProps(formProps, props)} />;\n}\n\nexport function absoluteRangeToDateRange(props: FormDateRange | null) {\n  const {start, end, preset} = props || {};\n  const dateRange: Partial<DateRangeValue> = {preset};\n  try {\n    if (start) {\n      dateRange.start =\n        typeof start === 'string' ? parseAbsoluteToLocal(start) : start;\n    }\n    if (end) {\n      dateRange.end = typeof end === 'string' ? parseAbsoluteToLocal(end) : end;\n    }\n  } catch (e) {\n    // ignore\n  }\n  return dateRange;\n}\n\nexport function dateRangeToAbsoluteRange({\n  start,\n  end,\n  preset,\n}: Partial<DateRangeValue> = {}): AbsoluteDateRange {\n  const absoluteRange: AbsoluteDateRange = {\n    preset,\n  };\n  if (start) {\n    absoluteRange.start = start.toAbsoluteString();\n  }\n  if (end) {\n    absoluteRange.end = end.toAbsoluteString();\n  }\n  return absoluteRange;\n}\n","import {\n  BackendFilter,\n  DatePickerFilterControl,\n  FilterControlType,\n  FilterOperator,\n} from './backend-filter';\nimport {\n  DateRangePreset,\n  DateRangePresets,\n} from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {message} from '@ui/i18n/message';\nimport {dateRangeToAbsoluteRange} from '@ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {PartialWithRequired} from '@ui/utils/ts/partial-with-required';\n\nexport function timestampFilter(\n  options: PartialWithRequired<\n    BackendFilter<DatePickerFilterControl>,\n    'key' | 'label'\n  >,\n): BackendFilter<DatePickerFilterControl> {\n  return {\n    ...options,\n    defaultOperator: FilterOperator.between,\n    control: {\n      type: FilterControlType.DateRangePicker,\n      defaultValue:\n        options.control?.defaultValue ||\n        dateRangeToAbsoluteRange(\n          (DateRangePresets[3] as Required<DateRangePreset>).getRangeValue(),\n        ),\n    },\n  };\n}\n\nexport function createdAtFilter(\n  options: Partial<BackendFilter<DatePickerFilterControl>>,\n): BackendFilter<DatePickerFilterControl> {\n  return timestampFilter({\n    key: 'created_at',\n    label: message('Date created'),\n    ...options,\n  });\n}\n\nexport function updatedAtFilter(\n  options: Partial<BackendFilter<DatePickerFilterControl>>,\n): BackendFilter<DatePickerFilterControl> {\n  return timestampFilter({\n    key: 'updated_at',\n    label: message('Last updated'),\n    ...options,\n  });\n}\n","import {\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n  FilterSelectControl,\n} from '../../datatable/filters/backend-filter';\nimport {message} from '@ui/i18n/message';\nimport {USER_MODEL} from '@ui/types/user';\nimport {\n  createdAtFilter,\n  updatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\n\nexport const FILE_ENTRY_TYPE_FILTER: BackendFilter<FilterSelectControl> = {\n  key: 'type',\n  label: message('Type'),\n  description: message('Type of the file'),\n  defaultOperator: FilterOperator.eq,\n  control: {\n    type: FilterControlType.Select,\n    defaultValue: '05',\n    options: [\n      {key: '02', label: message('Text'), value: 'text'},\n      {\n        key: '03',\n        label: message('Audio'),\n        value: 'audio',\n      },\n      {\n        key: '04',\n        label: message('Video'),\n        value: 'video',\n      },\n      {\n        key: '05',\n        label: message('Image'),\n        value: 'image',\n      },\n      {key: '06', label: message('PDF'), value: 'pdf'},\n      {\n        key: '07',\n        label: message('Spreadsheet'),\n        value: 'spreadsheet',\n      },\n      {\n        key: '08',\n        label: message('Word Document'),\n        value: 'word',\n      },\n      {\n        key: '09',\n        label: message('Photoshop'),\n        value: 'photoshop',\n      },\n      {\n        key: '10',\n        label: message('Archive'),\n        value: 'archive',\n      },\n      {\n        key: '11',\n        label: message('Folder'),\n        value: 'folder',\n      },\n    ],\n  },\n};\n\nexport const FILE_ENTRY_INDEX_FILTERS: BackendFilter[] = [\n  FILE_ENTRY_TYPE_FILTER,\n  {\n    key: 'public',\n    label: message('Visibility'),\n    description: message('Whether file is publicly accessible'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.Select,\n      defaultValue: '01',\n      options: [\n        {key: '01', label: message('Private'), value: false},\n        {key: '02', label: message('Public'), value: true},\n      ],\n    },\n  },\n  createdAtFilter({\n    description: message('Date file was uploaded'),\n  }),\n  updatedAtFilter({\n    description: message('Date file was last changed'),\n  }),\n  {\n    key: 'owner_id',\n    label: message('Uploader'),\n    description: message('User that this file was uploaded by'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.SelectModel,\n      model: USER_MODEL,\n    },\n  },\n];\n","export const BackendFiltersUrlKey = 'filters';\n","import {FilterListValue} from './encode-backend-filters';\n\nexport function decodeBackendFilters(\n  encodedFilters: string | null\n): FilterListValue[] {\n  if (!encodedFilters) return [];\n  let filtersFromQuery: FilterListValue[] = [];\n  try {\n    filtersFromQuery = JSON.parse(atob(decodeURIComponent(encodedFilters)));\n    filtersFromQuery.map(filterValue => {\n      // set value key as value so selects work properly\n      if (filterValue.valueKey != null) {\n        filterValue.value = filterValue.valueKey;\n      }\n      return filterValue;\n    });\n  } catch (e) {\n    //\n  }\n  return filtersFromQuery;\n}\n","import {BackendFilter} from '../backend-filter';\n\nexport interface FilterListValue {\n  key: string | number;\n  value: BackendFilter['control']['defaultValue'];\n  operator?: BackendFilter['defaultOperator'];\n  valueKey?: string | number;\n  isInactive?: boolean;\n  extraFilters?: {key: string; operator: string; value: any}[];\n}\n\nexport function encodeBackendFilters(\n  filterValues: FilterListValue[] | null,\n  filters?: BackendFilter[],\n): string {\n  if (!filterValues) return '';\n\n  // prepare values for backend\n  filterValues = !filters\n    ? filterValues\n    : filterValues\n        .filter(item => item.value !== '')\n        .map(item => transformValue(item, filters));\n\n  // remove all placeholder filters\n  filterValues = filterValues.filter(fm => !fm.isInactive);\n\n  if (!filterValues.length) {\n    return '';\n  }\n\n  return encodeURIComponent(btoa(JSON.stringify(filterValues)));\n}\n\nfunction transformValue(\n  filterValue: FilterListValue,\n  filters: BackendFilter[],\n) {\n  const filterConfig = filters.find(f => f.key === filterValue.key);\n  // select components will use a key always, because we can't use objects as\n  // value. Map over select options and replace key with actual value\n  if (filterConfig?.control.type === 'select') {\n    const option = (filterConfig.control.options || []).find(\n      o => o.key === filterValue.value,\n    );\n    // if it's language or country select, there might not be an option\n    if (option) {\n      return {...filterValue, value: option.value, valueKey: option.key};\n    }\n  }\n\n  if (filterConfig?.extraFilters?.length) {\n    filterValue['extraFilters'] = filterConfig.extraFilters;\n  }\n\n  return filterValue;\n}\n","import {useNavigate, useSearchParams} from 'react-router-dom';\nimport {Key, useCallback, useMemo} from 'react';\nimport {BackendFilter} from './backend-filter';\nimport {BackendFiltersUrlKey} from './backend-filters-url-key';\nimport {decodeBackendFilters} from './utils/decode-backend-filters';\nimport {\n  encodeBackendFilters,\n  FilterListValue,\n} from './utils/encode-backend-filters';\n\nexport function useBackendFilterUrlParams(\n  filters?: BackendFilter[],\n  pinnedFilters?: string[],\n) {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n\n  const encodedFilters = searchParams.get(BackendFiltersUrlKey);\n\n  const decodedFilters: FilterListValue[] = useMemo(() => {\n    if (!filters) return [];\n    const decoded = decodeBackendFilters(encodedFilters);\n\n    // if filter is pinned, and it is not applied yet, add a placeholder\n    (pinnedFilters || []).forEach(key => {\n      if (!decoded.find(f => f.key === key)) {\n        const config = filters.find(f => f.key === key)!;\n        decoded.push({\n          key,\n          value: config.control.defaultValue,\n          operator: config.defaultOperator,\n          isInactive: true,\n        });\n      }\n    });\n\n    // preserve original filter order from configuration\n    decoded.sort(\n      (a, b) =>\n        filters.findIndex(f => f.key === a.key) -\n        filters.findIndex(f => f.key === b.key),\n    );\n\n    return decoded;\n  }, [encodedFilters, pinnedFilters, filters]);\n\n  const getDecodedWithoutKeys = useCallback(\n    (values: (FilterListValue | Key)[]) => {\n      const newFilters = [...decodedFilters];\n      values.forEach(value => {\n        const key = typeof value === 'object' ? value.key : value;\n        const index = newFilters.findIndex(f => f.key === key);\n        if (index > -1) {\n          newFilters.splice(index, 1);\n        }\n      });\n      return newFilters;\n    },\n    [decodedFilters],\n  );\n\n  const replaceAll = useCallback(\n    (filterValues: FilterListValue[]) => {\n      const encodedFilters = encodeBackendFilters(filterValues, filters);\n      if (encodedFilters) {\n        searchParams.set(BackendFiltersUrlKey, encodedFilters);\n      } else {\n        searchParams.delete(BackendFiltersUrlKey);\n      }\n      navigate({search: `?${searchParams}`}, {replace: true});\n    },\n    [filters, navigate, searchParams],\n  );\n\n  const add = useCallback(\n    (filterValues: FilterListValue[]) => {\n      const existing = getDecodedWithoutKeys(filterValues);\n      const decodedFilters = [...existing, ...filterValues];\n      replaceAll(decodedFilters);\n    },\n    [getDecodedWithoutKeys, replaceAll],\n  );\n\n  const remove = useCallback(\n    (key: Key) => replaceAll(getDecodedWithoutKeys([key])),\n    [getDecodedWithoutKeys, replaceAll],\n  );\n\n  return {\n    add,\n    remove,\n    replaceAll,\n    decodedFilters,\n    encodedFilters,\n  };\n}\n","import {BackendFilter, FilterControlType} from '../backend-filter';\nimport {ComponentPropsWithRef, forwardRef, ReactNode} from 'react';\nimport {Button} from '@ui/buttons/button';\nimport {KeyboardArrowDownIcon} from '@ui/icons/material/KeyboardArrowDown';\nimport {Trans} from '@ui/i18n/trans';\nimport clsx from 'clsx';\n\ninterface TriggerButtonProps\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\n  isInactive?: boolean;\n  filter: BackendFilter;\n  children?: ReactNode;\n}\nexport const FilterListTriggerButton = forwardRef<\n  HTMLButtonElement,\n  TriggerButtonProps\n>((props, ref) => {\n  // pass through all props from menu trigger and dialog trigger to button\n  const {isInactive, filter, ...domProps} = props;\n\n  if (isInactive) {\n    return <InactiveFilterButton filter={filter} {...domProps} ref={ref} />;\n  }\n\n  return <ActiveFilterButton filter={filter} {...domProps} ref={ref} />;\n});\n\ninterface InactiveFilterButtonProps\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\n  filter: BackendFilter;\n}\nexport const InactiveFilterButton = forwardRef<\n  HTMLButtonElement,\n  InactiveFilterButtonProps\n>(({filter, ...domProps}, ref) => {\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"xs\"\n      color=\"paper\"\n      radius=\"rounded-md\"\n      border=\"border\"\n      ref={ref}\n      endIcon={<KeyboardArrowDownIcon />}\n      {...domProps}\n    >\n      <Trans {...filter.label} />\n    </Button>\n  );\n});\n\nexport const ActiveFilterButton = forwardRef<\n  HTMLButtonElement,\n  InactiveFilterButtonProps\n>(({filter, children, ...domProps}, ref) => {\n  const isBoolean = filter.control.type === FilterControlType.BooleanToggle;\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"xs\"\n      color=\"primary\"\n      radius=\"rounded-r-md\"\n      border=\"border-y border-r\"\n      endIcon={!isBoolean && <KeyboardArrowDownIcon />}\n      ref={ref}\n      {...domProps}\n    >\n      <span\n        className={clsx(\n          !isBoolean && 'mr-8 border-r border-r-primary-light pr-8',\n        )}\n      >\n        <Trans {...filter.label} />\n      </span>\n      {children}\n    </Button>\n  );\n});\n","import {FormSelect} from '@ui/forms/select/select';\nimport {Item} from '@ui/forms/listbox/item';\nimport {Trans} from '@ui/i18n/trans';\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {FilterSelectControl} from '@common/datatable/filters/backend-filter';\n\nexport function SelectFilterPanel({\n  filter,\n}: FilterPanelProps<FilterSelectControl>) {\n  const {trans} = useTrans();\n\n  return (\n    <FormSelect\n      size=\"sm\"\n      name={`${filter.key}.value`}\n      selectionMode=\"single\"\n      showSearchField={filter.control.showSearchField}\n      placeholder={\n        filter.control.placeholder\n          ? trans(filter.control.placeholder)\n          : undefined\n      }\n      searchPlaceholder={\n        filter.control.searchPlaceholder\n          ? trans(filter.control.searchPlaceholder)\n          : undefined\n      }\n    >\n      {filter.control.options.map(option => (\n        <Item key={option.key} value={option.key}>\n          {typeof option.label === 'string' ? (\n            option.label\n          ) : (\n            <Trans {...option.label} />\n          )}\n        </Item>\n      ))}\n    </FormSelect>\n  );\n}\n","import {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\nimport {ReactNode} from 'react';\nimport {useForm} from 'react-hook-form';\nimport {FilterItemFormValue} from '../add-filter-dialog';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@ui/overlays/dialog/dialog-header';\nimport {Trans} from '@ui/i18n/trans';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {Form} from '@ui/forms/form';\nimport {DialogFooter} from '@ui/overlays/dialog/dialog-footer';\nimport {Button} from '@ui/buttons/button';\nimport {FilterListControlProps} from './filter-list-control';\n\ninterface FilterListItemDialogTriggerProps extends FilterListControlProps<any> {\n  label: ReactNode;\n  panel: ReactNode;\n}\nexport function FilterListItemDialogTrigger(\n  props: FilterListItemDialogTriggerProps,\n) {\n  const {onValueChange, isInactive, filter, label} = props;\n  return (\n    <DialogTrigger\n      offset={10}\n      type=\"popover\"\n      onClose={(value?: FilterItemFormValue) => {\n        if (value !== undefined) {\n          onValueChange(value);\n        }\n      }}\n    >\n      <FilterListTriggerButton isInactive={isInactive} filter={filter}>\n        {label}\n      </FilterListTriggerButton>\n      <FilterListControlDialog {...props} />\n    </DialogTrigger>\n  );\n}\n\nexport function FilterListControlDialog({\n  filter,\n  panel,\n  value,\n  operator,\n}: FilterListItemDialogTriggerProps) {\n  const form = useForm<Record<string, FilterItemFormValue>>({\n    defaultValues: {\n      [filter.key]: {value, operator},\n    },\n  });\n  const {close, formId} = useDialogContext();\n  return (\n    <Dialog size=\"xs\">\n      <DialogHeader>\n        <Trans {...filter.label} />\n      </DialogHeader>\n      <DialogBody padding=\"px-14 pt-14 pb-4 max-h-288\">\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={formValue => {\n            close(formValue[filter.key]);\n          }}\n        >\n          {filter.description && (\n            <div className=\"mb-14 text-xs text-muted\">\n              <Trans {...filter.description} />\n            </div>\n          )}\n          {panel}\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          form={formId}\n          type=\"submit\"\n          variant=\"flat\"\n          color=\"primary\"\n          size=\"xs\"\n        >\n          <Trans message=\"Apply\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {\n  keepPreviousData,\n  useQuery,\n  UseQueryOptions,\n} from '@tanstack/react-query';\nimport {NormalizedModel} from '@ui/types/normalized-model';\nimport {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\n\ninterface Response extends BackendResponse {\n  results: NormalizedModel[];\n}\n\ninterface Params {\n  query?: string;\n  perPage?: number;\n  with?: string;\n}\n\nexport function useNormalizedModels(\n  endpoint: string,\n  queryParams?: Params,\n  queryOptions?: Omit<\n    UseQueryOptions<Response, unknown, Response, any[]>,\n    'queryKey' | 'queryFn'\n  > | null,\n) {\n  return useQuery({\n    queryKey: [...endpoint.split('/'), queryParams],\n    queryFn: () => fetchModels(endpoint, queryParams),\n    placeholderData: keepPreviousData,\n    ...queryOptions,\n  });\n}\n\nasync function fetchModels(endpoint: string, params?: Params) {\n  return apiClient.get<Response>(endpoint, {params}).then(r => {\n    if ('results' in r.data) {\n      return r.data;\n    } else {\n      const results = Object.values(r.data).find(v => Array.isArray(v));\n      return {results} as Response;\n    }\n  });\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {NormalizedModel} from '@ui/types/normalized-model';\nimport {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\n\ninterface Response extends BackendResponse {\n  model: NormalizedModel;\n}\n\nexport function useNormalizedModel(\n  endpoint: string,\n  queryParams?: Record<string, string>,\n  queryOptions?: {enabled?: boolean},\n) {\n  return useQuery({\n    queryKey: [endpoint, queryParams],\n    queryFn: () => fetchModel(endpoint, queryParams),\n    ...queryOptions,\n  });\n}\n\nasync function fetchModel(\n  endpoint: string,\n  params?: Record<string, string>,\n): Promise<Response> {\n  return apiClient.get(endpoint, {params}).then(r => r.data);\n}\n","import React, {ReactNode, useRef, useState} from 'react';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {Trans} from '@ui/i18n/trans';\nimport {Avatar} from '@ui/avatar/avatar';\nimport {Tooltip} from '@ui/tooltip/tooltip';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {message} from '@ui/i18n/message';\nimport {Item} from '@ui/forms/listbox/item';\nimport {useController, useFormContext} from 'react-hook-form';\nimport {useControlledState} from '@react-stately/utils';\nimport {getInputFieldClassNames} from '@ui/forms/input-field/get-input-field-class-names';\nimport clsx from 'clsx';\nimport {Skeleton} from '@ui/skeleton/skeleton';\nimport {useNormalizedModels} from '@common/ui/normalized-model/use-normalized-models';\nimport {useNormalizedModel} from '@common/ui/normalized-model/use-normalized-model';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@ui/animation/opacity-animation';\nimport {Select} from '@ui/forms/select/select';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\nimport {BaseFieldProps} from '@ui/forms/input-field/base-field-props';\nimport {EditIcon} from '@ui/icons/material/Edit';\n\ninterface NormalizedModelFieldProps {\n  label?: ReactNode;\n  className?: string;\n  background?: BaseFieldProps['background'];\n  value?: string | number;\n  placeholder?: MessageDescriptor;\n  searchPlaceholder?: MessageDescriptor;\n  defaultValue?: string | number;\n  onChange?: (value: string | number) => void;\n  invalid?: boolean;\n  errorMessage?: string;\n  description?: ReactNode;\n  autoFocus?: boolean;\n  queryParams?: Record<string, string>;\n  endpoint: string;\n  disabled?: boolean;\n  required?: boolean;\n}\nexport function NormalizedModelField({\n  label,\n  className,\n  background,\n  value,\n  defaultValue = '',\n  placeholder = message('Select item...'),\n  searchPlaceholder = message('Find an item...'),\n  onChange,\n  description,\n  errorMessage,\n  invalid,\n  autoFocus,\n  queryParams,\n  endpoint,\n  disabled,\n  required,\n}: NormalizedModelFieldProps) {\n  const inputRef = useRef<HTMLButtonElement>(null);\n  const [inputValue, setInputValue] = useState('');\n  const [selectedValue, setSelectedValue] = useControlledState(\n    value,\n    defaultValue,\n    onChange,\n  );\n  const query = useNormalizedModels(endpoint, {\n    query: inputValue,\n    ...queryParams,\n  });\n  const {trans} = useTrans();\n\n  const fieldClassNames = getInputFieldClassNames({size: 'md'});\n\n  if (selectedValue) {\n    return (\n      <div className={className}>\n        <div className={fieldClassNames.label}>{label}</div>\n        <div\n          className={clsx(\n            'rounded-input border p-8',\n            background,\n            invalid && 'border-danger',\n          )}\n        >\n          <AnimatePresence initial={false} mode=\"wait\">\n            <SelectedModelPreview\n              disabled={disabled}\n              endpoint={endpoint}\n              modelId={selectedValue}\n              queryParams={queryParams}\n              onEditClick={() => {\n                setSelectedValue('');\n                setInputValue('');\n                requestAnimationFrame(() => {\n                  inputRef.current?.focus();\n                  inputRef.current?.click();\n                });\n              }}\n            />\n          </AnimatePresence>\n        </div>\n        {description && !errorMessage && (\n          <div className={fieldClassNames.description}>{description}</div>\n        )}\n        {errorMessage && (\n          <div className={fieldClassNames.error}>{errorMessage}</div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <Select\n      className={className}\n      showSearchField\n      invalid={invalid}\n      errorMessage={errorMessage}\n      description={description}\n      color=\"white\"\n      isAsync\n      background={background}\n      placeholder={trans(placeholder)}\n      searchPlaceholder={trans(searchPlaceholder)}\n      label={label}\n      isLoading={query.isFetching}\n      items={query.data?.results}\n      inputValue={inputValue}\n      onInputValueChange={setInputValue}\n      selectionMode=\"single\"\n      selectedValue={selectedValue}\n      onSelectionChange={setSelectedValue}\n      ref={inputRef}\n      autoFocus={autoFocus}\n      disabled={disabled}\n      required={required}\n    >\n      {model => (\n        <Item\n          value={model.id}\n          key={model.id}\n          description={model.description}\n          startIcon={<Avatar src={model.image} size=\"sm\" label={model.name} />}\n        >\n          {model.name}\n        </Item>\n      )}\n    </Select>\n  );\n}\n\ninterface SelectedModelPreviewProps {\n  modelId: string | number;\n  selectedValue?: number | string;\n  onEditClick?: () => void;\n  endpoint?: string;\n  disabled?: boolean;\n  queryParams?: NormalizedModelFieldProps['queryParams'];\n}\nfunction SelectedModelPreview({\n  modelId,\n  onEditClick,\n  endpoint,\n  disabled,\n  queryParams,\n}: SelectedModelPreviewProps) {\n  const {data, isLoading} = useNormalizedModel(\n    `${endpoint}/${modelId}`,\n    queryParams,\n  );\n\n  if (isLoading || !data?.model) {\n    return <LoadingSkeleton key=\"skeleton\" />;\n  }\n\n  return (\n    <m.div\n      className={clsx(\n        'flex items-center gap-10',\n        disabled && 'pointer-events-none cursor-not-allowed text-disabled',\n      )}\n      key=\"preview\"\n      {...opacityAnimation}\n    >\n      <Avatar src={data.model.image} label={data.model.name} />\n      <div>\n        <div className=\"text-sm leading-4\">{data.model.name}</div>\n        <div className=\"text-xs text-muted\">{data.model.description}</div>\n      </div>\n      <Tooltip label={<Trans message=\"Change item\" />}>\n        <IconButton\n          className=\"ml-auto text-muted\"\n          size=\"sm\"\n          onClick={onEditClick}\n          disabled={disabled}\n        >\n          <EditIcon />\n        </IconButton>\n      </Tooltip>\n    </m.div>\n  );\n}\n\nfunction LoadingSkeleton() {\n  return (\n    <m.div className=\"flex items-center gap-10\" {...opacityAnimation}>\n      <Skeleton variant=\"rect\" size=\"w-32 h-32\" />\n      <div className=\"max-h-[36px] flex-auto\">\n        <Skeleton className=\"text-xs\" />\n        <Skeleton className=\"max-h-8 text-xs\" />\n      </div>\n      <Skeleton variant=\"icon\" size=\"w-24 h-24\" />\n    </m.div>\n  );\n}\n\ninterface FormNormalizedModelFieldProps extends NormalizedModelFieldProps {\n  name: string;\n}\nexport function FormNormalizedModelField({\n  name,\n  ...fieldProps\n}: FormNormalizedModelFieldProps) {\n  const {clearErrors} = useFormContext();\n  const {\n    field: {onChange, value = ''},\n    fieldState: {invalid, error},\n  } = useController({\n    name,\n  });\n\n  return (\n    <NormalizedModelField\n      value={value}\n      onChange={value => {\n        onChange(value);\n        clearErrors(name);\n      }}\n      invalid={invalid}\n      errorMessage={error?.message}\n      {...fieldProps}\n    />\n  );\n}\n","import {FilterPanelProps} from './filter-panel-props';\nimport {FormNormalizedModelField} from '@common/ui/normalized-model/normalized-model-field';\nimport {FilterSelectModelControl} from '@common/datatable/filters/backend-filter';\n\nexport function NormalizedModelFilterPanel({\n  filter,\n}: FilterPanelProps<FilterSelectModelControl>) {\n  return (\n    <FormNormalizedModelField\n      name={`${filter.key}.value`}\n      endpoint={\n        filter.control.endpoint\n          ? filter.control.endpoint\n          : `normalized-models/${filter.control.model}`\n      }\n    />\n  );\n}\n","import {FormDateRangePicker} from '@ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\nimport {DatePickerFilterControl} from '@common/datatable/filters/backend-filter';\n\nexport function DateRangeFilterPanel({\n  filter,\n}: FilterPanelProps<DatePickerFilterControl>) {\n  return (\n    <FormDateRangePicker\n      min={filter.control.min}\n      max={filter.control.max}\n      size=\"sm\"\n      name={`${filter.key}.value`}\n      granularity=\"day\"\n      closeDialogOnSelection={true}\n    />\n  );\n}\n","import {FilterOperator} from './backend-filter';\nimport {message} from '@ui/i18n/message';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\n\nexport const FilterOperatorNames: {[op in FilterOperator]: MessageDescriptor} =\n  {\n    '=': message('is'),\n    '!=': message('is not'),\n    '>': message('is greater than'),\n    '>=': message('is greater than or equal to'),\n    '<': message('is less than'),\n    '<=': message('is less than or equal to'),\n    notNull: message('has any value'),\n    contains: message('contains'),\n    notContains: message('does not contain'),\n    startsWith: message('starts with'),\n    endsWith: message('ends with'),\n    has: message('Include'),\n    doesntHave: message('Do not include'),\n    between: message('Is between'),\n    hasAll: message('Include all'),\n  };\n","import {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@ui/i18n/trans';\nimport {FormSelect} from '@ui/forms/select/select';\nimport {Item} from '@ui/forms/listbox/item';\nimport {FilterOperatorNames} from '@common/datatable/filters/filter-operator-names';\nimport {Fragment} from 'react';\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\nimport {\n  FilterNumberInputControl,\n  FilterTextInputControl,\n} from '@common/datatable/filters/backend-filter';\nimport {useFormContext, useWatch} from 'react-hook-form';\n\nexport function InputFilterPanel({\n  filter,\n}: FilterPanelProps<FilterTextInputControl | FilterNumberInputControl>) {\n  const control = filter.control;\n  const form = useFormContext();\n  const selectedOperator = useWatch({\n    control: form.control,\n    name: `${filter.key}.operator`,\n  });\n  return (\n    <Fragment>\n      {filter.operators?.length ? (\n        <FormSelect\n          selectionMode=\"single\"\n          name={`${filter.key}.operator`}\n          className=\"mb-14\"\n          size=\"sm\"\n        >\n          {filter.operators?.map(operator => (\n            <Item key={operator} value={operator}>\n              {<Trans {...FilterOperatorNames[operator]} />}\n            </Item>\n          ))}\n        </FormSelect>\n      ) : null}\n      {selectedOperator === 'notNull' ? null : (\n        <FormTextField\n          size=\"sm\"\n          name={`${filter.key}.value`}\n          type={filter.control.inputType}\n          min={'minValue' in control ? control.minValue : undefined}\n          max={'maxValue' in control ? control.maxValue : undefined}\n          minLength={'minLength' in control ? control.minLength : undefined}\n          maxLength={'maxLength' in control ? control.maxLength : undefined}\n        />\n      )}\n    </Fragment>\n  );\n}\n","import {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport React from 'react';\nimport {ChipField, ChipFieldProps} from './chip-field';\n\nexport type FormChipFieldProps<T> = ChipFieldProps<T> & {\n  name: string;\n};\n\nexport function FormChipField<T>({children, ...props}: FormChipFieldProps<T>) {\n  const {\n    field: {onChange, onBlur, value = [], ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<ChipFieldProps<T>> = {\n    onChange,\n    onBlur,\n    value,\n    invalid,\n    errorMessage: error?.message,\n  };\n\n  return (\n    <ChipField ref={ref} {...mergeProps(formProps, props)}>\n      {children}\n    </ChipField>\n  );\n}\n","import {Item} from '@ui/forms/listbox/item';\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\nimport {FormChipField} from '@ui/forms/input-field/chip-field/form-chip-field';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {FilterChipFieldControl} from '@common/datatable/filters/backend-filter';\nimport {Trans} from '@ui/i18n/trans';\n\nexport function ChipFieldFilterPanel({\n  filter,\n}: FilterPanelProps<FilterChipFieldControl>) {\n  const {trans} = useTrans();\n  return (\n    <FormChipField\n      size=\"sm\"\n      name={`${filter.key}.value`}\n      valueKey=\"id\"\n      allowCustomValue={false}\n      showDropdownArrow\n      placeholder={\n        filter.control.placeholder\n          ? trans(filter.control.placeholder)\n          : undefined\n      }\n      displayWith={chip => {\n        const o = filter.control.options.find(o => o.key === chip.id);\n        if (!o) return undefined;\n        return typeof o.label === 'string' ? o.label : o.label.message;\n      }}\n      suggestions={filter.control.options.map(o => ({\n        id: o.key,\n        name: typeof o.label === 'string' ? o.label : o.label.message,\n      }))}\n    >\n      {chip => (\n        <Item key={chip.id} value={chip.id}>\n          {<Trans message={chip.name} />}\n        </Item>\n      )}\n    </FormChipField>\n  );\n}\n","import {\n  BackendFilter,\n  CustomFilterControl,\n  DatePickerFilterControl,\n  FilterBooleanToggleControl,\n  FilterChipFieldControl,\n  FilterControl,\n  FilterControlType,\n  FilterNumberInputControl,\n  FilterOperator,\n  FilterSelectControl,\n  FilterSelectModelControl,\n  FilterTextInputControl,\n} from '../backend-filter';\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\nimport {Trans} from '@ui/i18n/trans';\nimport {SelectFilterPanel} from '../panels/select-filter-panel';\nimport {FilterListItemDialogTrigger} from './filter-list-item-dialog-trigger';\nimport {Avatar} from '@ui/avatar/avatar';\nimport {NormalizedModelFilterPanel} from '../panels/normalized-model-filter-panel';\nimport {DateRangeFilterPanel} from '../panels/date-range-filter-panel';\nimport {Fragment, Key, ReactNode} from 'react';\nimport {DateRangePresets} from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {FormattedDateTimeRange} from '@ui/i18n/formatted-date-time-range';\nimport {AbsoluteDateRange} from '@ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {InputFilterPanel} from '../panels/input-filter-panel';\nimport {FilterOperatorNames} from '../filter-operator-names';\nimport {FilterItemFormValue} from '../add-filter-dialog';\nimport {useNormalizedModel} from '@common/ui/normalized-model/use-normalized-model';\nimport {Skeleton} from '@ui/skeleton/skeleton';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {ChipFieldFilterPanel} from '@common/datatable/filters/panels/chip-field-filter-panel';\nimport {FormattedNumber} from '@ui/i18n/formatted-number';\n\nexport interface FilterListControlProps<T = unknown, E = FilterControl> {\n  filter: BackendFilter<E>;\n  onValueChange: (value: FilterItemFormValue<T>) => void;\n  value: T;\n  operator?: FilterOperator;\n  isInactive?: boolean;\n}\nexport function FilterListControl(props: FilterListControlProps<any, any>) {\n  switch (props.filter.control.type) {\n    case FilterControlType.DateRangePicker:\n      return <DatePickerControl {...props} />;\n    case FilterControlType.BooleanToggle:\n      return <BooleanToggleControl {...props} />;\n    case FilterControlType.Select:\n      return <SelectControl {...props} />;\n    case FilterControlType.ChipField:\n      return <ChipFieldControl {...props} />;\n    case FilterControlType.Input:\n      return <InputControl {...props} />;\n    case FilterControlType.SelectModel:\n      return <SelectModelControl {...props} />;\n    case FilterControlType.Custom:\n      const Control = (props.filter.control as CustomFilterControl).listItem;\n      return <Control {...props} />;\n    default:\n      return null;\n  }\n}\n\nfunction DatePickerControl(\n  props: FilterListControlProps<\n    Required<AbsoluteDateRange>,\n    DatePickerFilterControl\n  >,\n) {\n  const {value, filter} = props;\n\n  let valueLabel: ReactNode;\n  if (value.preset !== undefined) {\n    valueLabel = <Trans {...DateRangePresets[value.preset].label} />;\n  } else {\n    valueLabel = (\n      <FormattedDateTimeRange\n        start={new Date(value.start)}\n        end={new Date(value.end)}\n        options={{dateStyle: 'medium'}}\n      />\n    );\n  }\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={valueLabel}\n      panel={<DateRangeFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction BooleanToggleControl({\n  filter,\n  isInactive,\n  onValueChange,\n}: FilterListControlProps<\n  FilterBooleanToggleControl['defaultValue'],\n  FilterBooleanToggleControl\n>) {\n  // todo: toggle control on or off here\n  return (\n    <FilterListTriggerButton\n      onClick={() => {\n        onValueChange({value: filter.control.defaultValue});\n      }}\n      filter={filter}\n      isInactive={isInactive}\n    />\n  );\n}\n\nfunction SelectControl(\n  props: FilterListControlProps<Key, FilterSelectControl>,\n) {\n  const {filter, value} = props;\n  const option = filter.control.options.find(o => o.key === value);\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={\n        option ? (\n          typeof option.label === 'string' ? (\n            option.label\n          ) : (\n            <Trans {...option.label} />\n          )\n        ) : null\n      }\n      panel={<SelectFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction ChipFieldControl(\n  props: FilterListControlProps<string[], FilterChipFieldControl>,\n) {\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={<MultipleValues {...props} />}\n      panel={<ChipFieldFilterPanel filter={props.filter} />}\n    />\n  );\n}\n\nfunction MultipleValues(\n  props: FilterListControlProps<string[], FilterChipFieldControl>,\n) {\n  const {trans} = useTrans();\n  const {filter, value} = props;\n\n  const options = value.map(v => filter.control.options.find(o => o.key === v));\n  const maxShownCount = 3;\n  const notShownCount = value.length - maxShownCount;\n\n  // translate names, add commas and limit to 3\n  const names = (\n    <Fragment>\n      {options\n        .filter(Boolean)\n        .slice(0, maxShownCount)\n        .map((o, i) => {\n          let name = '';\n          if (i !== 0) {\n            name += ', ';\n          }\n          name += typeof o!.label === 'string' ? o!.label : trans(o!.label);\n          return name;\n        })}\n    </Fragment>\n  );\n\n  // indicate that there are some names not shown\n  return notShownCount > 0 ? (\n    <Trans\n      message=\":names + :count more\"\n      values={{names: names, count: notShownCount}}\n    />\n  ) : (\n    names\n  );\n}\n\nfunction InputControl(\n  props: FilterListControlProps<\n    string,\n    FilterTextInputControl | FilterNumberInputControl\n  >,\n) {\n  const {filter, value, operator} = props;\n\n  const operatorLabel = operator ? (\n    <Trans {...FilterOperatorNames[operator]} />\n  ) : null;\n\n  const formattedValue =\n    filter.control.inputType === 'number' ? (\n      <FormattedNumber value={value as any} />\n    ) : (\n      value\n    );\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={\n        <Fragment>\n          {operatorLabel} {formattedValue}\n        </Fragment>\n      }\n      panel={<InputFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction SelectModelControl(\n  props: FilterListControlProps<string, FilterSelectModelControl>,\n) {\n  const {value, filter} = props;\n  const {isLoading, data} = useNormalizedModel(\n    filter.control.endpoint\n      ? `${filter.control.endpoint}/${value}`\n      : `normalized-models/${filter.control.model}/${value}`,\n    undefined,\n    {enabled: !!value},\n  );\n\n  const skeleton = (\n    <Fragment>\n      <Skeleton variant=\"avatar\" size=\"w-18 h-18 mr-6\" />\n      <Skeleton variant=\"rect\" size=\"w-50\" />\n    </Fragment>\n  );\n  const modelPreview = (\n    <Fragment>\n      <Avatar\n        size=\"xs\"\n        src={data?.model.image}\n        label={data?.model.name}\n        className=\"mr-6\"\n      />\n      {data?.model.name}\n    </Fragment>\n  );\n\n  const label = isLoading || !data ? skeleton : modelPreview;\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={label}\n      panel={<NormalizedModelFilterPanel filter={filter} />}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport {BackendFilter} from '../backend-filter';\nimport {useBackendFilterUrlParams} from '../backend-filter-url-params';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {CloseIcon} from '@ui/icons/material/Close';\nimport {FilterListControl} from './filter-list-control';\nimport {FilterItemFormValue} from '../add-filter-dialog';\n\ninterface FilterListProps {\n  filters: BackendFilter[];\n  // these filters will always be shown, even if value is not yet selected for filter\n  pinnedFilters?: string[];\n  className?: string;\n}\nexport function FilterList({\n  filters,\n  pinnedFilters,\n  className,\n}: FilterListProps) {\n  const {decodedFilters, remove, replaceAll} = useBackendFilterUrlParams(\n    filters,\n    pinnedFilters,\n  );\n\n  if (!decodedFilters.length) return null;\n\n  return (\n    <div className={clsx('flex items-center gap-6 overflow-x-auto', className)}>\n      {decodedFilters.map((field, index) => {\n        const filter = filters.find(f => f.key === field.key);\n\n        if (!filter) return null;\n\n        const handleValueChange = (payload: FilterItemFormValue) => {\n          const newFilters = [...decodedFilters];\n          newFilters.splice(index, 1, {\n            key: filter.key,\n            value: payload.value,\n            isInactive: false,\n            operator: payload.operator || filter.defaultOperator,\n          });\n          replaceAll(newFilters);\n        };\n\n        return (\n          <div key={field.key}>\n            {!field.isInactive && (\n              <IconButton\n                variant=\"outline\"\n                color=\"primary\"\n                size=\"xs\"\n                radius=\"rounded-l-md\"\n                onClick={() => {\n                  remove(field.key);\n                }}\n              >\n                <CloseIcon />\n              </IconButton>\n            )}\n            <FilterListControl\n              filter={filter}\n              isInactive={field.isInactive}\n              value={field.valueKey != null ? field.valueKey : field.value}\n              operator={field.operator}\n              onValueChange={handleValueChange}\n            />\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import {createContext} from 'react';\n\nexport type DashboardSidenavStatus = 'open' | 'closed' | 'compact';\n\nexport interface DashboardContextValue {\n  leftSidenavStatus: DashboardSidenavStatus;\n  setLeftSidenavStatus: (status: DashboardSidenavStatus) => void;\n  rightSidenavStatus: DashboardSidenavStatus;\n  setRightSidenavStatus: (status: DashboardSidenavStatus) => void;\n  isMobileMode: boolean | null;\n  leftSidenavCanBeCompact?: boolean;\n  name: string;\n}\n\nexport const DashboardLayoutContext = createContext<DashboardContextValue>(\n  null!\n);\n","import React, {HTMLAttributes, useRef} from 'react';\nimport {useGlobalListeners} from '@react-aria/utils';\nimport {createEventHandler} from '@ui/utils/dom/create-event-handler';\n\ninterface PointerState {\n  lastPosition: {x: number; y: number};\n  id?: number;\n  started: boolean;\n  el?: HTMLElement;\n  originalTouchAction?: string;\n  originalUserSelect?: string;\n  longPressTimer?: any;\n  longPressTriggered?: boolean;\n}\n\ninterface UsePointerEventsReturn {\n  domProps: HTMLAttributes<HTMLElement>;\n}\n\nexport interface UsePointerEventsProps {\n  onMoveStart?: (e: PointerEvent, el: HTMLElement) => false | void;\n  onMove?: (e: PointerEvent, deltaX: number, deltaY: number) => void;\n  onMoveEnd?: (e: PointerEvent) => void;\n  onPointerDown?: (e: React.PointerEvent) => void | false;\n  onPointerUp?: (e: PointerEvent, el: HTMLElement) => void;\n  onPress?: (e: PointerEvent, el: HTMLElement) => void;\n  onLongPress?: (e: PointerEvent | React.PointerEvent, el: HTMLElement) => void;\n  preventDefault?: boolean;\n  stopPropagation?: boolean;\n  minimumMovement?: number;\n}\nexport function usePointerEvents({\n  onMoveStart,\n  onMove,\n  onMoveEnd,\n  minimumMovement = 0,\n  preventDefault,\n  stopPropagation = true,\n  onPress,\n  onLongPress,\n  ...props\n}: UsePointerEventsProps): UsePointerEventsReturn {\n  const stateRef = useRef<PointerState>({\n    lastPosition: {x: 0, y: 0},\n    started: false,\n    longPressTriggered: false,\n  });\n  const state = stateRef.current;\n\n  const {addGlobalListener, removeGlobalListener} = useGlobalListeners();\n\n  const start = (e: PointerEvent) => {\n    if (!state.el) return;\n    const result = onMoveStart?.(e, state.el);\n\n    // allow user to cancel interaction\n    if (result === false) return;\n\n    state.originalTouchAction = state.el.style.touchAction;\n    state.el.style.touchAction = 'none';\n    state.originalUserSelect = document.documentElement.style.userSelect;\n    document.documentElement.style.userSelect = 'none';\n    state.started = true;\n  };\n\n  const onPointerDown = (e: React.PointerEvent) => {\n    if (e.button === 0 && state.id == null) {\n      state.started = false;\n\n      const result = props.onPointerDown?.(e);\n      if (result === false) return;\n\n      if (stopPropagation) {\n        e.stopPropagation();\n      }\n      if (preventDefault) {\n        e.preventDefault();\n      }\n      state.id = e.pointerId;\n      state.el = e.currentTarget as HTMLElement;\n      state.lastPosition = {x: e.clientX, y: e.clientY};\n\n      // use global listeners, so we don't have to capture pointer,\n      // which would prevent click events on child nodes\n\n      if (onLongPress) {\n        state.longPressTimer = setTimeout(() => {\n          onLongPress(e, state.el!);\n          state.longPressTriggered = true;\n        }, 400);\n      }\n\n      if (onMoveStart || onMove) {\n        addGlobalListener(window, 'pointermove', onPointerMove, false);\n      }\n      addGlobalListener(window, 'pointerup', onPointerUp, false);\n      addGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n\n  const onPointerMove = (e: PointerEvent) => {\n    if (e.pointerId === state.id) {\n      const deltaX = e.clientX - state.lastPosition.x;\n      const deltaY = e.clientY - state.lastPosition.y;\n\n      if (\n        (Math.abs(deltaX) >= minimumMovement ||\n          Math.abs(deltaY) >= minimumMovement) &&\n        !state.started\n      ) {\n        start(e);\n      }\n\n      if (state.started) {\n        onMove?.(e, deltaX, deltaY);\n        state.lastPosition = {x: e.clientX, y: e.clientY};\n      }\n    }\n  };\n\n  const onPointerUp = (e: PointerEvent) => {\n    if (e.pointerId === state.id) {\n      // cancel long press timer, if exists\n      if (state.longPressTimer) {\n        clearTimeout(state.longPressTimer);\n      }\n\n      const longPressTriggered = state.longPressTriggered;\n      state.longPressTriggered = false;\n\n      // only call onMoveEnd if we actually started moving\n      if (state.started) {\n        onMoveEnd?.(e);\n      }\n\n      if (state.el) {\n        // handle press only if event was not cancelled (via touch scroll on mobile for example)\n        if (e.type !== 'pointercancel') {\n          props.onPointerUp?.(e, state.el);\n\n          // only call onPress if pointer did not leave onPointerDown element\n          if (e.target && state.el.contains(e.target as HTMLElement)) {\n            // trigger either onPress or onLongPress\n            if (longPressTriggered) {\n              onLongPress?.(e, state.el);\n            } else {\n              onPress?.(e, state.el);\n            }\n          }\n        }\n\n        document.documentElement.style.userSelect =\n          state.originalUserSelect || '';\n        state.el.style.touchAction = state.originalTouchAction || '';\n      }\n      state.id = undefined;\n      state.started = false;\n      removeGlobalListener(window, 'pointermove', onPointerMove, false);\n      removeGlobalListener(window, 'pointerup', onPointerUp, false);\n      removeGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n\n  return {\n    domProps: {\n      onPointerDown: createEventHandler(onPointerDown),\n    },\n  };\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const LinkIcon = createSvgIcon(\n  <path d=\"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z\" />\n, 'LinkOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FileDownloadIcon = createSvgIcon(\n  <path d=\"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z\" />\n, 'FileDownloadOutlined');\n","import React, {useContext, useMemo} from 'react';\nimport {useSettings} from '@ui/settings/use-settings';\nimport {isAbsoluteUrl} from '@ui/utils/urls/is-absolute-url';\nimport {getBootstrapData} from '@ui/bootstrap-data/bootstrap-data-store';\n\nexport const FileEntryUrlsContext = React.createContext<\n  Record<string, string | number | null | undefined>\n>(null!);\n\ninterface PartialEntry {\n  url?: string;\n  hash: string;\n  file_name: string;\n  extension?: string;\n}\n\nexport function useFileEntryUrls(\n  entry?: PartialEntry,\n  options?: {thumbnail?: boolean; downloadHashes?: string[]},\n): {previewUrl?: string; downloadUrl?: string} {\n  const {base_url} = useSettings();\n  const urlSearchParams = useContext(FileEntryUrlsContext);\n\n  return useMemo(() => {\n    if (!entry) {\n      return {};\n    }\n\n    const previewUrl = buildPreviewUrl(entry, options?.thumbnail || false);\n\n    const urls = {\n      previewUrl,\n      downloadUrl: `${base_url}/api/v1/file-entries/download/${\n        options?.downloadHashes || entry.hash\n      }`,\n    };\n\n    if (urlSearchParams) {\n      // preview url\n      if (urls.previewUrl) {\n        urls.previewUrl = addParams(\n          urls.previewUrl,\n          {...urlSearchParams, thumbnail: options?.thumbnail ? 'true' : ''},\n          base_url,\n        );\n      }\n\n      // download url\n      urls.downloadUrl = addParams(urls.downloadUrl, urlSearchParams, base_url);\n    }\n\n    return urls;\n  }, [\n    base_url,\n    entry,\n    options?.downloadHashes,\n    options?.thumbnail,\n    urlSearchParams,\n  ]);\n}\n\nfunction buildPreviewUrl(\n  entry: PartialEntry,\n  thumbnail: boolean,\n): string | undefined {\n  if (!entry.url) return;\n\n  if (isAbsoluteUrl(entry.url)) {\n    if (thumbnail) {\n      // replace last instance of entry.file_name in entry.url with 'thumbnail'\n      const extension = entry.extension ?? 'jpg';\n      return entry.url.replace(\n        new RegExp(entry.file_name + '$'),\n        `thumbnail.${extension}`,\n      );\n    } else {\n      return entry.url;\n    }\n  }\n\n  return `${getBootstrapData().settings.base_url}/${entry.url}`;\n}\n\nfunction addParams(urlString: string, params: object, baseUrl: string): string {\n  const url = new URL(urlString, baseUrl);\n  Object.entries(params).forEach(([key, value]) => {\n    url.searchParams.append(key, value as string);\n  });\n  return url.toString();\n}\n","export function downloadFileFromUrl(url: string, name?: string) {\n  const link = document.createElement('a');\n  link.href = url;\n  if (name) link.download = name;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MoreVertIcon = createSvgIcon(\n  <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\n, 'MoreVertOutlined');\n","import {isMac} from '@react-aria/utils';\n\ninterface Event {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n}\n\nexport function isCtrlKeyPressed(e: Event) {\n  if (isMac()) {\n    return e.metaKey;\n  }\n\n  return e.ctrlKey;\n}\n","import React, {KeyboardEventHandler} from 'react';\nimport {getFocusableTreeWalker} from '@react-aria/focus';\nimport {focusWithoutScrolling} from '@react-aria/utils';\nimport {isCtrlKeyPressed} from '@ui/utils/keybinds/is-ctrl-key-pressed';\n\ninterface Props {\n  cellCount: number;\n  rowCount: number;\n}\nexport function useGridNavigation(props: Props) {\n  const {cellCount, rowCount} = props;\n  const onKeyDown: KeyboardEventHandler<HTMLElement> = e => {\n    switch (e.key) {\n      case 'ArrowLeft':\n        focusSiblingCell(e, {cell: {op: 'decrement'}}, props);\n        break;\n      case 'ArrowRight':\n        focusSiblingCell(e, {cell: {op: 'increment'}}, props);\n        break;\n      case 'ArrowUp':\n        focusSiblingCell(e, {row: {op: 'decrement'}}, props);\n        break;\n      case 'ArrowDown':\n        focusSiblingCell(e, {row: {op: 'increment'}}, props);\n        break;\n      case 'PageUp':\n        focusSiblingCell(e, {row: {op: 'decrement', count: 5}}, props);\n        break;\n      case 'PageDown':\n        focusSiblingCell(e, {row: {op: 'increment', count: 5}}, props);\n        break;\n      case 'Tab':\n        focusFirstElementAfterGrid(e);\n        break;\n      case 'Home':\n        if (isCtrlKeyPressed(e)) {\n          // move to first cell in first row\n          focusSiblingCell(\n            e,\n            {\n              row: {op: 'decrement', count: rowCount},\n              cell: {op: 'decrement', count: cellCount},\n            },\n            props,\n          );\n        } else {\n          // move to first cell in current row\n          focusSiblingCell(\n            e,\n            {cell: {op: 'decrement', count: cellCount}},\n            props,\n          );\n        }\n        break;\n      case 'End':\n        if (isCtrlKeyPressed(e)) {\n          // move to last cell in last row\n          focusSiblingCell(\n            e,\n            {\n              row: {op: 'increment', count: rowCount},\n              cell: {op: 'increment', count: cellCount},\n            },\n            props,\n          );\n        } else {\n          // move to last cell in current row\n          focusSiblingCell(\n            e,\n            {cell: {op: 'increment', count: cellCount}},\n            props,\n          );\n        }\n        break;\n    }\n  };\n\n  return {onKeyDown};\n}\n\ninterface Operations {\n  cell?: {\n    op: 'increment' | 'decrement';\n    count?: number;\n  };\n  row?: {\n    op: 'increment' | 'decrement';\n    count?: number;\n  };\n}\nfunction focusSiblingCell(\n  e: React.KeyboardEvent,\n  operations: Operations,\n  {cellCount, rowCount}: Props,\n) {\n  if (document.activeElement?.tagName === 'input') return;\n  e.preventDefault();\n  const grid = e.currentTarget as HTMLElement;\n\n  // focused element might be inside the cell and not the cell itself\n  const currentCell = (e.target as HTMLElement).closest('[aria-colindex]');\n  if (!currentCell || !grid) return;\n\n  const row = currentCell.closest('[aria-rowindex]');\n  if (!row) return;\n\n  // grab row and cell index from aria attributes\n  let rowIndex = parseInt(row.getAttribute('aria-rowindex') as string);\n  let cellIndex = parseInt(currentCell.getAttribute('aria-colindex') as string);\n  if (Number.isNaN(rowIndex) || Number.isNaN(cellIndex)) return;\n\n  // adjust row index for next cell selector\n  const rowOpCount = operations.row?.count ?? 1;\n  if (operations.row?.op === 'increment') {\n    rowIndex = Math.min(rowCount, rowIndex + rowOpCount);\n  } else if (operations.row?.op === 'decrement') {\n    rowIndex = Math.max(1, rowIndex - rowOpCount);\n  }\n\n  // adjust cell index for next cell selector\n  const cellOpCount = operations.cell?.count ?? 1;\n  if (operations.cell?.op === 'increment') {\n    cellIndex = Math.min(cellCount, cellIndex + cellOpCount);\n  } else if (operations.cell?.op === 'decrement') {\n    cellIndex = Math.max(1, cellIndex - cellOpCount);\n  }\n\n  // find the next cell that should be focused\n  const nextCell = grid.querySelector(\n    `[aria-rowindex=\"${rowIndex}\"] [aria-colindex=\"${cellIndex}\"]`,\n  ) as HTMLElement | undefined;\n  if (!nextCell) return;\n\n  // find any focusable elements inside the cell\n  const walker = getFocusableTreeWalker(nextCell);\n  const nextFocusableElement = (walker.nextNode() || nextCell) as HTMLElement;\n\n  // adjust tab index on current and next cells and focus either next cell or first focusable element inside that cell\n  currentCell.setAttribute('tabindex', '-1');\n  nextFocusableElement.setAttribute('tabindex', '0');\n  nextFocusableElement.focus();\n}\n\n// grid is treated as a single tab stop, focus first element after grid, instead of moving focus withing grid on tab press\nfunction focusFirstElementAfterGrid(e: React.KeyboardEvent) {\n  const grid = e.currentTarget as HTMLElement;\n  if (e.shiftKey) {\n    grid.focus();\n  } else {\n    const walker = getFocusableTreeWalker(grid, {tabbable: true});\n    let next: HTMLElement;\n    let last: HTMLElement;\n    do {\n      last = walker.lastChild() as HTMLElement;\n      if (last) {\n        next = last;\n      }\n    } while (last);\n\n    // @ts-ignore\n    if (next && !next.contains(document.activeElement)) {\n      focusWithoutScrolling(next);\n    }\n  }\n}\n","import {createContext} from 'react';\nimport type {SortDescriptor} from './types/sort-descriptor';\nimport type {TableProps} from './table';\nimport type {ColumnConfig} from '../../datatable/column-config';\nimport type {TableDataItem} from './types/table-data-item';\n\nexport type TableSelectionStyle = 'checkbox' | 'highlight';\n\nexport interface TableContextValue<T extends TableDataItem = TableDataItem> {\n  isCollapsedMode: boolean;\n  selectedRows: (string | number)[];\n  onSelectionChange: (keys: (string | number)[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (descriptor: SortDescriptor) => any;\n  enableSelection?: boolean;\n  enableSorting?: boolean;\n  selectionStyle: TableSelectionStyle;\n  data: T[];\n  meta?: any;\n  columns: ColumnConfig<T>[];\n  toggleRow: (item: T) => void;\n  selectRow: (item: T | null, merge?: boolean) => void;\n  hideBorder: boolean;\n  hideHeaderRow: boolean;\n  collapseOnMobile: boolean;\n  onAction: TableProps<T>['onAction'];\n  selectRowOnContextMenu: TableProps<T>['selectRowOnContextMenu'];\n  cellHeight: string | undefined;\n  headerCellHeight: string | undefined;\n}\nexport const TableContext = createContext<TableContextValue>(null!);\n","import clsx from 'clsx';\nimport {useContext} from 'react';\nimport {TableContext} from '@common/ui/tables/table-context';\n\ninterface Props {\n  index: number;\n  isHeader: boolean;\n}\nexport function useTableCellStyle({index, isHeader}: Props) {\n  const {\n    columns,\n    cellHeight = 'h-46',\n    headerCellHeight = 'h-46',\n  } = useContext(TableContext);\n  const column = columns[index];\n\n  const userPadding = column?.padding;\n\n  let justify = 'justify-start';\n  if (column?.align === 'center') {\n    justify = 'justify-center';\n  } else if (column?.align === 'end') {\n    justify = 'justify-end';\n  }\n\n  return clsx(\n    'flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2',\n    isHeader ? headerCellHeight : cellHeight,\n    column?.width ?? 'flex-1',\n    column?.maxWidth,\n    column?.minWidth,\n    justify,\n    userPadding,\n    column?.className\n  );\n}\n","import {useContext, useMemo} from 'react';\nimport {TableContext} from './table-context';\nimport {TableDataItem} from './types/table-data-item';\nimport {RowContext} from '@common/datatable/column-config';\nimport {useTableCellStyle} from '@common/ui/tables/style/use-table-cell-style';\n\ninterface TableCellProps {\n  rowIsHovered: boolean;\n  rowIndex: number;\n  index: number;\n  item: TableDataItem;\n  id?: string;\n}\nexport function TableCell({\n  rowIndex,\n  rowIsHovered,\n  index,\n  item,\n  id,\n}: TableCellProps) {\n  const {columns} = useContext(TableContext);\n  const column = columns[index];\n\n  const rowContext: RowContext = useMemo(() => {\n    return {\n      index: rowIndex,\n      isHovered: rowIsHovered,\n      isPlaceholder: item.isPlaceholder,\n    };\n  }, [rowIndex, rowIsHovered, item.isPlaceholder]);\n\n  const style = useTableCellStyle({\n    index: index,\n    isHeader: false,\n  });\n\n  return (\n    <div\n      tabIndex={-1}\n      role=\"gridcell\"\n      aria-colindex={index + 1}\n      id={id}\n      className={style}\n    >\n      <div className=\"w-full min-w-0 overflow-hidden overflow-ellipsis\">\n        {column.body(item, rowContext)}\n      </div>\n    </div>\n  );\n}\n","import {isCtrlKeyPressed} from '@ui/utils/keybinds/is-ctrl-key-pressed';\n\ninterface Event {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n  shiftKey: boolean;\n}\n\nexport function isCtrlOrShiftPressed(e: Event) {\n  return e.shiftKey || isCtrlKeyPressed(e);\n}\n","import clsx from 'clsx';\nimport {useContext} from 'react';\nimport {TableContext} from '@common/ui/tables/table-context';\nimport {useIsDarkMode} from '@ui/themes/use-is-dark-mode';\nimport {useIsMobileMediaQuery} from '@ui/utils/hooks/is-mobile-media-query';\n\ninterface Props {\n  index: number;\n  isSelected: boolean;\n  isHeader?: boolean;\n}\nexport function useTableRowStyle({index, isSelected, isHeader}: Props) {\n  const isDarkMode = useIsDarkMode();\n  const isMobile = useIsMobileMediaQuery();\n  const {hideBorder, enableSelection, collapseOnMobile, onAction} =\n    useContext(TableContext);\n  const isFirst = index === 0;\n  return clsx(\n    'flex gap-x-16 break-inside-avoid outline-none border border-transparent',\n    onAction && 'cursor-pointer',\n    isMobile && collapseOnMobile && hideBorder\n      ? 'mb-8 pl-8 pr-0 rounded'\n      : 'px-16',\n    !hideBorder && 'border-b-divider',\n    !hideBorder && isFirst && 'border-t-divider',\n    isSelected &&\n      !isDarkMode &&\n      'bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus',\n    isSelected &&\n      isDarkMode &&\n      'bg-selected hover:bg-focus focus-visible:bg-focus',\n    !isSelected &&\n      !isHeader &&\n      (enableSelection || onAction) &&\n      'focus-visible:bg-focus hover:bg-hover'\n  );\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  JSXElementConstructor,\n  KeyboardEventHandler,\n  MouseEventHandler,\n  useContext,\n  useRef,\n  useState,\n} from 'react';\nimport {TableContext} from '@common/ui/tables/table-context';\nimport {TableCell} from '@common/ui/tables/table-cell';\nimport {TableDataItem} from '@common/ui/tables/types/table-data-item';\nimport {createEventHandler} from '@ui/utils/dom/create-event-handler';\nimport {isCtrlOrShiftPressed} from '@ui/utils/keybinds/is-ctrl-or-shift-pressed';\nimport {useTableRowStyle} from '@common/ui/tables/style/use-table-row-style';\nimport clsx from 'clsx';\nimport {usePointerEvents} from '@ui/interactions/use-pointer-events';\n\nconst interactableElements = ['button', 'a', 'input', 'select', 'textarea'];\n\nexport interface RowElementProps<T = TableDataItem>\n  extends ComponentPropsWithoutRef<'tr'> {\n  item: T & {isPlaceholder?: boolean};\n}\n\ninterface TableRowProps {\n  item: TableDataItem;\n  index: number;\n  renderAs?: JSXElementConstructor<RowElementProps>;\n  className?: string;\n  style?: React.CSSProperties;\n}\nexport function TableRow({\n  item,\n  index,\n  renderAs,\n  className,\n  style,\n}: TableRowProps) {\n  const {\n    selectedRows,\n    columns,\n    toggleRow,\n    selectRow,\n    onAction,\n    selectRowOnContextMenu,\n    enableSelection,\n    selectionStyle,\n    hideHeaderRow,\n  } = useContext(TableContext);\n\n  const isTouchDevice = useRef(false);\n  const isSelected = selectedRows.includes(item.id);\n  const [isHovered, setIsHovered] = useState(false);\n\n  const clickedOnInteractable = (e: React.MouseEvent | PointerEvent) => {\n    return (e.target as HTMLElement).closest(interactableElements.join(','));\n  };\n\n  const doubleClickHandler: MouseEventHandler<HTMLDivElement> = e => {\n    if (\n      selectionStyle === 'highlight' &&\n      onAction &&\n      !isTouchDevice.current &&\n      !clickedOnInteractable(e)\n    ) {\n      e.preventDefault();\n      e.stopPropagation();\n      onAction(item, index);\n    }\n  };\n\n  const anyRowsSelected = !!selectedRows.length;\n\n  const handleRowTap = (e: PointerEvent) => {\n    if (clickedOnInteractable(e)) return;\n    if (selectionStyle === 'checkbox') {\n      if (enableSelection && (anyRowsSelected || !onAction)) {\n        toggleRow(item);\n      } else if (onAction) {\n        onAction(item, index);\n      }\n    } else if (selectionStyle === 'highlight') {\n      if (isTouchDevice.current) {\n        if (enableSelection && anyRowsSelected) {\n          toggleRow(item);\n        } else {\n          onAction?.(item, index);\n        }\n      } else if (enableSelection) {\n        selectRow(item, isCtrlOrShiftPressed(e));\n      }\n    }\n  };\n\n  const {domProps} = usePointerEvents({\n    onPointerDown: e => {\n      isTouchDevice.current = e.pointerType === 'touch';\n    },\n    onPress: handleRowTap,\n    onLongPress: enableSelection\n      ? () => {\n          if (isTouchDevice.current) {\n            toggleRow(item);\n          }\n        }\n      : undefined,\n  });\n\n  const keyboardHandler: KeyboardEventHandler = e => {\n    if (enableSelection && e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      if (selectionStyle === 'checkbox') {\n        toggleRow(item);\n      } else {\n        selectRow(item);\n      }\n    } else if (e.key === 'Enter' && !selectedRows.length && onAction) {\n      e.preventDefault();\n      e.stopPropagation();\n      onAction(item, index);\n    }\n  };\n\n  const contextMenuHandler: MouseEventHandler = e => {\n    if (selectRowOnContextMenu && enableSelection) {\n      if (!selectedRows.includes(item.id)) {\n        selectRow(item);\n      }\n    }\n    // prevent context menu on mobile\n    if (isTouchDevice.current) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  const styleClassName = useTableRowStyle({index, isSelected});\n\n  const RowElement = renderAs || 'div';\n  return (\n    <RowElement\n      role=\"row\"\n      aria-rowindex={index + 1 + (hideHeaderRow ? 0 : 1)}\n      aria-selected={isSelected}\n      tabIndex={-1}\n      className={clsx(className, styleClassName)}\n      item={RowElement === 'div' ? (undefined as any) : item}\n      onDoubleClick={createEventHandler(doubleClickHandler)}\n      onKeyDown={createEventHandler(keyboardHandler)}\n      onContextMenu={createEventHandler(contextMenuHandler)}\n      onPointerEnter={createEventHandler(() => setIsHovered(true))}\n      onPointerLeave={createEventHandler(() => setIsHovered(false))}\n      style={style}\n      {...domProps}\n    >\n      {columns.map((column, cellIndex) => (\n        <TableCell\n          rowIndex={index}\n          rowIsHovered={isHovered}\n          index={cellIndex}\n          item={item}\n          key={`${item.id}-${column.key}`}\n        />\n      ))}\n    </RowElement>\n  );\n}\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {TableDataItem} from '@common/ui/tables/types/table-data-item';\nimport {Skeleton} from '@ui/skeleton/skeleton';\nimport React, {useContext} from 'react';\nimport {Checkbox} from '@ui/forms/toggle/checkbox';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {TableContext} from '@common/ui/tables/table-context';\n\nexport const CheckboxColumnConfig: ColumnConfig<TableDataItem> = {\n  key: 'checkbox',\n  header: () => <SelectAllCheckbox />,\n  align: 'center',\n  width: 'w-24 flex-shrink-0',\n  body: (item, row) => {\n    if (row.isPlaceholder) {\n      return <Skeleton size=\"w-24 h-24\" variant=\"rect\" />;\n    }\n    return <SelectRowCheckbox item={item} />;\n  },\n};\n\ninterface SelectRowCheckboxProps {\n  item: TableDataItem;\n}\nfunction SelectRowCheckbox({item}: SelectRowCheckboxProps) {\n  const {selectedRows, toggleRow} = useContext(TableContext);\n  return (\n    <Checkbox\n      checked={selectedRows.includes(item.id)}\n      onChange={() => toggleRow(item)}\n    />\n  );\n}\n\nfunction SelectAllCheckbox() {\n  const {trans} = useTrans();\n\n  const {data, selectedRows, onSelectionChange} = useContext(TableContext);\n  const allRowsSelected = !!data.length && data.length === selectedRows.length;\n  const someRowsSelected = !allRowsSelected && !!selectedRows.length;\n\n  return (\n    <Checkbox\n      aria-label={trans({message: 'Select all'})}\n      isIndeterminate={someRowsSelected}\n      checked={allRowsSelected}\n      onChange={() => {\n        if (allRowsSelected) {\n          onSelectionChange([]);\n        } else {\n          onSelectionChange(data.map(d => d.id));\n        }\n      }}\n    />\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowDownwardIcon = createSvgIcon(\n  <path d=\"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\" />\n, 'ArrowDownwardOutlined');\n","import {useContext, useState} from 'react';\nimport clsx from 'clsx';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {TableContext} from './table-context';\nimport {SortDescriptor} from './types/sort-descriptor';\nimport {ArrowDownwardIcon} from '@ui/icons/material/ArrowDownward';\nimport {useTableCellStyle} from '@common/ui/tables/style/use-table-cell-style';\n\ninterface HeaderCellProps {\n  index: number;\n}\nexport function HeaderCell({index}: HeaderCellProps) {\n  const {columns, sortDescriptor, onSortChange, enableSorting} =\n    useContext(TableContext);\n  const column = columns[index];\n\n  const style = useTableCellStyle({\n    index: index,\n    isHeader: true,\n  });\n\n  const [isHovered, setIsHovered] = useState(false);\n\n  const sortingKey = column.sortingKey || column.key;\n  const allowSorting = column.allowsSorting && enableSorting;\n  const {orderBy, orderDir} = sortDescriptor || {};\n\n  const sortActive = allowSorting && orderBy === sortingKey;\n\n  let ariaSort: 'ascending' | 'descending' | 'none' | undefined;\n  if (sortActive && orderDir === 'asc') {\n    ariaSort = 'ascending';\n  } else if (sortActive && orderDir === 'desc') {\n    ariaSort = 'descending';\n  } else if (allowSorting) {\n    ariaSort = 'none';\n  }\n\n  const toggleSorting = () => {\n    if (!allowSorting) return;\n\n    let newSort: SortDescriptor;\n\n    // if this col was sorted desc, go to asc\n    if (sortActive && orderDir === 'desc') {\n      newSort = {orderDir: 'asc', orderBy: sortingKey};\n\n      // if this col was sorted asc, clear sort\n    } else if (sortActive && orderDir === 'asc') {\n      newSort = {orderBy: undefined, orderDir: undefined};\n\n      // if sort was on another col, or no sort was applied yet, start from desc\n    } else {\n      newSort = {orderDir: 'desc', orderBy: sortingKey};\n    }\n\n    onSortChange?.(newSort);\n  };\n\n  const sortVisible = sortActive || isHovered;\n  const sortVariants = {\n    visible: {opacity: 1, y: 0},\n    hidden: {opacity: 0, y: '-25%'},\n  };\n\n  return (\n    <div\n      role=\"columnheader\"\n      tabIndex={-1}\n      aria-colindex={index + 1}\n      aria-sort={ariaSort}\n      className={clsx(\n        style,\n        'text-xs font-medium text-muted',\n        allowSorting && 'cursor-pointer',\n      )}\n      onMouseEnter={() => {\n        setIsHovered(true);\n      }}\n      onMouseLeave={() => {\n        setIsHovered(false);\n      }}\n      onKeyDown={e => {\n        if (e.key === ' ' || e.key === 'Enter') {\n          e.preventDefault();\n          toggleSorting();\n        }\n      }}\n      onClick={toggleSorting}\n    >\n      {column.hideHeader ? (\n        <div className=\"opacity-0\">{column.header()}</div>\n      ) : (\n        column.header()\n      )}\n      <AnimatePresence>\n        {allowSorting && (\n          <m.span\n            variants={sortVariants}\n            animate={sortVisible ? 'visible' : 'hidden'}\n            initial={false}\n            transition={{type: 'tween'}}\n            key=\"sort-icon\"\n            className=\"-mt-2 ml-6 inline-block\"\n            data-testid=\"table-sort-button\"\n            aria-hidden={!sortVisible}\n          >\n            <ArrowDownwardIcon\n              size=\"xs\"\n              className={clsx(\n                'text-muted',\n                orderDir === 'asc' &&\n                  orderBy === sortingKey &&\n                  'rotate-180 transition-transform',\n              )}\n            />\n          </m.span>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","import {HeaderCell} from '@common/ui/tables/header-cell';\nimport React, {useContext} from 'react';\nimport {TableContext} from '@common/ui/tables/table-context';\n\nexport function TableHeaderRow() {\n  const {columns} = useContext(TableContext);\n  return (\n    <div\n      role=\"row\"\n      aria-rowindex={1}\n      tabIndex={-1}\n      className=\"flex gap-x-16 px-16\"\n    >\n      {columns.map((column, columnIndex) => (\n        <HeaderCell index={columnIndex} key={column.key} />\n      ))}\n    </div>\n  );\n}\n","import React, {\n  cloneElement,\n  ComponentPropsWithoutRef,\n  Fragment,\n  JSXElementConstructor,\n  MutableRefObject,\n  ReactElement,\n  useCallback,\n  useContext,\n  useMemo,\n} from 'react';\nimport {useControlledState} from '@react-stately/utils';\nimport {SortDescriptor} from './types/sort-descriptor';\nimport {useGridNavigation} from './navigate-grid';\nimport {RowElementProps, TableRow} from './table-row';\nimport {\n  TableContext,\n  TableContextValue,\n  TableSelectionStyle,\n} from './table-context';\nimport {ColumnConfig} from '../../datatable/column-config';\nimport {TableDataItem} from './types/table-data-item';\nimport clsx from 'clsx';\nimport {useInteractOutside} from '@react-aria/interactions';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {isCtrlKeyPressed} from '@ui/utils/keybinds/is-ctrl-key-pressed';\nimport {useIsMobileMediaQuery} from '@ui/utils/hooks/is-mobile-media-query';\nimport {CheckboxColumnConfig} from '@common/ui/tables/checkbox-column-config';\nimport {TableHeaderRow} from '@common/ui/tables/table-header-row';\n\nexport interface TableProps<T extends TableDataItem>\n  extends ComponentPropsWithoutRef<'table'> {\n  className?: string;\n  columns: ColumnConfig<T>[];\n  hideHeaderRow?: boolean;\n  data: T[];\n  meta?: any;\n  tableRef?: MutableRefObject<HTMLTableElement>;\n  selectedRows?: (number | string)[];\n  defaultSelectedRows?: (number | string)[];\n  onSelectionChange?: (keys: (number | string)[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (descriptor: SortDescriptor) => any;\n  enableSorting?: boolean;\n  onDelete?: (items: T[]) => void;\n  enableSelection?: boolean;\n  selectionStyle?: TableSelectionStyle;\n  ariaLabelledBy?: string;\n  onAction?: (item: T, index: number) => void;\n  selectRowOnContextMenu?: boolean;\n  renderRowAs?: JSXElementConstructor<RowElementProps<T>>;\n  tableBody?: ReactElement<TableBodyProps>;\n  hideBorder?: boolean;\n  closeOnInteractOutside?: boolean;\n  collapseOnMobile?: boolean;\n  cellHeight?: string;\n  headerCellHeight?: string;\n}\nexport function Table<T extends TableDataItem>({\n  className,\n  columns: userColumns,\n  collapseOnMobile = true,\n  hideHeaderRow = false,\n  hideBorder = false,\n  data,\n  selectedRows: propsSelectedRows,\n  defaultSelectedRows: propsDefaultSelectedRows,\n  onSelectionChange: propsOnSelectionChange,\n  sortDescriptor: propsSortDescriptor,\n  onSortChange: propsOnSortChange,\n  enableSorting = true,\n  onDelete,\n  enableSelection = true,\n  selectionStyle = 'checkbox',\n  ariaLabelledBy,\n  selectRowOnContextMenu,\n  onAction,\n  renderRowAs,\n  tableBody,\n  meta,\n  tableRef: propsTableRef,\n  closeOnInteractOutside = false,\n  cellHeight,\n  headerCellHeight,\n  ...domProps\n}: TableProps<T>) {\n  const isMobile = useIsMobileMediaQuery();\n  const isCollapsedMode = !!isMobile && collapseOnMobile;\n  if (isCollapsedMode) {\n    hideHeaderRow = true;\n    hideBorder = true;\n  }\n\n  const [selectedRows, onSelectionChange] = useControlledState(\n    propsSelectedRows,\n    propsDefaultSelectedRows || [],\n    propsOnSelectionChange,\n  );\n\n  const [sortDescriptor, onSortChange] = useControlledState(\n    propsSortDescriptor,\n    undefined,\n    propsOnSortChange,\n  );\n\n  const toggleRow = useCallback(\n    (item: TableDataItem) => {\n      const newValues = [...selectedRows];\n      if (!newValues.includes(item.id)) {\n        newValues.push(item.id);\n      } else {\n        const index = newValues.indexOf(item.id);\n        newValues.splice(index, 1);\n      }\n      onSelectionChange(newValues);\n    },\n    [selectedRows, onSelectionChange],\n  );\n\n  const selectRow = useCallback(\n    // allow deselecting all rows by passing in null\n    (item: TableDataItem | null, merge?: boolean) => {\n      let newValues: (string | number)[] = [];\n      if (item) {\n        newValues = merge\n          ? [...selectedRows?.filter(id => id !== item.id), item.id]\n          : [item.id];\n      }\n      onSelectionChange(newValues);\n    },\n    [selectedRows, onSelectionChange],\n  );\n\n  // add checkbox columns to config, if selection is enabled\n  const columns = useMemo(() => {\n    const filteredColumns = userColumns.filter(c => {\n      const visibleInMode = c.visibleInMode || 'regular';\n      if (visibleInMode === 'all') {\n        return true;\n      }\n      if (visibleInMode === 'compact' && isCollapsedMode) {\n        return true;\n      }\n      if (visibleInMode === 'regular' && !isCollapsedMode) {\n        return true;\n      }\n    });\n    const showCheckboxCell =\n      enableSelection && selectionStyle !== 'highlight' && !isMobile;\n    if (showCheckboxCell) {\n      filteredColumns.unshift(CheckboxColumnConfig);\n    }\n    return filteredColumns;\n  }, [isMobile, userColumns, enableSelection, selectionStyle, isCollapsedMode]);\n\n  const contextValue: TableContextValue<T> = {\n    isCollapsedMode,\n    cellHeight,\n    headerCellHeight,\n    hideBorder,\n    hideHeaderRow,\n    selectedRows,\n    onSelectionChange,\n    enableSorting,\n    enableSelection,\n    selectionStyle,\n    data,\n    columns,\n    sortDescriptor,\n    onSortChange,\n    toggleRow,\n    selectRow,\n    onAction,\n    selectRowOnContextMenu,\n    meta,\n    collapseOnMobile,\n  };\n\n  const navProps = useGridNavigation({\n    cellCount: enableSelection ? columns.length + 1 : columns.length,\n    rowCount: data.length + 1,\n  });\n\n  const tableBodyProps: TableBodyProps = {\n    renderRowAs: renderRowAs as any,\n  };\n\n  if (!tableBody) {\n    tableBody = <BasicTableBody {...tableBodyProps} />;\n  } else {\n    tableBody = cloneElement(tableBody, tableBodyProps);\n  }\n\n  // deselect rows when clicking outside the table\n  const tableRef = useObjectRef(propsTableRef);\n  useInteractOutside({\n    ref: tableRef,\n    onInteractOutside: e => {\n      if (\n        closeOnInteractOutside &&\n        enableSelection &&\n        selectedRows?.length &&\n        // don't deselect if clicking on a dialog (for example is table row has a context menu)\n        !(e.target as HTMLElement).closest('[role=\"dialog\"]')\n      ) {\n        onSelectionChange([]);\n      }\n    },\n  });\n\n  return (\n    <TableContext.Provider value={contextValue as any}>\n      <div\n        {...mergeProps(domProps, navProps, {\n          onKeyDown: (e: KeyboardEvent) => {\n            if (e.key === 'Escape') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (selectedRows?.length) {\n                onSelectionChange([]);\n              }\n            } else if (e.key === 'Delete') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (selectedRows?.length) {\n                onDelete?.(\n                  data.filter(item => selectedRows?.includes(item.id)),\n                );\n              }\n            } else if (isCtrlKeyPressed(e) && e.key === 'a') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (enableSelection) {\n                onSelectionChange(data.map(item => item.id));\n              }\n            }\n          },\n        })}\n        role=\"grid\"\n        tabIndex={0}\n        aria-rowcount={data.length + 1}\n        aria-colcount={columns.length + 1}\n        ref={tableRef}\n        aria-multiselectable={enableSelection ? true : undefined}\n        aria-labelledby={ariaLabelledBy}\n        className={clsx(\n          className,\n          'isolate select-none text-sm outline-none focus-visible:ring-2',\n        )}\n      >\n        {!hideHeaderRow && <TableHeaderRow />}\n        {tableBody}\n      </div>\n    </TableContext.Provider>\n  );\n}\n\nexport interface TableBodyProps {\n  renderRowAs?: TableProps<TableDataItem>['renderRowAs'];\n}\nfunction BasicTableBody({renderRowAs}: TableBodyProps) {\n  const {data} = useContext(TableContext);\n  return (\n    <Fragment>\n      {data.map((item, rowIndex) => (\n        <TableRow\n          item={item}\n          index={rowIndex}\n          key={item.id}\n          renderAs={renderRowAs}\n        />\n      ))}\n    </Fragment>\n  );\n}\n","import clsx from 'clsx';\nimport {FileTypeIcon} from './file-type-icon';\nimport {useFileEntryUrls} from '../../file-entry-urls';\nimport {useTrans} from '@ui/i18n/use-trans';\n\nconst TwoMB = 2 * 1024 * 1024;\n\ninterface Props {\n  file: {\n    name: string;\n    type: string;\n    thumbnail?: boolean;\n    file_size?: number;\n    hash: string;\n    file_name: string;\n    url?: string;\n  };\n  className?: string;\n  iconClassName?: string;\n  showImage?: boolean;\n}\nexport function FileThumbnail({\n  file,\n  className,\n  iconClassName,\n  showImage = true,\n}: Props) {\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(file, {thumbnail: true});\n\n  // don't show images for files larger than 2MB, if thumbnail was not generated to avoid ui lag\n  if (file.file_size && file.file_size > TwoMB && !file.thumbnail) {\n    showImage = false;\n  }\n\n  if (showImage && file.type === 'image' && previewUrl) {\n    const alt = trans({\n      message: ':fileName thumbnail',\n      values: {fileName: file.name},\n    });\n    return (\n      <img\n        className={clsx(className, 'object-cover')}\n        src={previewUrl}\n        alt={alt}\n        draggable={false}\n      />\n    );\n  }\n  return <FileTypeIcon className={iconClassName} type={file.type} />;\n}\n","/**\n * react-virtual\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nexport { _extends as extends };\n//# sourceMappingURL=_rollupPluginBabelHelpers.mjs.map\n","/**\n * virtual-core\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nexport { _extends as extends };\n//# sourceMappingURL=_rollupPluginBabelHelpers.mjs.map\n","/**\n * virtual-core\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nfunction memo(getDeps, fn, opts) {\n  var _opts$initialDeps;\n  var deps = (_opts$initialDeps = opts.initialDeps) != null ? _opts$initialDeps : [];\n  var result;\n  return function () {\n    var depTime;\n    if (opts.key && opts.debug != null && opts.debug()) depTime = Date.now();\n    var newDeps = getDeps();\n    var depsChanged = newDeps.length !== deps.length || newDeps.some(function (dep, index) {\n      return deps[index] !== dep;\n    });\n    if (!depsChanged) {\n      return result;\n    }\n    deps = newDeps;\n    var resultTime;\n    if (opts.key && opts.debug != null && opts.debug()) resultTime = Date.now();\n    result = fn.apply(void 0, newDeps);\n    if (opts.key && opts.debug != null && opts.debug()) {\n      var depEndTime = Math.round((Date.now() - depTime) * 100) / 100;\n      var resultEndTime = Math.round((Date.now() - resultTime) * 100) / 100;\n      var resultFpsPercentage = resultEndTime / 16;\n      var pad = function pad(str, num) {\n        str = String(str);\n        while (str.length < num) {\n          str = ' ' + str;\n        }\n        return str;\n      };\n      console.info(\"%c\\u23F1 \" + pad(resultEndTime, 5) + \" /\" + pad(depEndTime, 5) + \" ms\", \"\\n            font-size: .6rem;\\n            font-weight: bold;\\n            color: hsl(\" + Math.max(0, Math.min(120 - 120 * resultFpsPercentage, 120)) + \"deg 100% 31%);\", opts == null ? void 0 : opts.key);\n    }\n    opts == null ? void 0 : opts.onChange == null ? void 0 : opts.onChange(result);\n    return result;\n  };\n}\nfunction notUndefined(value, msg) {\n  if (value === undefined) {\n    throw new Error(\"Unexpected undefined\" + (msg ? \": \" + msg : ''));\n  } else {\n    return value;\n  }\n}\nvar approxEqual = function approxEqual(a, b) {\n  return Math.abs(a - b) < 1;\n};\n\nexport { approxEqual, memo, notUndefined };\n//# sourceMappingURL=utils.mjs.map\n","/**\n * virtual-core\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport { extends as _extends } from './_virtual/_rollupPluginBabelHelpers.mjs';\nimport { memo, notUndefined, approxEqual } from './utils.mjs';\nexport { approxEqual, memo, notUndefined } from './utils.mjs';\n\n//\n\n//\n\nvar defaultKeyExtractor = function defaultKeyExtractor(index) {\n  return index;\n};\nvar defaultRangeExtractor = function defaultRangeExtractor(range) {\n  var start = Math.max(range.startIndex - range.overscan, 0);\n  var end = Math.min(range.endIndex + range.overscan, range.count - 1);\n  var arr = [];\n  for (var _i = start; _i <= end; _i++) {\n    arr.push(_i);\n  }\n  return arr;\n};\nvar observeElementRect = function observeElementRect(instance, cb) {\n  var element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  var handler = function handler(rect) {\n    var width = rect.width,\n      height = rect.height;\n    cb({\n      width: Math.round(width),\n      height: Math.round(height)\n    });\n  };\n  handler(element.getBoundingClientRect());\n  var observer = new ResizeObserver(function (entries) {\n    var entry = entries[0];\n    if (entry != null && entry.borderBoxSize) {\n      var box = entry.borderBoxSize[0];\n      if (box) {\n        handler({\n          width: box.inlineSize,\n          height: box.blockSize\n        });\n        return;\n      }\n    }\n    handler(element.getBoundingClientRect());\n  });\n  observer.observe(element, {\n    box: 'border-box'\n  });\n  return function () {\n    observer.unobserve(element);\n  };\n};\nvar observeWindowRect = function observeWindowRect(instance, cb) {\n  var element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  var handler = function handler() {\n    cb({\n      width: element.innerWidth,\n      height: element.innerHeight\n    });\n  };\n  handler();\n  element.addEventListener('resize', handler, {\n    passive: true\n  });\n  return function () {\n    element.removeEventListener('resize', handler);\n  };\n};\nvar observeElementOffset = function observeElementOffset(instance, cb) {\n  var element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  var handler = function handler() {\n    cb(element[instance.options.horizontal ? 'scrollLeft' : 'scrollTop']);\n  };\n  handler();\n  element.addEventListener('scroll', handler, {\n    passive: true\n  });\n  return function () {\n    element.removeEventListener('scroll', handler);\n  };\n};\nvar observeWindowOffset = function observeWindowOffset(instance, cb) {\n  var element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  var handler = function handler() {\n    cb(element[instance.options.horizontal ? 'scrollX' : 'scrollY']);\n  };\n  handler();\n  element.addEventListener('scroll', handler, {\n    passive: true\n  });\n  return function () {\n    element.removeEventListener('scroll', handler);\n  };\n};\nvar measureElement = function measureElement(element, entry, instance) {\n  if (entry != null && entry.borderBoxSize) {\n    var box = entry.borderBoxSize[0];\n    if (box) {\n      var size = Math.round(box[instance.options.horizontal ? 'inlineSize' : 'blockSize']);\n      return size;\n    }\n  }\n  return Math.round(element.getBoundingClientRect()[instance.options.horizontal ? 'width' : 'height']);\n};\nvar windowScroll = function windowScroll(offset, _ref, instance) {\n  var _instance$scrollEleme, _instance$scrollEleme2;\n  var _ref$adjustments = _ref.adjustments,\n    adjustments = _ref$adjustments === void 0 ? 0 : _ref$adjustments,\n    behavior = _ref.behavior;\n  var toOffset = offset + adjustments;\n  (_instance$scrollEleme = instance.scrollElement) == null ? void 0 : _instance$scrollEleme.scrollTo == null ? void 0 : _instance$scrollEleme.scrollTo((_instance$scrollEleme2 = {}, _instance$scrollEleme2[instance.options.horizontal ? 'left' : 'top'] = toOffset, _instance$scrollEleme2.behavior = behavior, _instance$scrollEleme2));\n};\nvar elementScroll = function elementScroll(offset, _ref2, instance) {\n  var _instance$scrollEleme3, _instance$scrollEleme4;\n  var _ref2$adjustments = _ref2.adjustments,\n    adjustments = _ref2$adjustments === void 0 ? 0 : _ref2$adjustments,\n    behavior = _ref2.behavior;\n  var toOffset = offset + adjustments;\n  (_instance$scrollEleme3 = instance.scrollElement) == null ? void 0 : _instance$scrollEleme3.scrollTo == null ? void 0 : _instance$scrollEleme3.scrollTo((_instance$scrollEleme4 = {}, _instance$scrollEleme4[instance.options.horizontal ? 'left' : 'top'] = toOffset, _instance$scrollEleme4.behavior = behavior, _instance$scrollEleme4));\n};\nvar Virtualizer = function Virtualizer(_opts) {\n  var _this = this;\n  this.unsubs = [];\n  this.scrollElement = null;\n  this.isScrolling = false;\n  this.isScrollingTimeoutId = null;\n  this.scrollToIndexTimeoutId = null;\n  this.measurementsCache = [];\n  this.itemSizeCache = new Map();\n  this.pendingMeasuredCacheIndexes = [];\n  this.scrollDirection = null;\n  this.scrollAdjustments = 0;\n  this.measureElementCache = new Map();\n  this.observer = function () {\n    var _ro = null;\n    var get = function get() {\n      if (_ro) {\n        return _ro;\n      } else if (typeof ResizeObserver !== 'undefined') {\n        return _ro = new ResizeObserver(function (entries) {\n          entries.forEach(function (entry) {\n            _this._measureElement(entry.target, entry);\n          });\n        });\n      } else {\n        return null;\n      }\n    };\n    return {\n      disconnect: function disconnect() {\n        var _get;\n        return (_get = get()) == null ? void 0 : _get.disconnect();\n      },\n      observe: function observe(target) {\n        var _get2;\n        return (_get2 = get()) == null ? void 0 : _get2.observe(target, {\n          box: 'border-box'\n        });\n      },\n      unobserve: function unobserve(target) {\n        var _get3;\n        return (_get3 = get()) == null ? void 0 : _get3.unobserve(target);\n      }\n    };\n  }();\n  this.range = null;\n  this.setOptions = function (opts) {\n    Object.entries(opts).forEach(function (_ref3) {\n      var key = _ref3[0],\n        value = _ref3[1];\n      if (typeof value === 'undefined') delete opts[key];\n    });\n    _this.options = _extends({\n      debug: false,\n      initialOffset: 0,\n      overscan: 1,\n      paddingStart: 0,\n      paddingEnd: 0,\n      scrollPaddingStart: 0,\n      scrollPaddingEnd: 0,\n      horizontal: false,\n      getItemKey: defaultKeyExtractor,\n      rangeExtractor: defaultRangeExtractor,\n      onChange: function onChange() {},\n      measureElement: measureElement,\n      initialRect: {\n        width: 0,\n        height: 0\n      },\n      scrollMargin: 0,\n      scrollingDelay: 150,\n      indexAttribute: 'data-index',\n      initialMeasurementsCache: [],\n      lanes: 1\n    }, opts);\n  };\n  this.notify = function (sync) {\n    _this.options.onChange == null ? void 0 : _this.options.onChange(_this, sync);\n  };\n  this.maybeNotify = memo(function () {\n    _this.calculateRange();\n    return [_this.isScrolling, _this.range ? _this.range.startIndex : null, _this.range ? _this.range.endIndex : null];\n  }, function (isScrolling) {\n    _this.notify(isScrolling);\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'maybeNotify',\n    debug: function debug() {\n      return _this.options.debug;\n    },\n    initialDeps: [this.isScrolling, this.range ? this.range.startIndex : null, this.range ? this.range.endIndex : null]\n  });\n  this.cleanup = function () {\n    _this.unsubs.filter(Boolean).forEach(function (d) {\n      return d();\n    });\n    _this.unsubs = [];\n    _this.scrollElement = null;\n  };\n  this._didMount = function () {\n    _this.measureElementCache.forEach(_this.observer.observe);\n    return function () {\n      _this.observer.disconnect();\n      _this.cleanup();\n    };\n  };\n  this._willUpdate = function () {\n    var scrollElement = _this.options.getScrollElement();\n    if (_this.scrollElement !== scrollElement) {\n      _this.cleanup();\n      _this.scrollElement = scrollElement;\n      _this._scrollToOffset(_this.scrollOffset, {\n        adjustments: undefined,\n        behavior: undefined\n      });\n      _this.unsubs.push(_this.options.observeElementRect(_this, function (rect) {\n        _this.scrollRect = rect;\n        _this.maybeNotify();\n      }));\n      _this.unsubs.push(_this.options.observeElementOffset(_this, function (offset) {\n        _this.scrollAdjustments = 0;\n        if (_this.scrollOffset === offset) {\n          return;\n        }\n        if (_this.isScrollingTimeoutId !== null) {\n          clearTimeout(_this.isScrollingTimeoutId);\n          _this.isScrollingTimeoutId = null;\n        }\n        _this.isScrolling = true;\n        _this.scrollDirection = _this.scrollOffset < offset ? 'forward' : 'backward';\n        _this.scrollOffset = offset;\n        _this.maybeNotify();\n        _this.isScrollingTimeoutId = setTimeout(function () {\n          _this.isScrollingTimeoutId = null;\n          _this.isScrolling = false;\n          _this.scrollDirection = null;\n          _this.maybeNotify();\n        }, _this.options.scrollingDelay);\n      }));\n    }\n  };\n  this.getSize = function () {\n    return _this.scrollRect[_this.options.horizontal ? 'width' : 'height'];\n  };\n  this.memoOptions = memo(function () {\n    return [_this.options.count, _this.options.paddingStart, _this.options.scrollMargin, _this.options.getItemKey];\n  }, function (count, paddingStart, scrollMargin, getItemKey) {\n    _this.pendingMeasuredCacheIndexes = [];\n    return {\n      count: count,\n      paddingStart: paddingStart,\n      scrollMargin: scrollMargin,\n      getItemKey: getItemKey\n    };\n  }, {\n    key: false\n  });\n  this.getFurthestMeasurement = function (measurements, index) {\n    var furthestMeasurementsFound = new Map();\n    var furthestMeasurements = new Map();\n    for (var m = index - 1; m >= 0; m--) {\n      var measurement = measurements[m];\n      if (furthestMeasurementsFound.has(measurement.lane)) {\n        continue;\n      }\n      var previousFurthestMeasurement = furthestMeasurements.get(measurement.lane);\n      if (previousFurthestMeasurement == null || measurement.end > previousFurthestMeasurement.end) {\n        furthestMeasurements.set(measurement.lane, measurement);\n      } else if (measurement.end < previousFurthestMeasurement.end) {\n        furthestMeasurementsFound.set(measurement.lane, true);\n      }\n      if (furthestMeasurementsFound.size === _this.options.lanes) {\n        break;\n      }\n    }\n    return furthestMeasurements.size === _this.options.lanes ? Array.from(furthestMeasurements.values()).sort(function (a, b) {\n      return a.end - b.end;\n    })[0] : undefined;\n  };\n  this.getMeasurements = memo(function () {\n    return [_this.memoOptions(), _this.itemSizeCache];\n  }, function (_ref4, itemSizeCache) {\n    var count = _ref4.count,\n      paddingStart = _ref4.paddingStart,\n      scrollMargin = _ref4.scrollMargin,\n      getItemKey = _ref4.getItemKey;\n    var min = _this.pendingMeasuredCacheIndexes.length > 0 ? Math.min.apply(Math, _this.pendingMeasuredCacheIndexes) : 0;\n    _this.pendingMeasuredCacheIndexes = [];\n    var measurements = _this.measurementsCache.slice(0, min);\n    for (var _i2 = min; _i2 < count; _i2++) {\n      var key = getItemKey(_i2);\n      var furthestMeasurement = _this.options.lanes === 1 ? measurements[_i2 - 1] : _this.getFurthestMeasurement(measurements, _i2);\n      var start = furthestMeasurement ? furthestMeasurement.end : paddingStart + scrollMargin;\n      var measuredSize = itemSizeCache.get(key);\n      var size = typeof measuredSize === 'number' ? measuredSize : _this.options.estimateSize(_i2);\n      var end = start + size;\n      var lane = furthestMeasurement ? furthestMeasurement.lane : _i2 % _this.options.lanes;\n      measurements[_i2] = {\n        index: _i2,\n        start: start,\n        size: size,\n        end: end,\n        key: key,\n        lane: lane\n      };\n    }\n    _this.measurementsCache = measurements;\n    return measurements;\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'getMeasurements',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.calculateRange = memo(function () {\n    return [_this.getMeasurements(), _this.getSize(), _this.scrollOffset];\n  }, function (measurements, outerSize, scrollOffset) {\n    return _this.range = measurements.length > 0 && outerSize > 0 ? calculateRange({\n      measurements: measurements,\n      outerSize: outerSize,\n      scrollOffset: scrollOffset\n    }) : null;\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'calculateRange',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.getIndexes = memo(function () {\n    return [_this.options.rangeExtractor, _this.calculateRange(), _this.options.overscan, _this.options.count];\n  }, function (rangeExtractor, range, overscan, count) {\n    return range === null ? [] : rangeExtractor(_extends({}, range, {\n      overscan: overscan,\n      count: count\n    }));\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'getIndexes',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.indexFromElement = function (node) {\n    var attributeName = _this.options.indexAttribute;\n    var indexStr = node.getAttribute(attributeName);\n    if (!indexStr) {\n      console.warn(\"Missing attribute name '\" + attributeName + \"={index}' on measured element.\");\n      return -1;\n    }\n    return parseInt(indexStr, 10);\n  };\n  this._measureElement = function (node, entry) {\n    var item = _this.measurementsCache[_this.indexFromElement(node)];\n    if (!item || !node.isConnected) {\n      _this.measureElementCache.forEach(function (cached, key) {\n        if (cached === node) {\n          _this.observer.unobserve(node);\n          _this.measureElementCache[\"delete\"](key);\n        }\n      });\n      return;\n    }\n    var prevNode = _this.measureElementCache.get(item.key);\n    if (prevNode !== node) {\n      if (prevNode) {\n        _this.observer.unobserve(prevNode);\n      }\n      _this.observer.observe(node);\n      _this.measureElementCache.set(item.key, node);\n    }\n    var measuredItemSize = _this.options.measureElement(node, entry, _this);\n    _this.resizeItem(item, measuredItemSize);\n  };\n  this.resizeItem = function (item, size) {\n    var _this$itemSizeCache$g;\n    var itemSize = (_this$itemSizeCache$g = _this.itemSizeCache.get(item.key)) != null ? _this$itemSizeCache$g : item.size;\n    var delta = size - itemSize;\n    if (delta !== 0) {\n      if (item.start < _this.scrollOffset) {\n        if (process.env.NODE_ENV !== 'production' && _this.options.debug) {\n          console.info('correction', delta);\n        }\n        _this._scrollToOffset(_this.scrollOffset, {\n          adjustments: _this.scrollAdjustments += delta,\n          behavior: undefined\n        });\n      }\n      _this.pendingMeasuredCacheIndexes.push(item.index);\n      _this.itemSizeCache = new Map(_this.itemSizeCache.set(item.key, size));\n      _this.notify(false);\n    }\n  };\n  this.measureElement = function (node) {\n    if (!node) {\n      return;\n    }\n    _this._measureElement(node, undefined);\n  };\n  this.getVirtualItems = memo(function () {\n    return [_this.getIndexes(), _this.getMeasurements()];\n  }, function (indexes, measurements) {\n    var virtualItems = [];\n    for (var k = 0, len = indexes.length; k < len; k++) {\n      var _i3 = indexes[k];\n      var measurement = measurements[_i3];\n      virtualItems.push(measurement);\n    }\n    return virtualItems;\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'getIndexes',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.getVirtualItemForOffset = function (offset) {\n    var measurements = _this.getMeasurements();\n    return notUndefined(measurements[findNearestBinarySearch(0, measurements.length - 1, function (index) {\n      return notUndefined(measurements[index]).start;\n    }, offset)]);\n  };\n  this.getOffsetForAlignment = function (toOffset, align) {\n    var size = _this.getSize();\n    if (align === 'auto') {\n      if (toOffset <= _this.scrollOffset) {\n        align = 'start';\n      } else if (toOffset >= _this.scrollOffset + size) {\n        align = 'end';\n      } else {\n        align = 'start';\n      }\n    }\n    if (align === 'start') {\n      toOffset = toOffset;\n    } else if (align === 'end') {\n      toOffset = toOffset - size;\n    } else if (align === 'center') {\n      toOffset = toOffset - size / 2;\n    }\n    var scrollSizeProp = _this.options.horizontal ? 'scrollWidth' : 'scrollHeight';\n    var scrollSize = _this.scrollElement ? 'document' in _this.scrollElement ? _this.scrollElement.document.documentElement[scrollSizeProp] : _this.scrollElement[scrollSizeProp] : 0;\n    var maxOffset = scrollSize - _this.getSize();\n    return Math.max(Math.min(maxOffset, toOffset), 0);\n  };\n  this.getOffsetForIndex = function (index, align) {\n    if (align === void 0) {\n      align = 'auto';\n    }\n    index = Math.max(0, Math.min(index, _this.options.count - 1));\n    var measurement = notUndefined(_this.getMeasurements()[index]);\n    if (align === 'auto') {\n      if (measurement.end >= _this.scrollOffset + _this.getSize() - _this.options.scrollPaddingEnd) {\n        align = 'end';\n      } else if (measurement.start <= _this.scrollOffset + _this.options.scrollPaddingStart) {\n        align = 'start';\n      } else {\n        return [_this.scrollOffset, align];\n      }\n    }\n    var toOffset = align === 'end' ? measurement.end + _this.options.scrollPaddingEnd : measurement.start - _this.options.scrollPaddingStart;\n    return [_this.getOffsetForAlignment(toOffset, align), align];\n  };\n  this.isDynamicMode = function () {\n    return _this.measureElementCache.size > 0;\n  };\n  this.cancelScrollToIndex = function () {\n    if (_this.scrollToIndexTimeoutId !== null) {\n      clearTimeout(_this.scrollToIndexTimeoutId);\n      _this.scrollToIndexTimeoutId = null;\n    }\n  };\n  this.scrollToOffset = function (toOffset, _temp) {\n    var _ref5 = _temp === void 0 ? {} : _temp,\n      _ref5$align = _ref5.align,\n      align = _ref5$align === void 0 ? 'start' : _ref5$align,\n      behavior = _ref5.behavior;\n    _this.cancelScrollToIndex();\n    if (behavior === 'smooth' && _this.isDynamicMode()) {\n      console.warn('The `smooth` scroll behavior is not fully supported with dynamic size.');\n    }\n    _this._scrollToOffset(_this.getOffsetForAlignment(toOffset, align), {\n      adjustments: undefined,\n      behavior: behavior\n    });\n  };\n  this.scrollToIndex = function (index, _temp2) {\n    var _ref6 = _temp2 === void 0 ? {} : _temp2,\n      _ref6$align = _ref6.align,\n      initialAlign = _ref6$align === void 0 ? 'auto' : _ref6$align,\n      behavior = _ref6.behavior;\n    index = Math.max(0, Math.min(index, _this.options.count - 1));\n    _this.cancelScrollToIndex();\n    if (behavior === 'smooth' && _this.isDynamicMode()) {\n      console.warn('The `smooth` scroll behavior is not fully supported with dynamic size.');\n    }\n    var _this$getOffsetForInd = _this.getOffsetForIndex(index, initialAlign),\n      toOffset = _this$getOffsetForInd[0],\n      align = _this$getOffsetForInd[1];\n    _this._scrollToOffset(toOffset, {\n      adjustments: undefined,\n      behavior: behavior\n    });\n    if (behavior !== 'smooth' && _this.isDynamicMode()) {\n      _this.scrollToIndexTimeoutId = setTimeout(function () {\n        _this.scrollToIndexTimeoutId = null;\n        var elementInDOM = _this.measureElementCache.has(_this.options.getItemKey(index));\n        if (elementInDOM) {\n          var _this$getOffsetForInd2 = _this.getOffsetForIndex(index, align),\n            _toOffset = _this$getOffsetForInd2[0];\n          if (!approxEqual(_toOffset, _this.scrollOffset)) {\n            _this.scrollToIndex(index, {\n              align: align,\n              behavior: behavior\n            });\n          }\n        } else {\n          _this.scrollToIndex(index, {\n            align: align,\n            behavior: behavior\n          });\n        }\n      });\n    }\n  };\n  this.scrollBy = function (delta, _temp3) {\n    var _ref7 = _temp3 === void 0 ? {} : _temp3,\n      behavior = _ref7.behavior;\n    _this.cancelScrollToIndex();\n    if (behavior === 'smooth' && _this.isDynamicMode()) {\n      console.warn('The `smooth` scroll behavior is not fully supported with dynamic size.');\n    }\n    _this._scrollToOffset(_this.scrollOffset + delta, {\n      adjustments: undefined,\n      behavior: behavior\n    });\n  };\n  this.getTotalSize = function () {\n    var _this$getMeasurements;\n    return (((_this$getMeasurements = _this.getMeasurements()[_this.options.count - 1]) == null ? void 0 : _this$getMeasurements.end) || _this.options.paddingStart) - _this.options.scrollMargin + _this.options.paddingEnd;\n  };\n  this._scrollToOffset = function (offset, _ref8) {\n    var adjustments = _ref8.adjustments,\n      behavior = _ref8.behavior;\n    _this.options.scrollToFn(offset, {\n      behavior: behavior,\n      adjustments: adjustments\n    }, _this);\n  };\n  this.measure = function () {\n    _this.itemSizeCache = new Map();\n    _this.notify(false);\n  };\n  this.setOptions(_opts);\n  this.scrollRect = this.options.initialRect;\n  this.scrollOffset = this.options.initialOffset;\n  this.measurementsCache = this.options.initialMeasurementsCache;\n  this.measurementsCache.forEach(function (item) {\n    _this.itemSizeCache.set(item.key, item.size);\n  });\n  this.maybeNotify();\n};\nvar findNearestBinarySearch = function findNearestBinarySearch(low, high, getCurrentValue, value) {\n  while (low <= high) {\n    var middle = (low + high) / 2 | 0;\n    var currentValue = getCurrentValue(middle);\n    if (currentValue < value) {\n      low = middle + 1;\n    } else if (currentValue > value) {\n      high = middle - 1;\n    } else {\n      return middle;\n    }\n  }\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\nfunction calculateRange(_ref9) {\n  var measurements = _ref9.measurements,\n    outerSize = _ref9.outerSize,\n    scrollOffset = _ref9.scrollOffset;\n  var count = measurements.length - 1;\n  var getOffset = function getOffset(index) {\n    return measurements[index].start;\n  };\n  var startIndex = findNearestBinarySearch(0, count, getOffset, scrollOffset);\n  var endIndex = startIndex;\n  while (endIndex < count && measurements[endIndex].end < scrollOffset + outerSize) {\n    endIndex++;\n  }\n  return {\n    startIndex: startIndex,\n    endIndex: endIndex\n  };\n}\n\nexport { Virtualizer, defaultKeyExtractor, defaultRangeExtractor, elementScroll, measureElement, observeElementOffset, observeElementRect, observeWindowOffset, observeWindowRect, windowScroll };\n//# sourceMappingURL=index.mjs.map\n","/**\n * react-virtual\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport { extends as _extends } from './_virtual/_rollupPluginBabelHelpers.mjs';\nimport * as React from 'react';\nimport { flushSync } from 'react-dom';\nimport { observeElementRect, observeElementOffset, elementScroll, observeWindowRect, observeWindowOffset, windowScroll, Virtualizer } from '@tanstack/virtual-core';\nexport * from '@tanstack/virtual-core';\n\n//\n\nvar useIsomorphicLayoutEffect = typeof document !== 'undefined' ? React.useLayoutEffect : React.useEffect;\nfunction useVirtualizerBase(options) {\n  var rerender = React.useReducer(function () {\n    return {};\n  }, {})[1];\n  var resolvedOptions = _extends({}, options, {\n    onChange: function onChange(instance, sync) {\n      if (sync) {\n        flushSync(rerender);\n      } else {\n        rerender();\n      }\n      options.onChange == null ? void 0 : options.onChange(instance, sync);\n    }\n  });\n  var _React$useState = React.useState(function () {\n      return new Virtualizer(resolvedOptions);\n    }),\n    instance = _React$useState[0];\n  instance.setOptions(resolvedOptions);\n  React.useEffect(function () {\n    return instance._didMount();\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    return instance._willUpdate();\n  });\n  return instance;\n}\nfunction useVirtualizer(options) {\n  return useVirtualizerBase(_extends({\n    observeElementRect: observeElementRect,\n    observeElementOffset: observeElementOffset,\n    scrollToFn: elementScroll\n  }, options));\n}\nfunction useWindowVirtualizer(options) {\n  return useVirtualizerBase(_extends({\n    getScrollElement: function getScrollElement() {\n      return typeof document !== 'undefined' ? window : null;\n    },\n    observeElementRect: observeWindowRect,\n    observeElementOffset: observeWindowOffset,\n    scrollToFn: windowScroll,\n    initialOffset: typeof document !== 'undefined' ? window.scrollY : undefined\n  }, options));\n}\n\nexport { useVirtualizer, useWindowVirtualizer };\n//# sourceMappingURL=index.mjs.map\n","import React from 'react';\nimport {FileEntry} from '../../file-entry';\n\nexport interface FilePreviewContextValue {\n  entries: FileEntry[];\n  activeIndex: number;\n}\n\nexport const FilePreviewContext = React.createContext<FilePreviewContextValue>(\n  null!,\n);\n","import {ReactNode, useContext} from 'react';\nimport clsx from 'clsx';\nimport {Button} from '@ui/buttons/button';\nimport {downloadFileFromUrl} from '@ui/utils/files/download-file-from-url';\nimport {FilePreviewContext} from '../file-preview-context';\nimport {Trans} from '@ui/i18n/trans';\nimport {FilePreviewProps} from './file-preview-props';\nimport {useFileEntryUrls} from '../../../file-entry-urls';\n\ninterface Props extends FilePreviewProps {\n  message?: ReactNode;\n}\nexport function DefaultFilePreview({message, className, allowDownload}: Props) {\n  const {entries, activeIndex} = useContext(FilePreviewContext);\n  const activeEntry = entries[activeIndex];\n  const content = message || <Trans message=\"No file preview available\" />;\n  const {downloadUrl} = useFileEntryUrls(activeEntry);\n  return (\n    <div\n      className={clsx(\n        className,\n        'w-[calc(100%-40px)] max-w-400 rounded bg-paper p-40 text-center shadow',\n      )}\n    >\n      <div className=\"text-lg\">{content}</div>\n      {allowDownload && (\n        <div className=\"mt-20 block text-center\">\n          <Button\n            variant=\"flat\"\n            color=\"primary\"\n            onClick={() => {\n              if (downloadUrl) {\n                downloadFileFromUrl(downloadUrl);\n              }\n            }}\n          >\n            <Trans message=\"Download\" />\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}\n","import clsx from 'clsx';\nimport {useFileEntryUrls} from '../../../file-entry-urls';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\n\nexport function ImageFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  if (!previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <img\n      className={clsx(className, 'shadow')}\n      src={previewUrl}\n      alt={trans({\n        message: 'Preview for :name',\n        values: {name: entry.name},\n      })}\n    />\n  );\n}\n","import {useEffect, useState} from 'react';\nimport clsx from 'clsx';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {ProgressCircle} from '@ui/progress/progress-circle';\nimport {useFileEntryUrls} from '@common/uploads/file-entry-urls';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {Trans} from '@ui/i18n/trans';\nimport {apiClient} from '@common/http/query-client';\n\nconst FIVE_MB = 5242880;\n\nexport function TextFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const [tooLarge, setTooLarge] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isFailed, setIsFailed] = useState(false);\n  const [contents, setContents] = useState<string | null>(null);\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  useEffect(() => {\n    if (!entry) return;\n    if (!previewUrl) {\n      setIsFailed(true);\n    } else if (entry.file_size! >= FIVE_MB) {\n      setTooLarge(true);\n      setIsLoading(false);\n    } else {\n      getFileContents(previewUrl)\n        .then(response => {\n          setContents(response.data);\n        })\n        .catch(() => {\n          setIsFailed(true);\n        })\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }, [entry, previewUrl]);\n\n  if (isLoading) {\n    return (\n      <ProgressCircle\n        isIndeterminate\n        aria-label={trans({message: 'Loading file contents'})}\n      />\n    );\n  }\n\n  if (tooLarge) {\n    return (\n      <DefaultFilePreview\n        {...props}\n        message={<Trans message=\"This file is too large to preview.\" />}\n      />\n    );\n  }\n\n  if (isFailed) {\n    return (\n      <DefaultFilePreview\n        {...props}\n        message={<Trans message=\"There was an issue previewing this file\" />}\n      />\n    );\n  }\n\n  return (\n    <pre\n      className={clsx(\n        'h-full w-full overflow-y-auto whitespace-pre-wrap break-words rounded bg-paper p-20 text-sm',\n        className,\n      )}\n    >\n      <div className=\"container mx-auto\">{`${contents}`}</div>\n    </pre>\n  );\n}\n\nfunction getFileContents(src: string) {\n  return apiClient.get(src, {\n    responseType: 'text',\n    // required for s3 presigned url to work\n    withCredentials: false,\n    headers: {\n      Accept: 'text/plain',\n    },\n  });\n}\n","import {useEffect, useRef, useState} from 'react';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {useFileEntryUrls} from '../../../file-entry-urls';\n\nexport function VideoFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {previewUrl} = useFileEntryUrls(entry);\n  const ref = useRef<HTMLVideoElement>(null);\n  const [mediaInvalid, setMediaInvalid] = useState(false);\n\n  useEffect(() => {\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\n  }, [entry]);\n\n  if (mediaInvalid || !previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <video\n      className={className}\n      ref={ref}\n      controls\n      controlsList=\"nodownload noremoteplayback\"\n      playsInline\n      autoPlay\n    >\n      <source\n        src={previewUrl}\n        type={entry.mime}\n        onError={() => {\n          setMediaInvalid(true);\n        }}\n      />\n    </video>\n  );\n}\n","import {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {useFileEntryUrls} from '../../../file-entry-urls';\nimport {useEffect, useRef, useState} from 'react';\n\nexport function AudioFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {previewUrl} = useFileEntryUrls(entry);\n  const ref = useRef<HTMLAudioElement>(null);\n  const [mediaInvalid, setMediaInvalid] = useState(false);\n\n  useEffect(() => {\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\n  }, [entry]);\n\n  if (mediaInvalid || !previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <audio\n      className={className}\n      ref={ref}\n      controls\n      controlsList=\"nodownload noremoteplayback\"\n      autoPlay\n    >\n      <source\n        src={previewUrl}\n        type={entry.mime}\n        onError={() => {\n          setMediaInvalid(true);\n        }}\n      />\n    </audio>\n  );\n}\n","import clsx from 'clsx';\nimport {FilePreviewProps} from '@common/uploads/components/file-preview/file-preview/file-preview-props';\nimport {useFileEntryUrls} from '@common/uploads/file-entry-urls';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {DefaultFilePreview} from '@common/uploads/components/file-preview/file-preview/default-file-preview';\n\nexport function PdfFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  if (!previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <iframe\n      title={trans({\n        message: 'Preview for :name',\n        values: {name: entry.name},\n      })}\n      className={clsx(className, 'h-full w-full')}\n      src={`${previewUrl}#toolbar=0`}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport {useEffect, useRef, useState} from 'react';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {ProgressCircle} from '@ui/progress/progress-circle';\nimport {FileEntry} from '../../../file-entry';\nimport {useFileEntryUrls} from '../../../file-entry-urls';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {apiClient} from '@common/http/query-client';\n\nexport function WordDocumentFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const ref = useRef<HTMLIFrameElement>(null);\n  const [showDefault, setShowDefault] = useState(false);\n  const timeoutId = useRef<any>();\n  const [isLoading, setIsLoading] = useState(false);\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  useEffect(() => {\n    // Google Docs viewer only supports files up to 25MB\n    if (!previewUrl) {\n      setShowDefault(true);\n    } else if (entry.file_size && entry.file_size > 25000000) {\n      setShowDefault(true);\n    } else if (ref.current) {\n      ref.current.onload = () => {\n        clearTimeout(timeoutId.current);\n        setIsLoading(false);\n      };\n\n      buildPreviewUrl(previewUrl, entry).then(url => {\n        if (ref.current) {\n          ref.current.src = url;\n        }\n      });\n\n      // if preview iframe is not loaded\n      // after 5 seconds, bail and show default preview\n      timeoutId.current = setTimeout(() => {\n        setShowDefault(true);\n      }, 5000);\n    }\n  }, [entry, previewUrl]);\n\n  if (showDefault) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <div className={clsx(className, 'h-full w-full')}>\n      {isLoading && <ProgressCircle />}\n      <iframe\n        ref={ref}\n        title={trans({\n          message: 'Preview for :name',\n          values: {name: entry.name},\n        })}\n        className={clsx('h-full w-full', isLoading && 'hidden')}\n      />\n    </div>\n  );\n}\n\nasync function buildPreviewUrl(\n  urlString: string,\n  entry: FileEntry,\n): Promise<string> {\n  const url = new URL(urlString);\n  // if we're not trying to preview shareable link we will need to generate\n  // preview token, otherwise it won't be publicly accessible\n  if (!url.searchParams.has('shareable_link')) {\n    const {data} = await apiClient.post(\n      `file-entries/${entry.id}/add-preview-token`,\n    );\n    url.searchParams.append('preview_token', data.preview_token);\n  }\n\n  return buildOfficeLivePreviewUrl(url);\n}\n\nfunction buildOfficeLivePreviewUrl(url: URL) {\n  // https://docs.google.com/gview?embedded=true&url=\n  return `https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(\n    url.toString(),\n  )}`;\n}\n","import {ImageFilePreview} from './file-preview/image-file-preview';\nimport {FileEntry} from '../../file-entry';\nimport {DefaultFilePreview} from './file-preview/default-file-preview';\nimport {TextFilePreview} from './file-preview/text-file-preview';\nimport {VideoFilePreview} from './file-preview/video-file-preview';\nimport {AudioFilePreview} from './file-preview/audio-file-preview';\nimport {PdfFilePreview} from './file-preview/pdf-file-preview';\nimport {WordDocumentFilePreview} from './file-preview/word-document-file-preview';\n\nexport const AvailablePreviews = {\n  text: TextFilePreview,\n  video: VideoFilePreview,\n  audio: AudioFilePreview,\n  image: ImageFilePreview,\n  pdf: PdfFilePreview,\n  spreadsheet: WordDocumentFilePreview,\n  powerPoint: WordDocumentFilePreview,\n  word: WordDocumentFilePreview,\n  'text/rtf': DefaultFilePreview,\n} as const;\n\nexport function getPreviewForEntry(entry: FileEntry) {\n  const mime = entry?.mime as keyof typeof AvailablePreviews;\n  const type = entry?.type as keyof typeof AvailablePreviews;\n  return (\n    AvailablePreviews[mime] || AvailablePreviews[type] || DefaultFilePreview\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ChevronLeftIcon = createSvgIcon(\n  <path d=\"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z\" />\n, 'ChevronLeftOutlined');\n","import {AnimatePresence, m} from 'framer-motion';\nimport {Fragment, ReactNode, useContext, useMemo} from 'react';\nimport clsx from 'clsx';\nimport {getPreviewForEntry} from './available-previews';\nimport {FileEntry} from '../../file-entry';\nimport {FilePreviewContext} from './file-preview-context';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {ChevronLeftIcon} from '@ui/icons/material/ChevronLeft';\nimport {ChevronRightIcon} from '@ui/icons/material/ChevronRight';\nimport {FileDownloadIcon} from '@ui/icons/material/FileDownload';\nimport {downloadFileFromUrl} from '@ui/utils/files/download-file-from-url';\nimport {useFileEntryUrls} from '../../file-entry-urls';\nimport {Trans} from '@ui/i18n/trans';\nimport {Button} from '@ui/buttons/button';\nimport {CloseIcon} from '@ui/icons/material/Close';\nimport {FileThumbnail} from '@common/uploads/components/file-type-icon/file-thumbnail';\nimport {useMediaQuery} from '@ui/utils/hooks/use-media-query';\nimport {KeyboardArrowLeftIcon} from '@ui/icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '@ui/icons/material/KeyboardArrowRight';\nimport {useControlledState} from '@react-stately/utils';\nimport {opacityAnimation} from '@ui/animation/opacity-animation';\n\nexport interface FilePreviewContainerProps {\n  entries: FileEntry[];\n  activeIndex?: number;\n  defaultActiveIndex?: number;\n  onActiveIndexChange?: (index: number) => void;\n  onClose?: () => void;\n  showHeader?: boolean;\n  headerActionsLeft?: ReactNode;\n  className?: string;\n  allowDownload?: boolean;\n}\nexport function FilePreviewContainer({\n  entries,\n  onClose,\n  showHeader = true,\n  className,\n  headerActionsLeft,\n  allowDownload = true,\n  ...props\n}: FilePreviewContainerProps) {\n  const isMobile = useMediaQuery('(max-width: 1024px)');\n\n  const [activeIndex, setActiveIndex] = useControlledState(\n    props.activeIndex,\n    props.defaultActiveIndex || 0,\n    props.onActiveIndexChange,\n  );\n\n  const activeEntry = entries[activeIndex];\n  const contextValue = useMemo(() => {\n    return {entries, activeIndex};\n  }, [entries, activeIndex]);\n  const Preview = getPreviewForEntry(activeEntry);\n\n  if (!activeEntry) {\n    onClose?.();\n    return null;\n  }\n\n  const canOpenNext = entries.length - 1 > activeIndex;\n  const openNext = () => {\n    setActiveIndex(activeIndex + 1);\n  };\n  const canOpenPrevious = activeIndex > 0;\n  const openPrevious = () => {\n    setActiveIndex(activeIndex - 1);\n  };\n\n  return (\n    <FilePreviewContext.Provider value={contextValue}>\n      {showHeader && (\n        <Header\n          actionsLeft={headerActionsLeft}\n          isMobile={isMobile}\n          onClose={onClose}\n          onNext={canOpenNext ? openNext : undefined}\n          onPrevious={canOpenPrevious ? openPrevious : undefined}\n          allowDownload={allowDownload}\n        />\n      )}\n      <div className={clsx('relative flex-auto overflow-hidden', className)}>\n        {isMobile && (\n          <IconButton\n            size=\"lg\"\n            className=\"absolute left-0 top-1/2 z-10 -translate-y-1/2 transform text-muted\"\n            disabled={!canOpenPrevious}\n            onClick={openPrevious}\n          >\n            <KeyboardArrowLeftIcon />\n          </IconButton>\n        )}\n        <AnimatePresence initial={false}>\n          <m.div\n            className=\"absolute inset-0 flex items-center justify-center\"\n            key={activeEntry.id}\n            {...opacityAnimation}\n          >\n            <Preview\n              className=\"max-h-[calc(100%-30px)]\"\n              entry={activeEntry}\n              allowDownload={allowDownload}\n            />\n          </m.div>\n        </AnimatePresence>\n        {isMobile && (\n          <IconButton\n            size=\"lg\"\n            className=\"absolute right-0 top-1/2 z-10 -translate-y-1/2 transform text-muted\"\n            disabled={!canOpenNext}\n            onClick={openNext}\n          >\n            <KeyboardArrowRightIcon />\n          </IconButton>\n        )}\n      </div>\n    </FilePreviewContext.Provider>\n  );\n}\n\ninterface HeaderProps {\n  onNext?: () => void;\n  onPrevious?: () => void;\n  onClose?: () => void;\n  isMobile: boolean | null;\n  actionsLeft?: ReactNode;\n  allowDownload?: boolean;\n}\nfunction Header({\n  onNext,\n  onPrevious,\n  onClose,\n  isMobile,\n  actionsLeft,\n  allowDownload,\n}: HeaderProps) {\n  const {entries, activeIndex} = useContext(FilePreviewContext);\n  const activeEntry = entries[activeIndex];\n  const {downloadUrl} = useFileEntryUrls(activeEntry);\n\n  const desktopDownloadButton = (\n    <Button\n      startIcon={<FileDownloadIcon />}\n      variant=\"text\"\n      onClick={() => {\n        if (downloadUrl) {\n          downloadFileFromUrl(downloadUrl);\n        }\n      }}\n    >\n      <Trans message=\"Download\" />\n    </Button>\n  );\n\n  const mobileDownloadButton = (\n    <IconButton\n      onClick={() => {\n        if (downloadUrl) {\n          downloadFileFromUrl(downloadUrl);\n        }\n      }}\n    >\n      <FileDownloadIcon />\n    </IconButton>\n  );\n\n  const downloadButton = isMobile\n    ? mobileDownloadButton\n    : desktopDownloadButton;\n\n  return (\n    <div className=\"flex min-h-50 flex-shrink-0 items-center justify-between gap-20 border-b bg-paper px-10 text-sm text-muted\">\n      <div className=\"flex w-1/3 items-center justify-start gap-4\">\n        {actionsLeft}\n        {allowDownload ? downloadButton : undefined}\n      </div>\n      <div className=\"flex w-1/3 flex-nowrap items-center justify-center gap-10 text-main\">\n        <FileThumbnail\n          file={activeEntry}\n          iconClassName=\"w-16 h-16\"\n          showImage={false}\n        />\n        <div className=\"overflow-hidden overflow-ellipsis whitespace-nowrap\">\n          {activeEntry.name}\n        </div>\n      </div>\n      <div className=\"flex w-1/3 items-center justify-end gap-10 whitespace-nowrap\">\n        {!isMobile && (\n          <Fragment>\n            <IconButton disabled={!onPrevious} onClick={onPrevious}>\n              <ChevronLeftIcon />\n            </IconButton>\n            <div>{activeIndex + 1}</div>\n            <div>/</div>\n            <div>{entries.length}</div>\n            <IconButton disabled={!onNext} onClick={onNext}>\n              <ChevronRightIcon />\n            </IconButton>\n            <div className=\"mx-20 h-24 w-1 bg-divider\" />\n          </Fragment>\n        )}\n        <IconButton radius=\"rounded-none\" onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      </div>\n    </div>\n  );\n}\n","import {\n  FilePreviewContainer,\n  FilePreviewContainerProps,\n} from './file-preview-container';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\n\ninterface Props extends Omit<FilePreviewContainerProps, 'onClose'> {}\nexport function FilePreviewDialog(props: Props) {\n  return (\n    <Dialog\n      size=\"fullscreenTakeover\"\n      background=\"bg-alt\"\n      className=\"flex flex-col\"\n    >\n      <Content {...props} />\n    </Dialog>\n  );\n}\n\nfunction Content(props: Props) {\n  const {close} = useDialogContext();\n  return <FilePreviewContainer onClose={close} {...props} />;\n}\n","import {useControlledState} from '@react-stately/utils';\nimport {HTMLAttributes, useCallback, useState} from 'react';\nimport {\n  CalendarDate,\n  DateValue,\n  isSameDay,\n  toCalendarDate,\n  ZonedDateTime,\n} from '@internationalized/date';\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\nimport {useCurrentDateTime} from '@ui/i18n/use-current-date-time';\nimport {toSafeZoned} from '@ui/i18n/to-safe-zoned';\n\nexport type Granularity = 'day' | 'minute';\n\nexport type DatePickerState = BaseDatePickerState;\n\nexport interface BaseDatePickerState<T = ZonedDateTime, P = boolean> {\n  timezone: string;\n  granularity: Granularity;\n  selectedValue: T;\n  setSelectedValue: (value: T) => void;\n  calendarIsOpen: boolean;\n  setCalendarIsOpen: (isOpen: boolean) => void;\n  calendarDates: CalendarDate[];\n  setCalendarDates: (dates: CalendarDate[]) => void;\n  dayIsActive: (day: CalendarDate) => boolean;\n  dayIsHighlighted: (day: CalendarDate) => boolean;\n  dayIsRangeStart: (day: CalendarDate) => boolean;\n  dayIsRangeEnd: (day: CalendarDate) => boolean;\n  isPlaceholder: P;\n  setIsPlaceholder: (value: P) => void;\n  clear: () => void;\n  min?: ZonedDateTime;\n  max?: ZonedDateTime;\n  closeDialogOnSelection: boolean;\n  getCellProps: (\n    date: CalendarDate,\n    isSameMonth: boolean,\n  ) => HTMLAttributes<HTMLElement>;\n}\n\nexport interface DatePickerValueProps<V, CV = V> {\n  value?: V | null | '';\n  defaultValue?: V | null;\n  onChange?: (value: CV | null) => void;\n  min?: DateValue;\n  max?: DateValue;\n  granularity?: Granularity;\n  closeDialogOnSelection?: boolean;\n}\nexport function useDatePickerState(\n  props: DatePickerValueProps<ZonedDateTime>,\n): BaseDatePickerState {\n  const now = useCurrentDateTime();\n  const [isPlaceholder, setIsPlaceholder] = useState(\n    !props.value && !props.defaultValue,\n  );\n\n  // if user clears the date, we will want to still keep an\n  // instance internally, but return null via \"onChange\" callback\n  const setStateValue = props.onChange;\n  const [internalValue, setInternalValue] = useControlledState(\n    props.value || now,\n    props.defaultValue || now,\n    value => {\n      setIsPlaceholder(false);\n      setStateValue?.(value);\n    },\n  );\n\n  const {\n    min,\n    max,\n    granularity,\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  } = useBaseDatePickerState(internalValue, props);\n\n  const clear = useCallback(() => {\n    setIsPlaceholder(true);\n    setInternalValue(now);\n    setStateValue?.(null);\n    setCalendarIsOpen(false);\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\n\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\n    return [toCalendarDate(internalValue)];\n  });\n\n  const setSelectedValue = useCallback(\n    (newValue: DateValue) => {\n      if (min && newValue.compare(min) < 0) {\n        newValue = min;\n      } else if (max && newValue.compare(max) > 0) {\n        newValue = max;\n      }\n\n      // preserve time\n      const value = internalValue\n        ? internalValue.set(newValue)\n        : toSafeZoned(newValue, timezone);\n      setInternalValue(value);\n      setCalendarDates([toCalendarDate(value)]);\n      setIsPlaceholder(false);\n    },\n    [setInternalValue, min, max, internalValue, timezone],\n  );\n\n  const dayIsActive = useCallback(\n    (day: DateValue) => !isPlaceholder && isSameDay(internalValue, day),\n    [internalValue, isPlaceholder],\n  );\n\n  const getCellProps = useCallback(\n    (date: DateValue): HTMLAttributes<HTMLElement> => {\n      return {\n        onClick: () => {\n          setSelectedValue?.(date);\n          if (closeDialogOnSelection) {\n            setCalendarIsOpen?.(false);\n          }\n        },\n      };\n    },\n    [setSelectedValue, setCalendarIsOpen, closeDialogOnSelection],\n  );\n\n  return {\n    selectedValue: internalValue,\n    setSelectedValue: setInternalValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted: () => false,\n    dayIsRangeStart: () => false,\n    dayIsRangeEnd: () => false,\n    getCellProps,\n    calendarDates,\n    setCalendarDates,\n    isPlaceholder,\n    clear,\n    setIsPlaceholder,\n    min,\n    max,\n    granularity,\n    timezone,\n    closeDialogOnSelection,\n  };\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  Fragment,\n  MouseEvent,\n  useRef,\n} from 'react';\nimport {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport {\n  DatePickerValueProps,\n  useDatePickerState,\n} from './use-date-picker-state';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {DateRangeIcon} from '@ui/icons/material/DateRange';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {Calendar} from '../calendar/calendar';\nimport {\n  DatePickerField,\n  DatePickerFieldProps,\n} from '../date-range-picker/date-picker-field';\nimport {DateSegmentList} from '../segments/date-segment-list';\nimport {useDateFormatter} from '@ui/i18n/use-date-formatter';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport clsx from 'clsx';\nimport {DialogFooter} from '@ui/overlays/dialog/dialog-footer';\nimport {Button} from '@ui/buttons/button';\nimport {Trans} from '@ui/i18n/trans';\nimport {useCurrentDateTime} from '@ui/i18n/use-current-date-time';\n\nexport interface DatePickerProps\n  extends Omit<DatePickerFieldProps, 'children'>,\n    DatePickerValueProps<ZonedDateTime> {}\nexport function DatePicker({showCalendarFooter, ...props}: DatePickerProps) {\n  const state = useDatePickerState(props);\n  const inputRef = useRef<HTMLDivElement>(null);\n  const now = useCurrentDateTime();\n\n  const footer = showCalendarFooter && (\n    <DialogFooter\n      padding=\"px-14 pb-14\"\n      startAction={\n        <Button\n          disabled={state.isPlaceholder}\n          variant=\"text\"\n          color=\"primary\"\n          onClick={() => {\n            state.clear();\n          }}\n        >\n          <Trans message=\"Clear\" />\n        </Button>\n      }\n    >\n      <Button\n        variant=\"text\"\n        color=\"primary\"\n        onClick={() => {\n          state.setSelectedValue(now);\n          state.setCalendarIsOpen(false);\n        }}\n      >\n        <Trans message=\"Today\" />\n      </Button>\n    </DialogFooter>\n  );\n\n  const dialog = (\n    <DialogTrigger\n      offset={8}\n      placement=\"bottom-start\"\n      isOpen={state.calendarIsOpen}\n      onOpenChange={state.setCalendarIsOpen}\n      type=\"popover\"\n      triggerRef={inputRef}\n      returnFocusToTrigger={false}\n      moveFocusToDialog={false}\n    >\n      <Dialog size=\"auto\">\n        <DialogBody\n          className=\"flex items-start gap-40\"\n          padding={showCalendarFooter ? 'px-24 pt-20 pb-10' : null}\n        >\n          <Calendar state={state} visibleMonths={1} />\n        </DialogBody>\n        {footer}\n      </Dialog>\n    </DialogTrigger>\n  );\n\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\n    onClick: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!isHourSegment(e)) {\n        state.setCalendarIsOpen(true);\n      } else {\n        state.setCalendarIsOpen(false);\n      }\n    },\n  };\n\n  return (\n    <Fragment>\n      <DatePickerField\n        ref={inputRef}\n        wrapperProps={openOnClick}\n        endAdornment={\n          <DateRangeIcon className={clsx(props.disabled && 'text-disabled')} />\n        }\n        {...props}\n      >\n        <DateSegmentList\n          segmentProps={openOnClick}\n          state={state}\n          value={state.selectedValue}\n          onChange={state.setSelectedValue}\n          isPlaceholder={state.isPlaceholder}\n        />\n      </DatePickerField>\n      {dialog}\n    </Fragment>\n  );\n}\n\ninterface FormDatePickerProps extends DatePickerProps {\n  name: string;\n}\nexport function FormDatePicker(props: FormDatePickerProps) {\n  const {min, max} = props;\n  const {trans} = useTrans();\n  const {format} = useDateFormatter();\n  const {\n    field: {onChange, onBlur, value = null, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n    rules: {\n      validate: v => {\n        if (!v) return;\n        const date = parseAbsoluteToLocal(v);\n        if (min && date.compare(min) < 0) {\n          return trans({\n            message: 'Enter a date after :date',\n            values: {date: format(v)},\n          });\n        }\n        if (max && date.compare(max) > 0) {\n          return trans({\n            message: 'Enter a date before :date',\n            values: {date: format(v)},\n          });\n        }\n      },\n    },\n  });\n\n  const parsedValue: null | ZonedDateTime = value\n    ? parseAbsoluteToLocal(value)\n    : null;\n\n  const formProps: Partial<DatePickerProps> = {\n    onChange: e => {\n      onChange(e ? e.toAbsoluteString() : e);\n    },\n    onBlur,\n    value: parsedValue,\n    invalid,\n    errorMessage: error?.message,\n    inputRef: ref,\n  };\n\n  return <DatePicker {...mergeProps(formProps, props)} />;\n}\n\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\n  return ['hour', 'minute', 'dayPeriod'].includes(\n    (e.currentTarget as HTMLElement).ariaLabel || '',\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const InfoIcon = createSvgIcon(\n  <path d=\"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\n, 'InfoOutlined');\n","import clsx from 'clsx';\nimport {m} from 'framer-motion';\nimport {cloneElement, ReactElement, useContext} from 'react';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\n\nexport interface DashboardSidenavChildrenProps {\n  className?: string;\n  isCompactMode?: boolean;\n}\n\nexport interface SidenavProps {\n  className?: string;\n  children: ReactElement<DashboardSidenavChildrenProps>;\n  position?: 'left' | 'right';\n  size?: 'sm' | 'md' | 'lg' | string;\n  mode?: 'overlay';\n  // absolute will place sidenav between navbar/footer, fixed will overlay it over nav/footer.\n  overlayPosition?: 'absolute' | 'fixed';\n  display?: 'flex' | 'block';\n  overflow?: string;\n  forceClosed?: boolean;\n}\nexport function DashboardSidenav({\n  className,\n  position,\n  children,\n  size = 'md',\n  mode,\n  overlayPosition = 'fixed',\n  display = 'flex',\n  overflow = 'overflow-hidden',\n  forceClosed = false,\n}: SidenavProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    rightSidenavStatus,\n    setRightSidenavStatus,\n  } = useContext(DashboardLayoutContext);\n  const status = position === 'left' ? leftSidenavStatus : rightSidenavStatus;\n  const isOverlayMode = isMobileMode || mode === 'overlay';\n\n  const variants = {\n    open: {display, width: null as any},\n    compact: {\n      display,\n      width: null as any,\n    },\n    closed: {\n      width: 0,\n      transitionEnd: {\n        display: 'none',\n      },\n    },\n  };\n\n  const sizeClassName = getSize(status === 'compact' ? 'compact' : size);\n\n  return (\n    <m.div\n      variants={variants}\n      initial={false}\n      animate={forceClosed ? 'closed' : status}\n      transition={{type: 'tween', duration: 0.15}}\n      onClick={e => {\n        // close sidenav when user clicks a link or button on mobile\n        const target = e.target as HTMLElement;\n        if (isMobileMode && (target.closest('button') || target.closest('a'))) {\n          setLeftSidenavStatus('closed');\n          setRightSidenavStatus('closed');\n        }\n      }}\n      className={clsx(\n        className,\n        position === 'left'\n          ? 'dashboard-grid-sidenav-left'\n          : 'dashboard-grid-sidenav-right',\n        'will-change-[width]',\n        overflow,\n        sizeClassName,\n        isOverlayMode && `${overlayPosition} bottom-0 top-0 z-20 shadow-2xl`,\n        isOverlayMode && position === 'left' && 'left-0',\n        isOverlayMode && position === 'right' && 'right-0',\n      )}\n    >\n      {cloneElement<DashboardSidenavChildrenProps>(children, {\n        className: clsx(\n          children.props.className,\n          'w-full h-full',\n          status === 'compact' && 'compact-scrollbar',\n        ),\n        isCompactMode: status === 'compact',\n      })}\n    </m.div>\n  );\n}\n\nfunction getSize(size: SidenavProps['size'] | 'compact'): string {\n  switch (size) {\n    case 'compact':\n      return 'w-60';\n    case 'sm':\n      return 'w-224';\n    case 'md':\n      return 'w-240';\n    case 'lg':\n      return 'w-288';\n    default:\n      return size || '';\n  }\n}\n","import {cloneElement, ReactElement} from 'react';\nimport clsx from 'clsx';\n\ninterface DashboardContentProps {\n  children: ReactElement<{className: string}>;\n  isScrollable?: boolean;\n  stableScrollbar?: boolean;\n}\nexport function DashboardContent({\n  children,\n  isScrollable = true,\n  stableScrollbar = true,\n}: DashboardContentProps) {\n  return cloneElement(children, {\n    className: clsx(\n      children.props.className,\n      isScrollable && 'overflow-y-auto',\n      isScrollable && stableScrollbar && 'stable-scrollbar',\n      'dashboard-grid-content',\n    ),\n  });\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MenuOpenIcon = createSvgIcon(\n  <path d=\"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z\" />\n, 'MenuOpenOutlined');\n","import {Navbar, NavbarProps} from '../navigation/navbar/navbar';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport React, {useContext} from 'react';\nimport clsx from 'clsx';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\nimport {setInLocalStorage} from '@ui/utils/hooks/local-storage';\nimport {MenuOpenIcon} from '@ui/icons/material/MenuOpen';\n\nexport interface DashboardNavbarProps\n  extends Omit<NavbarProps, 'toggleButton'> {\n  hideToggleButton?: boolean;\n}\nexport function DashboardNavbar({\n  children,\n  className,\n  hideToggleButton,\n  ...props\n}: DashboardNavbarProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    name,\n    leftSidenavCanBeCompact,\n  } = useContext(DashboardLayoutContext);\n\n  const shouldToggleCompactMode = leftSidenavCanBeCompact && !isMobileMode;\n  const shouldShowToggle =\n    !hideToggleButton && (isMobileMode || leftSidenavCanBeCompact);\n\n  const handleToggle = () => {\n    setLeftSidenavStatus(leftSidenavStatus === 'open' ? 'closed' : 'open');\n  };\n\n  const handleCompactModeToggle = () => {\n    const newStatus = leftSidenavStatus === 'compact' ? 'open' : 'compact';\n    setInLocalStorage(`${name}.sidenav.compact`, newStatus === 'compact');\n    setLeftSidenavStatus(newStatus);\n  };\n\n  return (\n    <Navbar\n      className={clsx('dashboard-grid-navbar', className)}\n      border=\"border-b\"\n      size=\"sm\"\n      toggleButton={\n        shouldShowToggle ? (\n          <IconButton\n            size=\"md\"\n            onClick={() => {\n              if (shouldToggleCompactMode) {\n                handleCompactModeToggle();\n              } else {\n                handleToggle();\n              }\n            }}\n          >\n            <MenuOpenIcon />\n          </IconButton>\n        ) : undefined\n      }\n      {...props}\n    >\n      {children}\n    </Navbar>\n  );\n}\n","import {useEffect} from 'react';\n\nexport function useBlockBodyOverflow(disable: boolean = false) {\n  useEffect(() => {\n    if (disable) {\n      document.documentElement.classList.remove('no-page-overflow');\n    } else {\n      document.documentElement.classList.add('no-page-overflow');\n    }\n    return () => {\n      document.documentElement.classList.remove('no-page-overflow');\n    };\n  }, [disable]);\n}\n","import {ComponentPropsWithoutRef, useCallback, useMemo} from 'react';\nimport {\n  DashboardLayoutContext,\n  DashboardSidenavStatus,\n} from './dashboard-layout-context';\nimport {AnimatePresence} from 'framer-motion';\nimport {useControlledState} from '@react-stately/utils';\nimport {useMediaQuery} from '@ui/utils/hooks/use-media-query';\nimport {\n  getFromLocalStorage,\n  setInLocalStorage,\n} from '@ui/utils/hooks/local-storage';\nimport {useBlockBodyOverflow} from '@ui/utils/hooks/use-block-body-overflow';\nimport clsx from 'clsx';\nimport {Underlay} from '@ui/overlays/underlay';\n\ninterface DashboardLayoutProps extends ComponentPropsWithoutRef<'div'> {\n  name: string;\n  leftSidenavCanBeCompact?: boolean;\n  leftSidenavStatus?: DashboardSidenavStatus;\n  onLeftSidenavChange?: (status: DashboardSidenavStatus) => void;\n  rightSidenavStatus?: DashboardSidenavStatus;\n  initialRightSidenavStatus?: DashboardSidenavStatus;\n  onRightSidenavChange?: (status: DashboardSidenavStatus) => void;\n  height?: string;\n  gridClassName?: string;\n  blockBodyOverflow?: boolean;\n}\nexport function DashboardLayout({\n  children,\n  leftSidenavStatus: leftSidenav,\n  onLeftSidenavChange,\n  rightSidenavStatus: rightSidenav,\n  initialRightSidenavStatus,\n  onRightSidenavChange,\n  name,\n  leftSidenavCanBeCompact,\n  height = 'h-screen',\n  className,\n  gridClassName = 'dashboard-grid',\n  blockBodyOverflow = true,\n  ...domProps\n}: DashboardLayoutProps) {\n  useBlockBodyOverflow(!blockBodyOverflow);\n  const isMobile = useMediaQuery('(max-width: 1024px)');\n\n  const isCompactModeInitially = useMemo(() => {\n    return !name ? false : getFromLocalStorage(`${name}.sidenav.compact`);\n  }, [name]);\n  const defaultLeftSidenavStatus = isCompactModeInitially ? 'compact' : 'open';\n  const [leftSidenavStatus, setLeftSidenavStatus] = useControlledState(\n    leftSidenav,\n    isMobile ? 'closed' : defaultLeftSidenavStatus,\n    onLeftSidenavChange,\n  );\n\n  const rightSidenavStatusDefault = useMemo(() => {\n    if (isMobile) {\n      return 'closed';\n    }\n    if (initialRightSidenavStatus != null) {\n      return initialRightSidenavStatus;\n    }\n    const userSelected = getFromLocalStorage(\n      `${name}.sidenav.right.position`,\n      'open',\n    );\n    if (userSelected != null) {\n      return userSelected;\n    }\n    return initialRightSidenavStatus || 'closed';\n  }, [isMobile, name, initialRightSidenavStatus]);\n  const [rightSidenavStatus, _setRightSidenavStatus] = useControlledState(\n    rightSidenav,\n    rightSidenavStatusDefault,\n    onRightSidenavChange,\n  );\n  const setRightSidenavStatus = useCallback(\n    (status: DashboardSidenavStatus) => {\n      _setRightSidenavStatus(status);\n      setInLocalStorage(`${name}.sidenav.right.position`, status);\n    },\n    [_setRightSidenavStatus, name],\n  );\n\n  const shouldShowUnderlay =\n    isMobile && (leftSidenavStatus === 'open' || rightSidenavStatus === 'open');\n\n  return (\n    <DashboardLayoutContext.Provider\n      value={{\n        leftSidenavStatus,\n        setLeftSidenavStatus,\n        rightSidenavStatus,\n        setRightSidenavStatus,\n        leftSidenavCanBeCompact,\n        name,\n        isMobileMode: isMobile,\n      }}\n    >\n      <div\n        {...domProps}\n        className={clsx('relative isolate', gridClassName, className, height)}\n      >\n        {children}\n        <AnimatePresence>\n          {shouldShowUnderlay && (\n            <Underlay\n              position=\"fixed\"\n              key=\"dashboard-underlay\"\n              onClick={() => {\n                setLeftSidenavStatus('closed');\n                setRightSidenavStatus('closed');\n              }}\n            />\n          )}\n        </AnimatePresence>\n      </div>\n    </DashboardLayoutContext.Provider>\n  );\n}\n"],"names":["$03deb23ff14920c4$export$4eaf04e54aa8eed6","globalListeners","$lPAwt$useRef","addGlobalListener","$lPAwt$useCallback","eventTarget","type","listener","options","fn","args","removeGlobalListener","_globalListeners_current_get","removeAllGlobalListeners","value","key","$lPAwt$useEffect","$e0b6e0b68ec7f50f$export$872b660ac5a1ff98","props","ref","onInteractOutside","isDisabled","onInteractOutsideStart","stateRef","$ispOf$useRef","onPointerDown","$ispOf$useEffectEvent","e","$e0b6e0b68ec7f50f$var$isValidEvent","triggerInteractOutside","$ispOf$useEffect","state","element","documentObject","$ispOf$getOwnerDocument","onPointerUp","onMouseUp","onTouchEnd","event","ownerDocument","AddIcon","createSvgIcon","jsx","ChipList","className","children","size","color","radius","selectable","wrap","clsx","Children","chip","isValidElement","cloneElement","stringToChipValue","colors","AvatarInitialsFallback","forwardRef","label","initial","bgColor","useMemo","hash","accum","val","getTextFallbackFontSize","Avatar","circle","src","link","fallback","fallbackColor","lazy","domProps","renderedAvatar","AvatarPlaceholderIcon","Tooltip","wrapperProps","getSizeClassName","Link","ChipFieldInner","fieldRef","useRef","inputRef","useObjectRef","displayWith","v","validateWith","suggestions","isLoading","inputValue","onInputValueChange","onItemSelected","placeholder","onOpenChange","chipSize","openMenuOnFocus","showEmptyMessage","propsValue","defaultValue","propsOnChange","valueKey","isAsync","allowCustomValue","showDropdownArrow","onChipClick","alwaysShowAvatar","readOnly","inputFieldProps","fieldClassNames","getInputFieldClassNames","onChange","useChipFieldValueState","listboxIsOpen","setListboxIsOpen","useState","loadingIndicator","ProgressCircle","dropdownArrow","KeyboardArrowDownIcon","fieldProps","inputProps","useField","Field","jsxs","Input","_a","ListWrapper","ChipInput","items","setItems","displayChipUsing","manager","useFocusManager","removeItem","useCallback","i","cr","newItems","item","Chip","setChips","chips","addItems","invalid","listbox","useListbox","handleItemSelection","activeIndex","setActiveIndex","isOpen","setIsOpen","setInputValue","refs","listboxId","collection","onInputChange","textValue","option","useLayoutEffect","handleTriggerKeyDown","handleListboxKeyboardNavigation","useListboxKeyboardNavigation","handleFocusAndClick","createEventHandler","Listbox","Popover","mergeProps","emails","selection","email","input","mixedValueToChipValue","propsDefaultValue","handleChange","newValue","useControlledState","ChipField","React","DeleteIcon","draggables","droppables","dragMonitors","dragSession","interactableEvent","rect","deltaX","deltaY","activeInteraction","setActiveInteraction","name","domRectToObj","updateRects","targets","observer","entries","entry","width","height","left","top","id","target","useDraggable","disabled","preview","hidePreview","dragHandleRef","useGlobalListeners","optionsRef","notifyMonitors","callback","monitor","onDragStart","draggable","el","clickedOnHandle","hideNativeGhostImage","ie","node","_b","m","onDragOver","newRect","emptyImage","readFilesFromDataTransfer","dataTransfer","file","getEntryFile","UploadedFile","getEntriesFromDirectory","reader","resolve","reject","asyncIterableToArray","iterator","DROP_ACTIVATE_TIMEOUT","useDroppable","canDrop","allowEventsOnSelf","fireDragLeave","getDraggable","dropResult","_d","_c","hasNextPage","pagination","FilterControlType","FilterOperator","USER_MODEL","DateRangePicker","granularity","closeDialogOnSelection","useDateRangePickerState","hideCalendarIcon","useIsMobileMediaQuery","dialog","DialogTrigger","DateRangeDialog","openOnClick","isHourSegment","Fragment","DatePickerField","DateRangeIcon","DateSegmentList","ArrowRightAltIcon","FormDateRangePicker","onBlur","error","useController","formProps","dateRangeToAbsoluteRange","absoluteRangeToDateRange","start","end","preset","dateRange","parseAbsoluteToLocal","absoluteRange","timestampFilter","DateRangePresets","createdAtFilter","message","updatedAtFilter","FILE_ENTRY_TYPE_FILTER","FILE_ENTRY_INDEX_FILTERS","BackendFiltersUrlKey","decodeBackendFilters","encodedFilters","filtersFromQuery","filterValue","encodeBackendFilters","filterValues","filters","transformValue","fm","filterConfig","f","o","useBackendFilterUrlParams","pinnedFilters","searchParams","useSearchParams","navigate","useNavigate","decodedFilters","decoded","config","a","b","getDecodedWithoutKeys","values","newFilters","index","replaceAll","add","remove","FilterListTriggerButton","isInactive","filter","InactiveFilterButton","ActiveFilterButton","Button","Trans","isBoolean","SelectFilterPanel","trans","useTrans","FormSelect","Item","FilterListItemDialogTrigger","onValueChange","FilterListControlDialog","panel","operator","form","useForm","close","formId","useDialogContext","Dialog","DialogHeader","DialogBody","Form","formValue","DialogFooter","useNormalizedModels","endpoint","queryParams","queryOptions","useQuery","fetchModels","keepPreviousData","params","apiClient","r","useNormalizedModel","fetchModel","NormalizedModelField","background","searchPlaceholder","description","errorMessage","autoFocus","required","selectedValue","setSelectedValue","query","AnimatePresence","SelectedModelPreview","Select","model","modelId","onEditClick","data","LoadingSkeleton","opacityAnimation","IconButton","EditIcon","Skeleton","FormNormalizedModelField","clearErrors","useFormContext","NormalizedModelFilterPanel","DateRangeFilterPanel","FilterOperatorNames","InputFilterPanel","control","selectedOperator","useWatch","FormTextField","FormChipField","ChipFieldFilterPanel","FilterListControl","DatePickerControl","BooleanToggleControl","SelectControl","ChipFieldControl","InputControl","SelectModelControl","Control","valueLabel","FormattedDateTimeRange","MultipleValues","maxShownCount","notShownCount","names","operatorLabel","formattedValue","FormattedNumber","skeleton","modelPreview","FilterList","field","handleValueChange","payload","CloseIcon","DashboardLayoutContext","createContext","usePointerEvents","onMoveStart","onMove","onMoveEnd","minimumMovement","preventDefault","stopPropagation","onPress","onLongPress","onPointerMove","longPressTriggered","LinkIcon","FileDownloadIcon","FileEntryUrlsContext","useFileEntryUrls","base_url","useSettings","urlSearchParams","useContext","urls","buildPreviewUrl","addParams","thumbnail","isAbsoluteUrl","extension","getBootstrapData","urlString","baseUrl","url","downloadFileFromUrl","MoreVertIcon","isCtrlKeyPressed","isMac","useGridNavigation","cellCount","rowCount","focusSiblingCell","focusFirstElementAfterGrid","operations","grid","currentCell","row","rowIndex","cellIndex","rowOpCount","cellOpCount","_e","_f","_g","nextCell","nextFocusableElement","getFocusableTreeWalker","walker","next","last","focusWithoutScrolling","TableContext","useTableCellStyle","isHeader","columns","cellHeight","headerCellHeight","column","userPadding","justify","TableCell","rowIsHovered","rowContext","style","isCtrlOrShiftPressed","useTableRowStyle","isSelected","isDarkMode","useIsDarkMode","isMobile","hideBorder","enableSelection","collapseOnMobile","onAction","interactableElements","TableRow","renderAs","selectedRows","toggleRow","selectRow","selectRowOnContextMenu","selectionStyle","hideHeaderRow","isTouchDevice","isHovered","setIsHovered","clickedOnInteractable","doubleClickHandler","anyRowsSelected","handleRowTap","keyboardHandler","contextMenuHandler","styleClassName","RowElement","CheckboxColumnConfig","SelectAllCheckbox","SelectRowCheckbox","Checkbox","onSelectionChange","allRowsSelected","someRowsSelected","d","ArrowDownwardIcon","HeaderCell","sortDescriptor","onSortChange","enableSorting","sortingKey","allowSorting","orderBy","orderDir","sortActive","ariaSort","toggleSorting","newSort","sortVisible","sortVariants","TableHeaderRow","columnIndex","Table","userColumns","propsSelectedRows","propsDefaultSelectedRows","propsOnSelectionChange","propsSortDescriptor","propsOnSortChange","onDelete","ariaLabelledBy","renderRowAs","tableBody","meta","propsTableRef","closeOnInteractOutside","isCollapsedMode","newValues","merge","filteredColumns","c","visibleInMode","contextValue","navProps","tableBodyProps","BasicTableBody","tableRef","useInteractOutside","TwoMB","FileThumbnail","iconClassName","showImage","previewUrl","alt","FileTypeIcon","_extends","source","memo","getDeps","opts","_opts$initialDeps","deps","result","depTime","newDeps","depsChanged","dep","resultTime","depEndTime","resultEndTime","resultFpsPercentage","pad","str","num","notUndefined","msg","approxEqual","defaultKeyExtractor","defaultRangeExtractor","range","arr","_i","observeElementRect","instance","cb","handler","box","observeElementOffset","measureElement","elementScroll","offset","_ref2","_instance$scrollEleme3","_instance$scrollEleme4","_ref2$adjustments","adjustments","behavior","toOffset","Virtualizer","_opts","_this","_ro","get","_get","_get2","_get3","_ref3","sync","isScrolling","scrollElement","count","paddingStart","scrollMargin","getItemKey","measurements","furthestMeasurementsFound","furthestMeasurements","measurement","previousFurthestMeasurement","_ref4","itemSizeCache","min","_i2","furthestMeasurement","measuredSize","lane","outerSize","scrollOffset","calculateRange","rangeExtractor","overscan","attributeName","indexStr","cached","prevNode","measuredItemSize","_this$itemSizeCache$g","itemSize","delta","indexes","virtualItems","k","len","_i3","findNearestBinarySearch","align","scrollSizeProp","scrollSize","maxOffset","_temp","_ref5","_ref5$align","_temp2","_ref6","_ref6$align","initialAlign","_this$getOffsetForInd","elementInDOM","_this$getOffsetForInd2","_toOffset","_temp3","_ref7","_this$getMeasurements","_ref8","low","high","getCurrentValue","middle","currentValue","_ref9","getOffset","startIndex","endIndex","useIsomorphicLayoutEffect","React.useLayoutEffect","React.useEffect","useVirtualizerBase","rerender","React.useReducer","resolvedOptions","flushSync","_React$useState","React.useState","useVirtualizer","FilePreviewContext","DefaultFilePreview","allowDownload","activeEntry","content","downloadUrl","ImageFilePreview","FIVE_MB","TextFilePreview","tooLarge","setTooLarge","setIsLoading","isFailed","setIsFailed","contents","setContents","useEffect","getFileContents","response","VideoFilePreview","mediaInvalid","setMediaInvalid","AudioFilePreview","PdfFilePreview","WordDocumentFilePreview","showDefault","setShowDefault","timeoutId","buildOfficeLivePreviewUrl","AvailablePreviews","getPreviewForEntry","mime","ChevronLeftIcon","FilePreviewContainer","onClose","showHeader","headerActionsLeft","useMediaQuery","Preview","canOpenNext","openNext","canOpenPrevious","openPrevious","Header","KeyboardArrowLeftIcon","KeyboardArrowRightIcon","onNext","onPrevious","actionsLeft","downloadButton","ChevronRightIcon","FilePreviewDialog","Content","useDatePickerState","now","useCurrentDateTime","isPlaceholder","setIsPlaceholder","setStateValue","internalValue","setInternalValue","max","timezone","calendarIsOpen","setCalendarIsOpen","useBaseDatePickerState","clear","calendarDates","setCalendarDates","toCalendarDate","toSafeZoned","dayIsActive","day","isSameDay","getCellProps","date","DatePicker","showCalendarFooter","footer","Calendar","FormDatePicker","format","useDateFormatter","parsedValue","InfoIcon","DashboardSidenav","position","mode","overlayPosition","display","overflow","forceClosed","isMobileMode","leftSidenavStatus","setLeftSidenavStatus","rightSidenavStatus","setRightSidenavStatus","status","isOverlayMode","variants","sizeClassName","getSize","DashboardContent","isScrollable","stableScrollbar","MenuOpenIcon","DashboardNavbar","hideToggleButton","leftSidenavCanBeCompact","shouldToggleCompactMode","shouldShowToggle","handleToggle","handleCompactModeToggle","newStatus","setInLocalStorage","Navbar","useBlockBodyOverflow","disable","DashboardLayout","leftSidenav","onLeftSidenavChange","rightSidenav","initialRightSidenavStatus","onRightSidenavChange","gridClassName","blockBodyOverflow","defaultLeftSidenavStatus","getFromLocalStorage","rightSidenavStatusDefault","userSelected","_setRightSidenavStatus","shouldShowUnderlay","Underlay"],"mappings":"44BAaA,SAASA,IAA4C,CACjD,IAAIC,EAAsBC,EAAAA,OAAe,IAAI,GAAK,EAC9CC,EAAwBC,cAAoB,CAACC,EAAaC,EAAMC,EAAUC,IAAU,CAEpF,IAAIC,EAAMD,GAAY,MAAsCA,EAAQ,KAAQ,IAAIE,IAAO,CACnFT,EAAgB,QAAQ,OAAOM,CAAQ,EACvCA,EAAS,GAAGG,CAAI,CACnB,EAAGH,EACJN,EAAgB,QAAQ,IAAIM,EAAU,CAClC,KAAMD,EACN,YAAaD,EACb,GAAII,EACJ,QAASD,CACrB,CAAS,EACDH,EAAY,iBAAiBC,EAAMC,EAAUC,CAAO,CACvD,EAAE,CAAE,CAAA,EACDG,EAA2BP,cAAoB,CAACC,EAAaC,EAAMC,EAAUC,IAAU,CACvF,IAAII,EACJ,IAAIH,IAAOG,EAA+BX,EAAgB,QAAQ,IAAIM,CAAQ,KAAO,MAAQK,IAAiC,OAAS,OAASA,EAA6B,KAAOL,EACpLF,EAAY,oBAAoBC,EAAMG,EAAID,CAAO,EACjDP,EAAgB,QAAQ,OAAOM,CAAQ,CAC1C,EAAE,CAAE,CAAA,EACDM,EAA+BT,EAAAA,YAAoB,IAAI,CACvDH,EAAgB,QAAQ,QAAQ,CAACa,EAAOC,IAAM,CAC1CJ,EAAqBG,EAAM,YAAaA,EAAM,KAAMC,EAAKD,EAAM,OAAO,CAClF,CAAS,CACT,EAAO,CACCH,CACR,CAAK,EAED,OAAIK,EAAgB,UAAE,IACXH,EACR,CACCA,CACR,CAAK,EACM,CACH,kBAAmBV,EACnB,qBAAsBQ,EACtB,yBAA0BE,CAClC,CACA,CClCA,SAASI,GAA0CC,EAAO,CACtD,GAAI,CAAE,IAAKC,EAAK,kBAAmBC,EAAmB,WAAYC,EAAY,uBAAwBC,CAAwB,EAAGJ,EAC7HK,EAAeC,SAAe,CAC9B,cAAe,GACf,0BAA2B,EACnC,CAAK,EACGC,EAAoBC,GAAwBC,GAAI,CAC5CP,GAAqBQ,GAAmCD,EAAGR,CAAG,IAC1DG,GAAwBA,EAAuBK,CAAC,EACpDJ,EAAS,QAAQ,cAAgB,GAE7C,CAAK,EACGM,EAA6BH,GAAwBC,GAAI,CACrDP,GAAmBA,EAAkBO,CAAC,CAClD,CAAK,EACGG,EAAgB,UAAE,IAAI,CACtB,IAAIC,EAAQR,EAAS,QACrB,GAAIF,EAAY,OAChB,MAAMW,EAAUb,EAAI,QACdc,EAAqBC,GAAyBF,CAAO,EAE3D,GAAI,OAAO,aAAiB,IAAa,CACrC,IAAIG,EAAeR,GAAI,CACfI,EAAM,eAAiBH,GAAmCD,EAAGR,CAAG,GAAGU,EAAuBF,CAAC,EAC/FI,EAAM,cAAgB,EACtC,EAEY,OAAAE,EAAe,iBAAiB,cAAeR,EAAe,EAAI,EAClEQ,EAAe,iBAAiB,YAAaE,EAAa,EAAI,EACvD,IAAI,CACPF,EAAe,oBAAoB,cAAeR,EAAe,EAAI,EACrEQ,EAAe,oBAAoB,YAAaE,EAAa,EAAI,CACjF,CACA,KAAe,CACH,IAAIC,EAAaT,GAAI,CACbI,EAAM,0BAA2BA,EAAM,0BAA4B,GAC9DA,EAAM,eAAiBH,GAAmCD,EAAGR,CAAG,GAAGU,EAAuBF,CAAC,EACpGI,EAAM,cAAgB,EACtC,EACgBM,EAAcV,GAAI,CAClBI,EAAM,0BAA4B,GAC9BA,EAAM,eAAiBH,GAAmCD,EAAGR,CAAG,GAAGU,EAAuBF,CAAC,EAC/FI,EAAM,cAAgB,EACtC,EACY,OAAAE,EAAe,iBAAiB,YAAaR,EAAe,EAAI,EAChEQ,EAAe,iBAAiB,UAAWG,EAAW,EAAI,EAC1DH,EAAe,iBAAiB,aAAcR,EAAe,EAAI,EACjEQ,EAAe,iBAAiB,WAAYI,EAAY,EAAI,EACrD,IAAI,CACPJ,EAAe,oBAAoB,YAAaR,EAAe,EAAI,EACnEQ,EAAe,oBAAoB,UAAWG,EAAW,EAAI,EAC7DH,EAAe,oBAAoB,aAAcR,EAAe,EAAI,EACpEQ,EAAe,oBAAoB,WAAYI,EAAY,EAAI,CAC/E,CACS,CACT,EAAO,CACClB,EACAE,EACAI,EACAI,CACR,CAAK,CACL,CACA,SAASD,GAAmCU,EAAOnB,EAAK,CACpD,GAAImB,EAAM,OAAS,EAAG,MAAO,GAC7B,GAAIA,EAAM,OAAQ,CAEd,MAAMC,EAAgBD,EAAM,OAAO,cAGnC,GAFI,CAACC,GAAiB,CAACA,EAAc,gBAAgB,SAASD,EAAM,MAAM,GAEtEA,EAAM,OAAO,QAAQ,6BAA6B,EAAG,MAAO,EACnE,CACD,OAAOnB,EAAI,SAAW,CAACA,EAAI,QAAQ,SAASmB,EAAM,MAAM,CAC5D,CCzFO,MAAME,GAAUC,EACrBC,EAAAA,IAAC,OAAK,CAAA,EAAE,qCAAsC,CAAA,EAC9C,aAAa,ECcR,SAASC,GAAS,CACvB,UAAAC,EACA,SAAAC,EACA,KAAAC,EACA,MAAAC,EACA,OAAAC,EACA,WAAAC,EACA,KAAAC,EAAO,EACT,EAAkB,CAEd,OAAAR,EAAA,IAAC,MAAA,CACC,UAAWS,EACT,0BACAD,GAAQ,YACRN,CACF,EAEC,SAAAQ,EAAAA,SAAS,IAAIP,EAAkBQ,GAAA,CAC1B,GAAAC,EAAAA,eAA0BD,CAAI,EAChC,OAAOE,EAAAA,aAAwBF,EAAM,CACnC,KAAAP,EACA,MAAAC,EACA,WAAAE,EACA,OAAAD,CAAA,CACD,CACH,CACD,CAAA,CAAA,CAGP,CC7CO,SAASQ,GAAkB1C,EAAmC,CAE5D,MAAA,CAAC,GAAIA,EAAO,KAAM,GAAGA,CAAK,GAAI,YAAa,GAAGA,CAAK,EAAE,CAC9D,CCDA,MAAM2C,GAAS,CACb,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,SACF,EAOaC,GAAyBC,EAAA,WACpC,CAAC,CAAC,KAAAb,EAAM,MAAAc,EAAO,MAAAb,CAAA,EAAQ5B,IAAQ,CAC7B,KAAM,CAAC,QAAA0C,EAAS,QAAAC,CAAO,EAAIC,UAAQ,IAAM,CACvC,MAAMC,GAAQJ,GAAS,IACpB,MAAM,EAAE,EACR,OAAO,CAACK,EAAOC,IAAQA,EAAI,WAAW,CAAC,EAAID,GAAOL,GAAA,YAAAA,EAAO,SAAU,CAAC,EAChE,MAAA,CACL,QAASA,EAAM,MAAM,EAAG,CAAC,EAAE,YAAY,EACvC,QAASH,GAAOO,EAAOP,GAAO,MAAM,CAAA,CACtC,EACC,CAACG,CAAK,CAAC,EAER,OAAAlB,EAAA,IAAC,MAAA,CACC,IAAAvB,EACA,MAAQ4B,EAAqC,OAA7B,CAAC,gBAAiBe,GAClC,UAAWX,EACT,8FACAJ,EACAoB,GAAwBrB,CAAI,CAC9B,EAEC,SAAAe,CAAA,CAAA,CAGP,CACF,EAEA,SAASM,GAAwBrB,EAA2B,CAC1D,OAAQA,EAAM,CACZ,IAAK,KACI,MAAA,UACT,IAAK,KACI,MAAA,UACT,IAAK,KACI,MAAA,UACT,IAAK,KACI,MAAA,YACT,QACS,MAAA,EACX,CACF,CCrCO,MAAMsB,GAAST,EAAA,WACpB,CACE,CACE,UAAAf,EACA,OAAAyB,EACA,KAAAvB,EAAO,KACP,IAAAwB,EACA,KAAAC,EACA,MAAAX,EACA,SAAAY,EAAW,WACX,cAAAC,EACA,KAAAC,EAAO,GACP,GAAGC,GAELxD,IACG,CACH,IAAIyD,EAAiBN,EACnB5B,EAAA,IAAC,MAAA,CACC,IAAAvB,EACA,IAAAmD,EACA,IAAKV,EACL,QAASc,EAAO,OAAS,OACzB,UAAU,kCAAA,CAAA,EAEVF,IAAa,YAAcZ,QAC5BF,GAAuB,CAAA,KAAAZ,EAAY,MAAAc,EAAc,MAAOa,CAAe,CAAA,EAEvE/B,MAAA,MAAA,CAAI,UAAU,oCACb,SAAAA,EAAA,IAACmC,GAAA,CACC,QAAQ,YACR,UAAU,0BAAA,CAEd,CAAA,CAAA,EAGEjB,IACegB,EAAAlC,EAAA,IAACoC,GAAQ,CAAA,MAAAlB,EAAe,SAAegB,CAAA,CAAA,GAG1D,MAAMG,EAAoC,CACxC,GAAGJ,EACH,UAAWxB,EACTP,EACA,2DACAoC,GAAiBlC,CAAI,EACrBuB,EAAS,eAAiB,SAC5B,CAAA,EAGF,OAAOE,EACL7B,EAAAA,IAACuC,GAAM,CAAA,GAAGF,EAAc,GAAIR,EACzB,SAAAK,CAAA,CACH,EAEAlC,EAAA,IAAC,MAAK,CAAA,GAAGqC,EAAe,SAAeH,CAAA,CAAA,CAE3C,CACF,EAEA,SAASI,GAAiBlC,EAAY,CACpC,OAAQA,EAAM,CACZ,IAAK,KACI,MAAA,YACT,IAAK,KACI,MAAA,YACT,IAAK,KACI,MAAA,YACT,IAAK,KACI,MAAA,YACT,IAAK,KACI,MAAA,YAET,QACS,OAAAA,CACX,CACF,CCjCA,SAASoC,GACPhE,EACAC,EACA,CACM,MAAAgE,EAAWC,SAAuB,IAAI,EACtCC,EAAWC,GAAanE,CAAG,EAC3B,CACJ,YAAAoE,KAAmBC,EAAE,KACrB,aAAAC,EACA,SAAA5C,EACA,YAAA6C,EACA,UAAAC,EACA,WAAAC,EACA,mBAAAC,EACA,eAAAC,EACA,YAAAC,EACA,aAAAC,EACA,SAAAC,EAAW,KACX,gBAAAC,EAAkB,GAClB,iBAAAC,EACA,MAAOC,EACP,aAAAC,EACA,SAAUC,EACV,SAAAC,EACA,QAAAC,EACA,iBAAAC,EAAmB,GACnB,kBAAAC,EACA,YAAAC,EACA,iBAAAC,EAAmB,GACnB,SAAAC,EACA,GAAGC,CACD,EAAA5F,EACE6F,EAAkBC,GAAwB,CAC9C,GAAG9F,EACH,eAAgB,EAAA,CACjB,EAEK,CAACJ,EAAOmG,EAAQ,EAAIC,GAAuBhG,CAAK,EAEhD,CAACiG,GAAeC,EAAgB,EAAIC,WAAS,EAAK,EAElDC,QACHC,GAAe,CAAA,gBAAe,GAAC,KAAK,KAAK,aAAW,YAAa,CAAA,EAG9DC,EAAgBd,EAAqBhE,EAAAA,IAAA+E,GAAA,CAAA,CAAsB,EAAK,KAEhE,CAAC,WAAAC,EAAY,WAAAC,CAAU,EAAIC,GAAS,CACxC,GAAGd,EACH,SAAUzB,EACV,aAAcM,GAAawB,GAAgBG,EAAmBE,CAAA,CAC/D,EAED,OACG9E,EAAAA,IAAAmF,GAAA,CAAM,gBAAAd,EAAmC,GAAGW,EAC3C,SAAAI,EAAA,KAACC,GAAA,CACC,IAAK5C,EACL,UAAWhC,EAAK,8BAA+B4D,EAAgB,KAAK,EACpE,QAAS,IAAM,QAEbiB,EAAA3C,EAAS,UAAT,MAAA2C,EAAkB,OACpB,EAEA,SAAA,CAAAtF,EAAA,IAACuF,GAAA,CACC,iBAAkB1C,EAClB,YAAAoB,EACA,MAAO7F,EACP,SAAUmG,GACV,SAAAhB,EACA,iBAAAW,EACA,SAAAC,CAAA,CACF,EACAnE,EAAA,IAACwF,GAAA,CACC,KAAMhH,EAAM,KACZ,iBAAAiF,EACA,WAAAwB,EACA,WAAA/B,EACA,mBAAAC,EACA,SAAAV,EACA,SAAAE,EACA,MAAOvE,EACP,SAAUmG,GACV,aAAAxB,EACA,UAAAE,EACA,YAAAD,EACA,YAAAK,EACA,gBAAAG,EACA,cAAAiB,GACA,iBAAAC,GACA,iBAAAX,EACA,SAAAI,EAEC,SAAAhE,CAAA,CACH,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAWA,SAASoF,GAAY,CACnB,MAAAE,EACA,SAAAC,EACA,iBAAAC,EACA,SAAApC,EACA,YAAAU,EACA,iBAAAC,EACA,SAAAC,CACF,EAAqB,CACnB,MAAMyB,EAAUC,KACVC,EAAaC,EAAA,YAChB1H,GAAa,CACZ,MAAM2H,EAAIP,EAAM,UAAgBQ,GAAAA,EAAG,KAAO5H,CAAG,EACvC6H,EAAW,CAAC,GAAGT,CAAK,EAC1B,OAAIO,EAAI,KACGE,EAAA,OAAOF,EAAG,CAAC,EACpBN,EAASQ,CAAQ,GAEZA,CACT,EACA,CAACT,EAAOC,CAAQ,CAAA,EAIhB,OAAA1F,EAAA,IAACC,GAAA,CACC,UAAWQ,EACT,qCACA8C,IAAa,KAAO,OAAS,MAC/B,EACA,KAAMA,EACN,WAAU,GAET,SAAAkC,EAAM,IACLU,GAAAnG,EAAA,IAACoG,GAAA,CAEC,aAAcD,EAAK,aACnB,UACEA,EAAK,OAASjC,EACZlE,EAAA,IAAC0B,GAAA,CACC,OAAM,GACN,IAAKyE,EAAK,MACV,SAAS,WACT,MAAOA,EAAK,IAAA,CAAA,EAEZ,KAEN,QAAS,IAAMlC,GAAA,YAAAA,EAAckC,GAC7B,SACEhC,EACI,OACA,IAAM,CACa2B,EAAWK,EAAK,EAAE,EACtB,OAEXP,GAAA,MAAAA,EAAS,cAAc,CAAC,SAAU,EAAK,GAGvCA,GAAA,MAAAA,EAAS,WAEb,EAGL,WAAiBO,CAAI,CAAA,EA5BjBA,EAAK,EAAA,CA8Bb,CAAA,CAAA,CAGP,CAuBA,SAASX,GAAahH,EAA0B,CACxC,KAAA,CACJ,SAAAmE,EACA,SAAAF,EACA,aAAAM,EACA,SAAAsD,EACA,MAAAC,EACA,YAAAtD,EACA,WAAAiC,EACA,YAAA5B,EACA,gBAAAG,EACA,cAAAiB,EACA,iBAAAC,EACA,iBAAAX,EACA,UAAAd,EACA,KAAA7C,EACA,SAAA+D,CACE,EAAA3F,EACEoH,EAAUC,KAEVU,EAAWR,EAAA,YACdN,GAAwB,CACvBA,GAASA,GAAS,CAAI,GAAA,OAAeU,GAAA,CACnC,MAAMK,EAAU,CAACL,GAAQ,CAACA,EAAK,IAAM,CAACA,EAAK,KAEpC,MAAA,EADeG,EAAM,UAAUL,GAAMA,EAAG,MAAOE,GAAA,YAAAA,EAAM,GAAE,EAAI,KACzC,CAACK,CAAA,CAC3B,EACIf,EAAM,SAEP1C,IACF0C,EAAQA,EAAM,IAAYU,GAAApD,EAAaoD,CAAI,CAAC,GAE9CE,EAAS,CAAC,GAAGC,EAAO,GAAGb,CAAK,CAAC,EAC/B,EACA,CAACa,EAAOD,EAAUtD,CAAY,CAAA,EAG1B0D,EAAUC,GAAc,CAC5B,GAAGlI,EACH,0BAA2B,GAC3B,OAAQiG,EACR,aAAcC,EACd,MAAO1B,EACP,cAAe,OACf,KAAM,UACN,aAAc,GACd,eAAyB5E,GAAA,CACvBuI,EAAoBvI,CAAe,CACrC,CAAA,CACD,EAEK,CACJ,MAAO,CACL,YAAAwI,EACA,eAAAC,EACA,OAAAC,EACA,UAAAC,EACA,WAAA7D,EACA,cAAA8D,CACF,EACA,KAAAC,EACA,UAAAC,EACA,WAAAC,EACA,cAAAC,CACE,EAAAX,EAEEE,EAAuBU,GAAsB,CACjD,MAAMC,EACJH,EAAW,MAAQP,GAAe,KAC9B,CAAC,GAAGO,EAAW,OAAQ,CAAA,EAAEP,CAAW,EACpC,KACFU,GAAA,MAAAA,EAAQ,KACDf,EAAA,CAACe,EAAO,IAAI,CAAC,EACbvD,GACTwC,EAAS,CAACzF,GAAkBwG,EAASA,EAAO,MAAQD,CAAS,CAAC,CAAC,EAGjEL,EAAc,EAAE,EAChBH,EAAe,IAAI,EACnBE,EAAU,EAAK,CAAA,EAIjBQ,GAAgB,IAAM,CAChB9E,EAAS,SAAWwE,EAAK,UAAU,UAAYxE,EAAS,SAClDgE,EAAA,UAAUhE,EAAS,OAAO,CAEnC,EAAA,CAACA,EAAUgE,EAASQ,CAAI,CAAC,EAE5B,KAAM,CAAC,qBAAAO,GAAsB,gCAAAC,EAA+B,EAC1DC,GAA6BjB,CAAO,EAEhCkB,GAAsBC,EAAmB,IAAM,CAC/CpE,GAAmB,CAACsD,GACtBC,EAAU,EAAI,CAChB,CACD,EAGC,OAAA/G,EAAA,IAAC6H,GAAA,CACC,QAAApB,EACA,cAAeqB,GACf,UAAA7E,EACA,cAAoBhE,GAAA,CAElBA,EAAE,eAAe,CACnB,EAEA,SAAAe,EAAA,IAAC,QAAA,CACC,SAAAmE,EACA,KAAK,OACL,UAAW1D,EACT,yEACAL,IAAS,KAAO,OAAS,MAC3B,EACA,YAAAiD,EACC,GAAG0E,GAAW9C,EAAY,CACzB,IAAKtC,EACL,MAAOO,EACP,SAAUkE,EACV,QAAcnI,GAAA,CAEZ,MAAM+I,EADQ/I,EAAE,cAAc,QAAQ,MAAM,EACvB,MACnB,sDAAA,EAEF,GAAI+I,EAAQ,CACV/I,EAAE,eAAe,EACX,MAAAgJ,EAAY,OAAO,eACrBA,GAAA,MAAAA,EAAW,aACbA,EAAU,mBAAmB,EAC7B1B,EAASyB,EAAO,IAAIE,GAASpH,GAAkBoH,CAAK,CAAC,CAAC,EAE1D,CACF,EACA,oBAAqB,OACrB,gBAAiBpB,EAASI,EAAY,OACtC,aAAc,MACd,YAAa,MACb,WAAY,QACZ,UAAgBjI,GAAA,CACV,GAAAkF,EAAU,OAEd,MAAMgE,EAAQlJ,EAAE,OAEZ,GAAAA,EAAE,MAAQ,QAAS,CAErBA,EAAE,eAAe,EAEjB0H,EAAoBwB,EAAM,KAAK,EAC/B,MACF,CASA,GANIlJ,EAAE,MAAQ,UAAY6H,IACxBC,EAAU,EAAK,EACfC,EAAc,EAAE,GAKhB/H,EAAE,MAAQ,WACV6H,IACCF,IAAgB,GAAKA,GAAe,MACrC,CACAC,EAAe,IAAI,EACnB,MACF,CAGA,GACED,GAAe,OACd3H,EAAE,MAAQ,aAAeA,EAAE,MAAQ,cACpC,CACAA,EAAE,eAAe,EACjB,MACF,CAGA,IACGA,EAAE,MAAQ,aACTA,EAAE,MAAQ,aACVA,EAAE,MAAQ,WACZkJ,EAAM,iBAAmB,GACzBvB,GAAe,MACfN,EAAM,OACN,CACAV,GAAA,MAAAA,EAAS,cAAc,CAAC,SAAU,EAAK,GACvC,MACF,CAGgB4B,GAAqBvI,CAAC,GAEpCwI,GAAgCxI,CAAC,CAErC,EACA,QAASkF,EAAW,OAAYwD,GAChC,QAASxD,EAAW,OAAYwD,EAAA,CACG,CAAA,CACvC,CAAA,CAAA,CAGN,CAEA,SAASnD,GAAuB,CAC9B,SAAAD,EACA,MAAAnG,EACA,aAAAuF,EACA,SAAAE,CACF,EAAwB,CAEhB,MAAAH,EAAarC,EAAAA,QAAQ,IAClB+G,GAAsBhK,CAAK,EACjC,CAACA,CAAK,CAAC,EAGJiK,EAAoBhH,EAAAA,QAAQ,IACzB+G,GAAsBzE,CAAY,EACxC,CAACA,CAAY,CAAC,EAGX2E,EAAevC,EAAA,YAClB3H,GAAuB,CAChB,MAAAmK,EAAW1E,EAAWzF,EAAM,OAAS0E,EAAEe,CAAQ,CAAC,EAAIzF,EAC1DmG,GAAA,MAAAA,EAAWgE,EACb,EACA,CAAChE,EAAUV,CAAQ,CAAA,EAGd,OAAA2E,EACJ9E,GAAa,OACd2E,GAAqB,CAAC,EACtBC,CAAA,CAEJ,CAEA,SAASF,GACPhK,EACyB,CACzB,GAAIA,GAAS,KAIN,OAAAA,EAAM,IAAS0E,GACb,OAAOA,GAAM,SAAWhC,GAAkBgC,CAAW,EAAIA,CACjE,CACH,CAEa,MAAA2F,GAAYC,GAAM,WAAWlG,EAAc,EC9f3CmG,GAAa5I,EACxBC,EAAAA,IAAC,OAAK,CAAA,EAAE,+FAAgG,CAAA,EACxG,gBAAgB,ECWL4I,MAAiB,IACjBC,OAAiB,IACjBC,OAAmB,IACnBC,EAA2B,CACtC,OAAQ,UACV,ECKO,SAASC,GAAkB,CAChC,EAAA/J,EACA,KAAAgK,EACA,OAAAC,EACA,OAAAC,CACF,EAKsB,CACb,MAAA,CACL,KAAAF,EACA,EAAGhK,EAAE,QACL,EAAGA,EAAE,QACL,OAAQiK,GAAU,EAClB,OAAQC,GAAU,EAClB,YAAalK,CAAA,CAEjB,CC1CO,IAAImK,GAAqC,KAEzC,SAASC,GAAqBC,EAAuB,CACtCF,GAAAE,CACtB,CCJO,SAASC,GAAaN,EAAiC,CACrD,MAAA,CACL,KAAMA,EAAK,KACX,IAAKA,EAAK,IACV,MAAOA,EAAK,MACZ,OAAQA,EAAK,MAAA,CAEjB,CCHO,SAASO,GACdC,EACA,CACM,MAAAC,EAAW,IAAI,qBAAgCC,GAAA,CACnDA,EAAQ,QAAiBC,GAAA,CACvB,KAAM,CAAC,MAAAC,EAAO,OAAAC,EAAQ,KAAAC,EAAM,IAAAC,GAAOJ,EAAM,mBACnC,CAACK,EAAIC,CAAM,EACf,CAAC,GAAGT,CAAO,EAAE,KACX,CAAC,CAAA,CAAGS,CAAM,IAAMA,EAAO,IAAI,UAAYN,EAAM,SAC1C,GACH,GAAAK,GAAM,MAAQC,GAAU,KAAM,OAElC,MAAMjB,EAAyB,CAC7B,MAAAY,EACA,OAAAC,EACA,KAAAC,EACA,IAAAC,CAAA,EAEFP,EAAQ,IAAIQ,EAAI,CAAC,GAAGC,EAAQ,KAAAjB,EAAK,CAAA,CAClC,EACDS,EAAS,WAAW,CAAA,CACrB,EAED,CAAC,GAAGD,EAAQ,OAAA,CAAQ,EAAE,QAAkBS,GAAA,CAClCA,EAAO,IAAI,SACJR,EAAA,QAAQQ,EAAO,IAAI,OAAO,CACrC,CACD,CACH,CCWO,SAASC,GAAa,CAC3B,GAAAF,EACA,SAAAG,EACA,IAAA3L,EACA,QAAA4L,EACA,YAAAC,EACA,GAAGxM,CACL,EAAiB,CACT,MAAAyM,EAAgB7H,SAA0B,IAAI,EAC9C,CAAC,kBAAAjF,EAAmB,yBAAAU,CAAwB,EAAIqM,GAAmB,EAEnEnL,EAAQqD,EAAAA,OAAkB,CAC9B,aAAc,CAAC,EAAG,EAAG,EAAG,CAAC,CAC1B,CAAA,EAAE,QAEG+H,EAAa/H,SAAO5E,CAAO,EACjC2M,EAAW,QAAU3M,EAErByJ,EAAAA,gBAAgB,KACT6C,EASHxB,EAAW,OAAOqB,CAAE,EARpBrB,EAAW,IAAIqB,EAAI,CACjB,GAAGrB,EAAW,IAAIqB,CAAE,EACpB,GAAAA,EACA,IAAAxL,EACA,KAAMgM,EAAW,QAAQ,KACzB,QAASA,EAAW,QAAQ,OAAA,CAC7B,EAII,IAAM,CACX7B,EAAW,OAAOqB,CAAE,CAAA,GAErB,CAACA,EAAIG,EAAUK,EAAYhM,CAAG,CAAC,EAG5B,MAAAiM,EAAkBC,GAAuC,CAC7D7B,GAAa,QAAmB8B,GAAA,OAC1BA,EAAQ,SAAStF,EAAAsD,EAAW,IAAIqB,CAAE,IAAjB,YAAA3E,EAAoB,OACvCqF,EAASC,CAAO,CAClB,CACD,CAAA,EAGGC,EAAe5L,GAAoC,SACjD,MAAA6L,EAAYlC,EAAW,IAAIqB,CAAE,EAC7Bc,EAAKtM,EAAI,QACTuM,EACJ,CAACT,EAAc,SACf,CAAClL,EAAM,WACPkL,EAAc,QAAQ,SAASlL,EAAM,SAAS,EAGhD,GAAI+J,IAAqB,CAAC2B,GAAM,CAACD,GAAa,CAACE,EAAiB,CAC9D/L,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EAClB,MACF,CAEAuK,GAAYX,EAAU,EACtBQ,GAAqB,MAAM,EAGvBiB,GACFW,GAAqBhM,CAAC,EAGxBA,EAAE,aAAa,cAAgB,OAE/BI,EAAM,aAAe,CAAC,EAAGJ,EAAE,QAAS,EAAGA,EAAE,SACzCI,EAAM,YAAckK,GAAawB,EAAG,sBAAuB,CAAA,EAC3D,MAAMG,EAAKlC,GAAkB,CAAC,KAAM3J,EAAM,YAAc,EAAAJ,EAAE,EAItDoL,GAAA,MAAAA,EAAS,SACHA,EAAA,QAAQS,EAAmBK,GAAA,CACjClM,EAAE,aAAa,aAAakM,EAAM,EAAG,CAAC,CAAA,CACvC,EAGHpC,EAAY,OAAS,WACrBA,EAAY,aAAekB,EACvBxL,EAAI,UACFA,EAAA,QAAQ,QAAQ,SAAW,SAGtB2M,GAAA9F,EAAAmF,EAAA,SAAQ,cAAR,MAAAW,EAAA,KAAA9F,EAAsB4F,EAAIJ,GAGrC,sBAAsB,IAAM,CAC1BJ,EAAoBW,UAAA,OAAA/F,EAAA+F,EAAE,cAAF,YAAA/F,EAAA,KAAA+F,EAAgBH,EAAIJ,GAAU,CAAA,CACnD,EAGiBrN,EAAA,OAAQ,WAAY6N,EAAY,EAAI,CAAA,EAGlDA,EAAcrM,GAAgD,SAGlE,GAFAA,EAAE,eAAe,EAEb,CAACI,EAAM,YAAa,OAExB,MAAM6J,EAASjK,EAAE,QAAUI,EAAM,aAAa,EACxC8J,EAASlK,EAAE,QAAUI,EAAM,aAAa,EAExCkM,EAAU,CACd,GAAGlM,EAAM,YACT,KAAMA,EAAM,YAAY,KAAO6J,EAC/B,IAAK7J,EAAM,YAAY,IAAM8J,CAAA,EAGzB+B,EAAKlC,GAAkB,CAAC,KAAMuC,EAAS,EAAAtM,EAAG,OAAAiK,EAAQ,OAAAC,EAAO,EAEzDe,EAAStB,EAAW,IAAIqB,CAAE,EAC5BC,KACSkB,GAAA9F,EAAAmF,EAAA,SAAQ,aAAR,MAAAW,EAAA,KAAA9F,EAAqB4F,EAAIhB,GACpCQ,EAAoBW,UAAA,OAAA/F,EAAA+F,EAAE,aAAF,YAAA/F,EAAA,KAAA+F,EAAeH,EAAIhB,GAAO,GAGhD7K,EAAM,aAAe,CAAC,EAAGJ,EAAE,QAAS,EAAGA,EAAE,SACzCI,EAAM,YAAckM,CAAA,EAuCf,MAAA,CAAC,eATe,CACrB,UAAW,CAACnB,EACZ,YAAAS,EACA,UA9BiB5L,GAAoC,SAErD,GADyBd,IACrB,CAACkB,EAAM,YAAa,OAExBgK,GAAqB,IAAI,EACrBmC,IACFA,GAAW,OAAO,EAGpB,MAAMN,EAAKlC,GAAkB,CAAC,KAAM3J,EAAM,YAAa,EAAAJ,EAAE,EAEnD6L,EAAYlC,EAAW,IAAIqB,CAAE,EAC/Ba,KACSM,GAAA9F,EAAAmF,EAAA,SAAQ,YAAR,MAAAW,EAAA,KAAA9F,EAAoB4F,EAAIJ,GACnCJ,KAAoB,OAAA,OAAApF,EAAA+F,EAAE,YAAF,YAAA/F,EAAA,KAAA+F,EAAcH,EAAIJ,EAAW/B,EAAa,QAAO,GAIvE,sBAAsB,IAAM,CAC1BA,EAAY,aAAe,OAC3BA,EAAY,OAAS,WACjBtK,EAAI,SACC,OAAAA,EAAI,QAAQ,QAAQ,QAC7B,CACD,CAAA,EAOD,cAAgBQ,GAA0B,CACxCI,EAAM,UAAYJ,EAAE,MACtB,CAAA,EAGsB,cAAAsL,EAC1B,CAEA,IAAIiB,GACJ,SAASP,GAAqBhM,EAAoB,CAC3CuM,KACHA,GAAa,IAAI,MAER,SAAA,KAAK,OAAOA,EAAU,EAC/BA,GAAW,IACT,8EAGJvM,EAAE,aAAa,aAAauM,GAAY,EAAG,CAAC,CAC9C,CCzNA,eAAuBC,GAA0BC,EAA4B,CAC3E,MAAM/B,EAA6B,CAAA,EAIxB,UAAAxD,KAAQuF,EAAa,MAC1B,GAAAvF,EAAK,OAAS,OAAQ,CAClB,MAAAyD,EAAQzD,EAAK,mBACfyD,GACFD,EAAQ,KAAKC,CAAK,CAEtB,CAGF,UAAWA,KAASD,EAClB,GAAIC,EAAM,OAAQ,CAChB,GAAIA,EAAM,OAAS,YAAa,SAC1B,MAAA+B,EAAO,MAAMC,GAAahC,CAA4B,EAC5D,MAAM,IAAIiC,GAAaF,EAAM/B,EAAM,QAAQ,CAAA,MAClCA,EAAM,cACf,MAAOkC,GAAwBlC,CAAiC,EAGtE,CAEA,eAAgBkC,GACd3F,EACoB,CACd,MAAA4F,EAAS5F,EAAK,eAIhB,IAAAwD,EACD,EAAA,CACDA,EAAU,MAAM,IAAI,QAAQ,CAACqC,EAASC,IAAW,CACxCF,EAAA,YAAYC,EAASC,CAAM,CAAA,CACnC,EAED,UAAWrC,KAASD,EAClB,GAAIC,EAAM,OAAQ,CAChB,GAAIA,EAAM,OAAS,YAAa,SAC1B,MAAA+B,EAAO,MAAMC,GAAahC,CAA4B,EAC5D,MAAM,IAAIiC,GAAaF,EAAM/B,EAAM,QAAQ,CAAA,MAClCA,EAAM,cACf,MAAOkC,GAAwBlC,CAAiC,EAEpE,OACOD,EAAQ,OAAS,EAC5B,CAEA,SAASiC,GAAahC,EAA2C,CACxD,OAAA,IAAI,QAAQ,CAACoC,EAASC,IAAWrC,EAAM,KAAKoC,EAASC,CAAM,CAAC,CACrE,CCtDA,eAAsBC,GACpBC,EACc,CACd,MAAM1G,EAAa,CAAA,EACnB,gBAAiBU,KAAQgG,EACvB1G,EAAM,KAAKU,CAAI,EAEV,OAAAV,CACT,CCwCA,MAAM2G,GAAwB,IAEvB,SAASC,GAAoC,CAClD,GAAApC,EACA,SAAAG,EACA,IAAA3L,EACA,GAAGX,CACL,EAAyB,CACvB,MAAMuB,EAAQqD,EAAAA,OAAuB,CACnC,qBAAsB,IACtB,kBAAmB,MACpB,CAAA,EAAE,QAEG+H,EAAa/H,SAAO5E,CAAO,EACjC2M,EAAW,QAAU3M,EAErByJ,EAAAA,gBAAgB,KACdsB,GAAW,IAAIoB,EAAI,CACjB,GAAGpB,GAAW,IAAIoB,CAAE,EACpB,SAAAG,EACA,GAAAH,EACA,IAAAxL,CAAA,CACD,EACM,IAAM,CACXoK,GAAW,OAAOoB,CAAE,CAAA,GAErB,CAACA,EAAIQ,EAAYL,EAAU3L,CAAG,CAAC,EAG5B,MAAA6N,EAAWxB,GAAuC,OACtD,MAAMhN,EAAU2M,EAAW,QAErB8B,EACJzO,EAAQ,2BACRW,EAAI,YAAY6G,EAAAwF,EAAU,MAAV,YAAAxF,EAAe,SAEjC,MAAO,CAAC,EACNwF,GAAA,MAAAA,EAAW,MACXyB,GACAzO,EAAQ,MAAM,SAASgN,EAAU,IAAI,IACpC,CAAChN,EAAQ,aAAeA,EAAQ,YAAYgN,CAAS,GAAA,EAIpD0B,EAAiBvN,GAAoC,SACnD,MAAA6L,EAAY2B,GAAaxN,CAAC,EAC5B6L,KACSM,GAAA9F,EAAAmF,EAAA,SAAQ,cAAR,MAAAW,EAAA,KAAA9F,EAAsBwF,GACnC,EAiGK,MAAA,CACL,eAAgBV,EAAW,CAAA,EAfN,CACrB,WAAanL,GAAoC,SAC/CA,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EACZ,MAAA6L,EAAY2B,GAAaxN,CAAC,EAC5B6L,GAAawB,EAAQxB,CAAS,KACrBM,GAAA9F,EAAAmF,EAAA,SAAQ,aAAR,MAAAW,EAAA,KAAA9F,EAAqBwF,EAAW7L,GAE/C,EACA,YAzFmBA,GAAoC,SAInD,GAHJA,EAAE,gBAAgB,EAEZI,EAAA,iBAAiB,IAAIJ,EAAE,MAAiB,EAC1CI,EAAM,iBAAiB,KAAO,EAChC,OAGI,MAAAyL,EAAY2B,GAAaxN,CAAC,EAC5B6L,GAAawB,EAAQxB,CAAS,KACrBM,GAAA9F,EAAAmF,EAAA,SAAQ,cAAR,MAAAW,EAAA,KAAA9F,EAAsBwF,GAEjC,aAAazL,EAAM,iBAAiB,EAChC,OAAOoL,EAAW,QAAQ,gBAAmB,aACzCpL,EAAA,kBAAoB,WAAW,IAAM,SACrCyL,KACSM,GAAA9F,EAAAmF,EAAA,SAAQ,iBAAR,MAAAW,EAAA,KAAA9F,EAAyBwF,KAErCsB,EAAqB,GAE5B,EAsEA,YAnEmBnN,GAAoC,CACvDA,EAAE,gBAAgB,EAOZI,EAAA,iBAAiB,OAAOJ,EAAE,MAAiB,EACtC,UAAAK,KAAWD,EAAM,iBACrBJ,EAAE,cAAc,SAASK,CAAO,GAC7BD,EAAA,iBAAiB,OAAOC,CAAO,EAIrC,GAAAD,EAAM,iBAAiB,KAAO,EAChC,OAGI,MAAAyL,EAAY2B,GAAaxN,CAAC,EAC5B6L,GAAawB,EAAQxB,CAAS,IAChC0B,EAAcvN,CAAC,EACf,aAAaI,EAAM,iBAAiB,EACtC,EA6CA,OA1Ca,MAAOJ,GAAoC,aACxDA,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EAClBI,EAAM,iBAAiB,QAEvBmN,EAAcvN,CAAC,EACf,aAAaI,EAAM,iBAAiB,EAE9B,MAAAyL,EAAY2B,GAAaxN,CAAC,EAChC,GAAI6L,EAIE,IAHOM,GAAA9F,EAAAmF,EAAA,SAAQ,cAAR,MAAAW,EAAA,KAAA9F,EAAsBwF,GAG7B,CAACwB,EAAQxB,CAAS,EAChB/B,EAAY,SAAW,aACzBA,EAAY,OAAS,gBAGlB,CAEL,MAAM2D,GAAaC,GAAAC,EAAAnC,EAAW,SAAQ,SAAnB,YAAAkC,EAAA,KAAAC,EAA4B9B,GAG3C/B,EAAY,SAAW,aACbA,EAAA,OACV2D,IAAe,GAAQ,WAAa,cAE1C,CACF,CAcA,CAIgC,CAEpC,CAEA,SAASD,GACPxN,EAC4B,CACxB,GAAA8J,EAAY,cAAgB,KACvB,OAAAH,EAAW,IAAIG,EAAY,YAAY,KACrC9J,EAAE,aAAa,MAAM,SAAS,OAAO,EACvC,MAAA,CACL,KAAM,aACN,GAAI,KACJ,IAAK,KACL,QAAS,IACAiN,GAAqBT,GAA0BxM,EAAE,YAAY,CAAC,CACvE,CAGN,CC3JO,SAAS4N,GAAYC,EAAkD,CAC5E,MAAI,gBAAiBA,EACZA,EAAW,aAAe,KAG/B,cAAeA,EACVA,EAAW,aAAeA,EAAW,UAG1C,cAAeA,EACVA,EAAW,WAAa,KAI/BA,EAAW,KAAK,OAAS,GAAKA,EAAW,KAAK,QAAUA,EAAW,QAEvE,CCmBY,IAAAC,GAAAA,IACVA,EAAA,OAAS,SACTA,EAAA,gBAAkB,kBAClBA,EAAA,YAAc,cACdA,EAAA,MAAQ,QACRA,EAAA,cAAgB,gBAChBA,EAAA,UAAY,YACZA,EAAA,OAAS,SAPCA,IAAAA,GAAA,CAAA,CAAA,EAUAC,IAAAA,IACVA,EAAA,GAAK,IACLA,EAAA,GAAK,KACLA,EAAA,GAAK,IACLA,EAAA,IAAM,KACNA,EAAA,GAAK,IACLA,EAAA,IAAM,KACNA,EAAA,IAAM,MACNA,EAAA,QAAU,UACVA,EAAA,SAAW,WACXA,EAAA,YAAc,cACdA,EAAA,WAAa,aACbA,EAAA,SAAW,WACXA,EAAA,OAAS,SACTA,EAAA,WAAa,aACbA,EAAA,QAAU,UAfAA,IAAAA,IAAA,CAAA,CAAA,ECvGL,MAAMC,GAAa,OCoBnB,SAASC,GAAgB1O,EAA6B,SAC3D,KAAM,CAAC,YAAA2O,EAAa,uBAAAC,EAAwB,GAAGpI,GAAcxG,EACvDa,EAAQgO,GAAwB7O,CAAK,EACrCmE,EAAWD,SAAuB,IAAI,EAEtC4K,EADWC,MACoBJ,IAAgB,MAE/CK,EACJxN,EAAA,IAACyN,GAAA,CACC,OAAQ,EACR,UAAU,eACV,OAAQpO,EAAM,eACd,aAAcA,EAAM,kBACpB,KAAK,UACL,WAAYsD,EACZ,qBAAsB,GACtB,kBAAmB,GAEnB,SAAA3C,EAAA,IAAC0N,IAAgB,MAAArO,CAAc,CAAA,CAAA,CAAA,EAI7BsO,EAA+C,CACnD,QAAc1O,GAAA,CACZA,EAAE,gBAAgB,EAClBA,EAAE,eAAe,EACZ2O,GAAc3O,CAAC,EAGlBI,EAAM,kBAAkB,EAAK,EAF7BA,EAAM,kBAAkB,EAAI,CAIhC,CAAA,EAGIjB,EAAQiB,EAAM,cACdkF,EAAWlF,EAAM,iBAEvB,cACGwO,WACC,CAAA,SAAA,CAAAzI,EAAA,KAAC0I,GAAA,CACC,IAAKnL,EACL,aAAcgL,EACd,aAAeL,EAAuC,OAApBtN,EAAAA,IAAC+N,KAAc,EAChD,GAAG/I,EAEJ,SAAA,CAAAhF,EAAA,IAACgO,GAAA,CACC,eAAe1I,EAAAjG,EAAM,gBAAN,YAAAiG,EAAqB,MACpC,MAAAjG,EACA,aAAcsO,EACd,MAAOvP,EAAM,MACb,SAAsBmK,GAAA,CACpBhE,EAAS,CAAC,MAAOgE,EAAU,IAAKnK,EAAM,IAAI,CAC5C,CAAA,CACF,EACA4B,EAAA,IAACiO,GAAA,CACC,UAAU,iCACV,KAAK,IAAA,CACP,EACAjO,EAAA,IAACgO,GAAA,CACC,eAAe5C,EAAA/L,EAAM,gBAAN,YAAA+L,EAAqB,IACpC,MAAA/L,EACA,aAAcsO,EACd,MAAOvP,EAAM,IACb,SAAsBmK,GAAA,CACpBhE,EAAS,CAAC,MAAOnG,EAAM,MAAO,IAAKmK,EAAS,CAC9C,CAAA,CACF,CAAA,CAAA,CACF,EACCiF,CACH,CAAA,CAAA,CAEJ,CAEA,SAASI,GAAc3O,EAAwC,CAC7D,MAAO,CAAC,OAAQ,SAAU,WAAW,EAAE,SACpCA,EAAE,cAA8B,WAAa,EAAA,CAElD,CC3EO,SAASiP,GAAoB1P,EAAiC,CAC7D,KAAA,CACJ,MAAO,CAAC,SAAA+F,EAAU,OAAA4J,EAAQ,MAAA/P,EAAO,IAAAK,CAAG,EACpC,WAAY,CAAC,QAAA+H,EAAS,MAAA4H,CAAK,GACzBC,GAAc,CAChB,KAAM7P,EAAM,IAAA,CACb,EAEK8P,EAA2C,CAC/C,SAAerP,GAAA,CACbsF,EAAStF,EAAIsP,GAAyBtP,CAAC,EAAI,IAAI,CACjD,EACA,OAAAkP,EACA,MAAOK,GAAyBpQ,CAAK,EACrC,QAAAoI,EACA,aAAc4H,GAAA,YAAAA,EAAO,QACrB,SAAU3P,CAAA,EAGZ,aAAQyO,GAAiB,CAAA,GAAGnF,GAAWuG,EAAW9P,CAAK,CAAG,CAAA,CAC5D,CAEO,SAASgQ,GAAyBhQ,EAA6B,CACpE,KAAM,CAAC,MAAAiQ,EAAO,IAAAC,EAAK,OAAAC,CAAM,EAAInQ,GAAS,CAAA,EAChCoQ,EAAqC,CAAC,OAAAD,GACxC,GAAA,CACEF,IACFG,EAAU,MACR,OAAOH,GAAU,SAAWI,GAAqBJ,CAAK,EAAIA,GAE1DC,IACFE,EAAU,IAAM,OAAOF,GAAQ,SAAWG,GAAqBH,CAAG,EAAIA,QAE9D,CAEZ,CACO,OAAAE,CACT,CAEO,SAASL,GAAyB,CACvC,MAAAE,EACA,IAAAC,EACA,OAAAC,CACF,EAA6B,GAAuB,CAClD,MAAMG,EAAmC,CACvC,OAAAH,CAAA,EAEF,OAAIF,IACYK,EAAA,MAAQL,EAAM,oBAE1BC,IACYI,EAAA,IAAMJ,EAAI,oBAEnBI,CACT,CC9DO,SAASC,GACdjR,EAIwC,OACjC,MAAA,CACL,GAAGA,EACH,gBAAiBkP,GAAe,QAChC,QAAS,CACP,KAAMD,EAAkB,gBACxB,eACEzH,EAAAxH,EAAQ,UAAR,YAAAwH,EAAiB,eACjBiJ,GACGS,GAAiB,CAAC,EAAgC,cAAc,CACnE,CACJ,CAAA,CAEJ,CAEO,SAASC,GACdnR,EACwC,CACxC,OAAOiR,GAAgB,CACrB,IAAK,aACL,MAAOG,EAAQ,cAAc,EAC7B,GAAGpR,CAAA,CACJ,CACH,CAEO,SAASqR,GACdrR,EACwC,CACxC,OAAOiR,GAAgB,CACrB,IAAK,aACL,MAAOG,EAAQ,cAAc,EAC7B,GAAGpR,CAAA,CACJ,CACH,CCvCO,MAAMsR,GAA6D,CACxE,IAAK,OACL,MAAOF,EAAQ,MAAM,EACrB,YAAaA,EAAQ,kBAAkB,EACvC,gBAAiBlC,GAAe,GAChC,QAAS,CACP,KAAMD,EAAkB,OACxB,aAAc,KACd,QAAS,CACP,CAAC,IAAK,KAAM,MAAOmC,EAAQ,MAAM,EAAG,MAAO,MAAM,EACjD,CACE,IAAK,KACL,MAAOA,EAAQ,OAAO,EACtB,MAAO,OACT,EACA,CACE,IAAK,KACL,MAAOA,EAAQ,OAAO,EACtB,MAAO,OACT,EACA,CACE,IAAK,KACL,MAAOA,EAAQ,OAAO,EACtB,MAAO,OACT,EACA,CAAC,IAAK,KAAM,MAAOA,EAAQ,KAAK,EAAG,MAAO,KAAK,EAC/C,CACE,IAAK,KACL,MAAOA,EAAQ,aAAa,EAC5B,MAAO,aACT,EACA,CACE,IAAK,KACL,MAAOA,EAAQ,eAAe,EAC9B,MAAO,MACT,EACA,CACE,IAAK,KACL,MAAOA,EAAQ,WAAW,EAC1B,MAAO,WACT,EACA,CACE,IAAK,KACL,MAAOA,EAAQ,SAAS,EACxB,MAAO,SACT,EACA,CACE,IAAK,KACL,MAAOA,EAAQ,QAAQ,EACvB,MAAO,QACT,CACF,CACF,CACF,EAEaG,GAA4C,CACvDD,GACA,CACE,IAAK,SACL,MAAOF,EAAQ,YAAY,EAC3B,YAAaA,EAAQ,qCAAqC,EAC1D,gBAAiBlC,GAAe,GAChC,QAAS,CACP,KAAMD,EAAkB,OACxB,aAAc,KACd,QAAS,CACP,CAAC,IAAK,KAAM,MAAOmC,EAAQ,SAAS,EAAG,MAAO,EAAK,EACnD,CAAC,IAAK,KAAM,MAAOA,EAAQ,QAAQ,EAAG,MAAO,EAAI,CACnD,CACF,CACF,EACAD,GAAgB,CACd,YAAaC,EAAQ,wBAAwB,CAAA,CAC9C,EACDC,GAAgB,CACd,YAAaD,EAAQ,4BAA4B,CAAA,CAClD,EACD,CACE,IAAK,WACL,MAAOA,EAAQ,UAAU,EACzB,YAAaA,EAAQ,qCAAqC,EAC1D,gBAAiBlC,GAAe,GAChC,QAAS,CACP,KAAMD,EAAkB,YACxB,MAAOE,EACT,CACF,CACF,ECpGaqC,GAAuB,UCE7B,SAASC,GACdC,EACmB,CACnB,GAAI,CAACA,EAAgB,MAAO,GAC5B,IAAIC,EAAsC,CAAA,EACtC,GAAA,CACFA,EAAmB,KAAK,MAAM,KAAK,mBAAmBD,CAAc,CAAC,CAAC,EACtEC,EAAiB,IAAmBC,IAE9BA,EAAY,UAAY,OAC1BA,EAAY,MAAQA,EAAY,UAE3BA,EACR,OACS,CAEZ,CACO,OAAAD,CACT,CCTgB,SAAAE,GACdC,EACAC,EACQ,CAaJ,MAZA,CAACD,IAGLA,EAAgBC,EAEZD,EACG,OAAezJ,GAAAA,EAAK,QAAU,EAAE,EAChC,IAAIA,GAAQ2J,GAAe3J,EAAM0J,CAAO,CAAC,EAH5CD,EAMJA,EAAeA,EAAa,OAAaG,GAAA,CAACA,EAAG,UAAU,EAEnD,CAACH,EAAa,QACT,GAGF,mBAAmB,KAAK,KAAK,UAAUA,CAAY,CAAC,CAAC,CAC9D,CAEA,SAASE,GACPJ,EACAG,EACA,OACA,MAAMG,EAAeH,EAAQ,QAAUI,EAAE,MAAQP,EAAY,GAAG,EAG5D,IAAAM,GAAA,YAAAA,EAAc,QAAQ,QAAS,SAAU,CAC3C,MAAM1I,GAAU0I,EAAa,QAAQ,SAAW,CAAI,GAAA,KAClDE,GAAKA,EAAE,MAAQR,EAAY,KAAA,EAG7B,GAAIpI,EACK,MAAA,CAAC,GAAGoI,EAAa,MAAOpI,EAAO,MAAO,SAAUA,EAAO,IAElE,CAEI,OAAAhC,EAAA0K,GAAA,YAAAA,EAAc,eAAd,MAAA1K,EAA4B,SAClBoK,EAAA,aAAkBM,EAAa,cAGtCN,CACT,CC9CgB,SAAAS,GACdN,EACAO,EACA,CACM,KAAA,CAACC,CAAY,EAAIC,KACjBC,EAAWC,KAEXhB,EAAiBa,EAAa,IAAIf,EAAoB,EAEtDmB,EAAoCpP,EAAAA,QAAQ,IAAM,CACtD,GAAI,CAACwO,EAAS,MAAO,GACf,MAAAa,EAAUnB,GAAqBC,CAAc,EAGnD,OAACY,GAAiB,CAAA,GAAI,QAAe/R,GAAA,CACnC,GAAI,CAACqS,EAAQ,QAAU,EAAE,MAAQrS,CAAG,EAAG,CACrC,MAAMsS,EAASd,EAAQ,KAAUI,GAAAA,EAAE,MAAQ5R,CAAG,EAC9CqS,EAAQ,KAAK,CACX,IAAArS,EACA,MAAOsS,EAAO,QAAQ,aACtB,SAAUA,EAAO,gBACjB,WAAY,EAAA,CACb,CACH,CAAA,CACD,EAGOD,EAAA,KACN,CAACE,EAAGC,IACFhB,EAAQ,aAAeI,EAAE,MAAQW,EAAE,GAAG,EACtCf,EAAQ,aAAeI,EAAE,MAAQY,EAAE,GAAG,CAAA,EAGnCH,CACN,EAAA,CAAClB,EAAgBY,EAAeP,CAAO,CAAC,EAErCiB,EAAwB/K,EAAA,YAC3BgL,GAAsC,CAC/B,MAAAC,EAAa,CAAC,GAAGP,CAAc,EACrC,OAAAM,EAAO,QAAiB3S,GAAA,CACtB,MAAMC,EAAM,OAAOD,GAAU,SAAWA,EAAM,IAAMA,EAC9C6S,EAAQD,EAAW,UAAef,GAAAA,EAAE,MAAQ5R,CAAG,EACjD4S,EAAQ,IACCD,EAAA,OAAOC,EAAO,CAAC,CAC5B,CACD,EACMD,CACT,EACA,CAACP,CAAc,CAAA,EAGXS,EAAanL,EAAA,YAChB6J,GAAoC,CAC7BJ,MAAAA,EAAiBG,GAAqBC,EAAcC,CAAO,EAC7DL,EACWa,EAAA,IAAIf,GAAsBE,CAAc,EAErDa,EAAa,OAAOf,EAAoB,EAEjCiB,EAAA,CAAC,OAAQ,IAAIF,CAAY,IAAK,CAAC,QAAS,EAAA,CAAK,CACxD,EACA,CAACR,EAASU,EAAUF,CAAY,CAAA,EAG5Bc,EAAMpL,EAAA,YACT6J,GAAoC,CAEnC,MAAMa,EAAiB,CAAC,GADPK,EAAsBlB,CAAY,EACd,GAAGA,CAAY,EACpDsB,EAAWT,CAAc,CAC3B,EACA,CAACK,EAAuBI,CAAU,CAAA,EAG9BE,EAASrL,EAAA,YACZ1H,GAAa6S,EAAWJ,EAAsB,CAACzS,CAAG,CAAC,CAAC,EACrD,CAACyS,EAAuBI,CAAU,CAAA,EAG7B,MAAA,CACL,IAAAC,EACA,OAAAC,EACA,WAAAF,EACA,eAAAT,EACA,eAAAjB,CAAA,CAEJ,CClFO,MAAM6B,GAA0BpQ,EAAA,WAGrC,CAACzC,EAAOC,IAAQ,CAEhB,KAAM,CAAC,WAAA6S,EAAY,OAAAC,EAAQ,GAAGtP,GAAYzD,EAE1C,OAAI8S,EACMtR,EAAAA,IAAAwR,GAAA,CAAqB,OAAAD,EAAiB,GAAGtP,EAAU,IAAAxD,CAAU,CAAA,EAG/DuB,EAAAA,IAAAyR,GAAA,CAAmB,OAAAF,EAAiB,GAAGtP,EAAU,IAAAxD,CAAU,CAAA,CACrE,CAAC,EAMY+S,GAAuBvQ,aAGlC,CAAC,CAAC,OAAAsQ,EAAQ,GAAGtP,GAAWxD,IAEtBuB,EAAA,IAAC0R,GAAA,CACC,QAAQ,UACR,KAAK,KACL,MAAM,QACN,OAAO,aACP,OAAO,SACP,IAAAjT,EACA,cAAUsG,GAAsB,EAAA,EAC/B,GAAG9C,EAEJ,SAACjC,EAAA,IAAA2R,EAAA,CAAO,GAAGJ,EAAO,KAAO,CAAA,CAAA,CAAA,CAG9B,EAEYE,GAAqBxQ,aAGhC,CAAC,CAAC,OAAAsQ,EAAQ,SAAApR,EAAU,GAAG8B,CAAQ,EAAGxD,IAAQ,CAC1C,MAAMmT,EAAYL,EAAO,QAAQ,OAASxE,EAAkB,cAE1D,OAAA3H,EAAA,KAACsM,GAAA,CACC,QAAQ,UACR,KAAK,KACL,MAAM,UACN,OAAO,eACP,OAAO,oBACP,QAAS,CAACE,GAAa5R,MAAC+E,GAAsB,CAAA,CAAA,EAC9C,IAAAtG,EACC,GAAGwD,EAEJ,SAAA,CAAAjC,EAAA,IAAC,OAAA,CACC,UAAWS,EACT,CAACmR,GAAa,2CAChB,EAEA,SAAC5R,EAAA,IAAA2R,EAAA,CAAO,GAAGJ,EAAO,KAAO,CAAA,CAAA,CAC3B,EACCpR,CAAA,CAAA,CAAA,CAGP,CAAC,ECtEM,SAAS0R,GAAkB,CAChC,OAAAN,CACF,EAA0C,CAClC,KAAA,CAAC,MAAAO,GAASC,IAGd,OAAA/R,EAAA,IAACgS,GAAA,CACC,KAAK,KACL,KAAM,GAAGT,EAAO,GAAG,SACnB,cAAc,SACd,gBAAiBA,EAAO,QAAQ,gBAChC,YACEA,EAAO,QAAQ,YACXO,EAAMP,EAAO,QAAQ,WAAW,EAChC,OAEN,kBACEA,EAAO,QAAQ,kBACXO,EAAMP,EAAO,QAAQ,iBAAiB,EACtC,OAGL,SAAAA,EAAO,QAAQ,QAAQ,IAAIjK,SACzB2K,GAAsB,CAAA,MAAO3K,EAAO,IAClC,SAAO,OAAAA,EAAO,OAAU,SACvBA,EAAO,MAEPtH,EAAA,IAAC2R,EAAO,CAAA,GAAGrK,EAAO,KAAO,CAAA,CAAA,EAJlBA,EAAO,GAMlB,CACD,CAAA,CAAA,CAGP,CCrBO,SAAS4K,GACd1T,EACA,CACA,KAAM,CAAC,cAAA2T,EAAe,WAAAb,EAAY,OAAAC,EAAQ,MAAArQ,GAAS1C,EAEjD,OAAA4G,EAAA,KAACqI,GAAA,CACC,OAAQ,GACR,KAAK,UACL,QAAUrP,GAAgC,CACpCA,IAAU,QACZ+T,EAAc/T,CAAK,CAEvB,EAEA,SAAA,CAAC4B,EAAA,IAAAqR,GAAA,CAAwB,WAAAC,EAAwB,OAAAC,EAC9C,SACHrQ,EAAA,EACAlB,EAAAA,IAACoS,GAAyB,CAAA,GAAG5T,EAAO,CAAA,CAAA,CAAA,CAG1C,CAEO,SAAS4T,GAAwB,CACtC,OAAAb,EACA,MAAAc,EACA,MAAAjU,EACA,SAAAkU,CACF,EAAqC,CACnC,MAAMC,EAAOC,GAA6C,CACxD,cAAe,CACb,CAACjB,EAAO,GAAG,EAAG,CAAC,MAAAnT,EAAO,SAAAkU,CAAQ,CAChC,CAAA,CACD,EACK,CAAC,MAAAG,EAAO,OAAAC,CAAM,EAAIC,GAAiB,EAEvC,OAAAvN,EAAA,KAACwN,GAAO,CAAA,KAAK,KACX,SAAA,CAAA5S,MAAC6S,IACC,SAAC7S,EAAA,IAAA2R,EAAA,CAAO,GAAGJ,EAAO,KAAO,CAAA,EAC3B,EACAvR,EAAAA,IAAC8S,GAAW,CAAA,QAAQ,6BAClB,SAAA1N,EAAA,KAAC2N,GAAA,CACC,KAAAR,EACA,GAAIG,EACJ,SAAuBM,GAAA,CACfP,EAAAO,EAAUzB,EAAO,GAAG,CAAC,CAC7B,EAEC,SAAA,CAAOA,EAAA,aACLvR,EAAAA,IAAA,MAAA,CAAI,UAAU,2BACb,eAAC2R,EAAO,CAAA,GAAGJ,EAAO,WAAA,CAAa,CACjC,CAAA,EAEDc,CAAA,CAAA,CAAA,EAEL,QACCY,GACC,CAAA,SAAAjT,EAAA,IAAC0R,GAAA,CACC,KAAMgB,EACN,KAAK,SACL,QAAQ,OACR,MAAM,UACN,KAAK,KAEL,SAAA1S,EAAAA,IAAC2R,EAAM,CAAA,QAAQ,OAAQ,CAAA,CAAA,CAAA,EAE3B,CACF,CAAA,CAAA,CAEJ,CCpEgB,SAAAuB,GACdC,EACAC,EACAC,EAIA,CACA,OAAOC,GAAS,CACd,SAAU,CAAC,GAAGH,EAAS,MAAM,GAAG,EAAGC,CAAW,EAC9C,QAAS,IAAMG,GAAYJ,EAAUC,CAAW,EAChD,gBAAiBI,GACjB,GAAGH,CAAA,CACJ,CACH,CAEA,eAAeE,GAAYJ,EAAkBM,EAAiB,CACrD,OAAAC,GAAU,IAAcP,EAAU,CAAC,OAAAM,EAAO,EAAE,KAAUE,GACvD,YAAaA,EAAE,KACVA,EAAE,KAGF,CAAC,QADQ,OAAO,OAAOA,EAAE,IAAI,EAAE,KAAU7Q,GAAA,MAAM,QAAQA,CAAC,CAAC,CACjD,CAElB,CACH,CCnCgB,SAAA8Q,GACdT,EACAC,EACAC,EACA,CACA,OAAOC,GAAS,CACd,SAAU,CAACH,EAAUC,CAAW,EAChC,QAAS,IAAMS,GAAWV,EAAUC,CAAW,EAC/C,GAAGC,CAAA,CACJ,CACH,CAEA,eAAeQ,GACbV,EACAM,EACmB,CACZ,OAAAC,GAAU,IAAIP,EAAU,CAAC,OAAAM,CAAA,CAAO,EAAE,KAAUE,GAAAA,EAAE,IAAI,CAC3D,CCcO,SAASG,GAAqB,CACnC,MAAA5S,EACA,UAAAhB,EACA,WAAA6T,EACA,MAAA3V,EACA,aAAAuF,EAAe,GACf,YAAAN,EAAc6L,EAAQ,gBAAgB,EACtC,kBAAA8E,EAAoB9E,EAAQ,iBAAiB,EAC7C,SAAA3K,EACA,YAAA0P,EACA,aAAAC,EACA,QAAA1N,EACA,UAAA2N,EACA,YAAAf,EACA,SAAAD,EACA,SAAA/I,EACA,SAAAgK,CACF,EAA8B,OACtB,MAAAzR,EAAWD,SAA0B,IAAI,EACzC,CAACQ,EAAY8D,CAAa,EAAIrC,WAAS,EAAE,EACzC,CAAC0P,EAAeC,CAAgB,EAAI9L,EACxCpK,EACAuF,EACAY,CAAA,EAEIgQ,EAAQrB,GAAoBC,EAAU,CAC1C,MAAOjQ,EACP,GAAGkQ,CAAA,CACJ,EACK,CAAC,MAAAtB,GAASC,IAEV1N,EAAkBC,GAAwB,CAAC,KAAM,IAAK,CAAA,EAE5D,OAAI+P,EAEAjP,OAAC,OAAI,UAAAlF,EACH,SAAA,CAAAF,EAAA,IAAC,MAAI,CAAA,UAAWqE,EAAgB,MAAQ,SAAMnD,EAAA,EAC9ClB,EAAA,IAAC,MAAA,CACC,UAAWS,EACT,2BACAsT,EACAvN,GAAW,eACb,EAEA,SAACxG,EAAAA,IAAAwU,GAAA,CAAgB,QAAS,GAAO,KAAK,OACpC,SAAAxU,EAAA,IAACyU,GAAA,CACC,SAAArK,EACA,SAAA+I,EACA,QAASkB,EACT,YAAAjB,EACA,YAAa,IAAM,CACjBkB,EAAiB,EAAE,EACnBtN,EAAc,EAAE,EAChB,sBAAsB,IAAM,UAC1B1B,EAAA3C,EAAS,UAAT,MAAA2C,EAAkB,SAClB8F,EAAAzI,EAAS,UAAT,MAAAyI,EAAkB,OAAM,CACzB,CACH,CAAA,CAAA,EAEJ,CAAA,CACF,EACC6I,GAAe,CAACC,GACflU,EAAA,IAAC,OAAI,UAAWqE,EAAgB,YAAc,SAAY4P,EAAA,EAE3DC,GACElU,EAAAA,IAAA,MAAA,CAAI,UAAWqE,EAAgB,MAAQ,SAAa6P,EAAA,CAEzD,CAAA,CAAA,EAKFlU,EAAA,IAAC0U,GAAA,CACC,UAAAxU,EACA,gBAAe,GACf,QAAAsG,EACA,aAAA0N,EACA,YAAAD,EACA,MAAM,QACN,QAAO,GACP,WAAAF,EACA,YAAajC,EAAMzO,CAAW,EAC9B,kBAAmByO,EAAMkC,CAAiB,EAC1C,MAAA9S,EACA,UAAWqT,EAAM,WACjB,OAAOjP,EAAAiP,EAAM,OAAN,YAAAjP,EAAY,QACnB,WAAApC,EACA,mBAAoB8D,EACpB,cAAc,SACd,cAAAqN,EACA,kBAAmBC,EACnB,IAAK3R,EACL,UAAAwR,EACA,SAAA/J,EACA,SAAAgK,EAEC,SACCO,GAAA3U,EAAA,IAACiS,GAAA,CACC,MAAO0C,EAAM,GAEb,YAAaA,EAAM,YACnB,UAAY3U,EAAA,IAAA0B,GAAA,CAAO,IAAKiT,EAAM,MAAO,KAAK,KAAK,MAAOA,EAAM,IAAM,CAAA,EAEjE,SAAMA,EAAA,IAAA,EAJFA,EAAM,EAKb,CAAA,CAAA,CAIR,CAUA,SAASF,GAAqB,CAC5B,QAAAG,EACA,YAAAC,EACA,SAAA1B,EACA,SAAA/I,EACA,YAAAgJ,CACF,EAA8B,CACtB,KAAA,CAAC,KAAA0B,EAAM,UAAA7R,CAAA,EAAa2Q,GACxB,GAAGT,CAAQ,IAAIyB,CAAO,GACtBxB,CAAA,EAGE,OAAAnQ,GAAa,EAAC6R,GAAA,MAAAA,EAAM,OACf9U,MAAC+U,MAAoB,UAAW,EAIvC3P,EAAA,KAACiG,GAAE,IAAF,CACC,UAAW5K,EACT,2BACA2J,GAAY,sDACd,EAEC,GAAG4K,GAEJ,SAAA,CAAChV,EAAAA,IAAA0B,GAAA,CAAO,IAAKoT,EAAK,MAAM,MAAO,MAAOA,EAAK,MAAM,IAAM,CAAA,SACtD,MACC,CAAA,SAAA,CAAA9U,MAAC,MAAI,CAAA,UAAU,oBAAqB,SAAA8U,EAAK,MAAM,KAAK,QACnD,MAAI,CAAA,UAAU,qBAAsB,SAAAA,EAAK,MAAM,YAAY,CAAA,EAC9D,QACC1S,GAAQ,CAAA,YAAQuP,EAAM,CAAA,QAAQ,cAAc,EAC3C,SAAA3R,EAAA,IAACiV,EAAA,CACC,UAAU,qBACV,KAAK,KACL,QAASJ,EACT,SAAAzK,EAEA,eAAC8K,GAAS,EAAA,CAAA,CAAA,EAEd,CAAA,CAAA,EAjBI,SAAA,CAoBV,CAEA,SAASH,IAAkB,CACzB,cACG1J,GAAE,IAAF,CAAM,UAAU,2BAA4B,GAAG2J,GAC9C,SAAA,CAAAhV,EAAA,IAACmV,GAAS,CAAA,QAAQ,OAAO,KAAK,YAAY,EAC1C/P,EAAAA,KAAC,MAAI,CAAA,UAAU,yBACb,SAAA,CAACpF,EAAAA,IAAAmV,GAAA,CAAS,UAAU,SAAU,CAAA,EAC9BnV,EAAAA,IAACmV,GAAS,CAAA,UAAU,iBAAkB,CAAA,CAAA,EACxC,EACCnV,EAAA,IAAAmV,GAAA,CAAS,QAAQ,OAAO,KAAK,YAAY,CAC5C,CAAA,CAAA,CAEJ,CAKO,SAASC,GAAyB,CACvC,KAAA9L,EACA,GAAGtE,CACL,EAAkC,CAC1B,KAAA,CAAC,YAAAqQ,GAAeC,KAChB,CACJ,MAAO,CAAC,SAAA/Q,EAAU,MAAAnG,EAAQ,EAAE,EAC5B,WAAY,CAAC,QAAAoI,EAAS,MAAA4H,CAAK,GACzBC,GAAc,CAChB,KAAA/E,CAAA,CACD,EAGC,OAAAtJ,EAAA,IAAC8T,GAAA,CACC,MAAA1V,EACA,SAAUA,GAAS,CACjBmG,EAASnG,CAAK,EACdiX,EAAY/L,CAAI,CAClB,EACA,QAAA9C,EACA,aAAc4H,GAAA,YAAAA,EAAO,QACpB,GAAGpJ,CAAA,CAAA,CAGV,CC9OO,SAASuQ,GAA2B,CACzC,OAAAhE,CACF,EAA+C,CAE3C,OAAAvR,EAAA,IAACoV,GAAA,CACC,KAAM,GAAG7D,EAAO,GAAG,SACnB,SACEA,EAAO,QAAQ,SACXA,EAAO,QAAQ,SACf,qBAAqBA,EAAO,QAAQ,KAAK,EAAA,CAAA,CAIrD,CCbO,SAASiE,GAAqB,CACnC,OAAAjE,CACF,EAA8C,CAE1C,OAAAvR,EAAA,IAACkO,GAAA,CACC,IAAKqD,EAAO,QAAQ,IACpB,IAAKA,EAAO,QAAQ,IACpB,KAAK,KACL,KAAM,GAAGA,EAAO,GAAG,SACnB,YAAY,MACZ,uBAAwB,EAAA,CAAA,CAG9B,CCbO,MAAMkE,GACX,CACE,IAAKvG,EAAQ,IAAI,EACjB,KAAMA,EAAQ,QAAQ,EACtB,IAAKA,EAAQ,iBAAiB,EAC9B,KAAMA,EAAQ,6BAA6B,EAC3C,IAAKA,EAAQ,cAAc,EAC3B,KAAMA,EAAQ,0BAA0B,EACxC,QAASA,EAAQ,eAAe,EAChC,SAAUA,EAAQ,UAAU,EAC5B,YAAaA,EAAQ,kBAAkB,EACvC,WAAYA,EAAQ,aAAa,EACjC,SAAUA,EAAQ,WAAW,EAC7B,IAAKA,EAAQ,SAAS,EACtB,WAAYA,EAAQ,gBAAgB,EACpC,QAASA,EAAQ,YAAY,EAC7B,OAAQA,EAAQ,aAAa,CAC/B,ECRK,SAASwG,GAAiB,CAC/B,OAAAnE,CACF,EAAwE,SACtE,MAAMoE,EAAUpE,EAAO,QACjBgB,EAAO+C,KACPM,EAAmBC,GAAS,CAChC,QAAStD,EAAK,QACd,KAAM,GAAGhB,EAAO,GAAG,WAAA,CACpB,EACD,cACG1D,WACE,CAAA,SAAA,EAAAvI,EAAAiM,EAAO,YAAP,MAAAjM,EAAkB,OACjBtF,EAAA,IAACgS,GAAA,CACC,cAAc,SACd,KAAM,GAAGT,EAAO,GAAG,YACnB,UAAU,QACV,KAAK,KAEJ,cAAO,0BAAW,IACjBe,GAAAtS,EAAA,IAACiS,IAAoB,MAAOK,EACzB,SAACtS,EAAA,IAAA2R,EAAA,CAAO,GAAG8D,GAAoBnD,CAAQ,CAAG,CAAA,GADlCA,CAEX,EACD,CAAA,EAED,KACHsD,IAAqB,UAAY,KAChC5V,EAAA,IAAC8V,GAAA,CACC,KAAK,KACL,KAAM,GAAGvE,EAAO,GAAG,SACnB,KAAMA,EAAO,QAAQ,UACrB,IAAK,aAAcoE,EAAUA,EAAQ,SAAW,OAChD,IAAK,aAAcA,EAAUA,EAAQ,SAAW,OAChD,UAAW,cAAeA,EAAUA,EAAQ,UAAY,OACxD,UAAW,cAAeA,EAAUA,EAAQ,UAAY,MAAA,CAC1D,CAEJ,CAAA,CAAA,CAEJ,CC1CO,SAASI,GAAiB,CAAC,SAAA5V,EAAU,GAAG3B,GAA+B,CACtE,KAAA,CACJ,MAAO,CAAC,SAAA+F,EAAU,OAAA4J,EAAQ,MAAA/P,EAAQ,CAAA,EAAI,IAAAK,CAAG,EACzC,WAAY,CAAC,QAAA+H,EAAS,MAAA4H,CAAK,GACzBC,GAAc,CAChB,KAAM7P,EAAM,IAAA,CACb,EAEK8P,EAAwC,CAC5C,SAAA/J,EACA,OAAA4J,EACA,MAAA/P,EACA,QAAAoI,EACA,aAAc4H,GAAA,YAAAA,EAAO,OAAA,EAIrB,OAAApO,EAAA,IAACyI,IAAU,IAAAhK,EAAW,GAAGsJ,GAAWuG,EAAW9P,CAAK,EACjD,SAAA2B,CACH,CAAA,CAEJ,CCvBO,SAAS6V,GAAqB,CACnC,OAAAzE,CACF,EAA6C,CACrC,KAAA,CAAC,MAAAO,GAASC,IAEd,OAAA/R,EAAA,IAAC+V,GAAA,CACC,KAAK,KACL,KAAM,GAAGxE,EAAO,GAAG,SACnB,SAAS,KACT,iBAAkB,GAClB,kBAAiB,GACjB,YACEA,EAAO,QAAQ,YACXO,EAAMP,EAAO,QAAQ,WAAW,EAChC,OAEN,YAAqB5Q,GAAA,CACb,MAAAuP,EAAIqB,EAAO,QAAQ,QAAQ,KAAKrB,GAAKA,EAAE,MAAQvP,EAAK,EAAE,EAC5D,GAAKuP,EACL,OAAO,OAAOA,EAAE,OAAU,SAAWA,EAAE,MAAQA,EAAE,MAAM,OACzD,EACA,YAAaqB,EAAO,QAAQ,QAAQ,IAAUrB,IAAA,CAC5C,GAAIA,EAAE,IACN,KAAM,OAAOA,EAAE,OAAU,SAAWA,EAAE,MAAQA,EAAE,MAAM,OAAA,EACtD,EAED,SACCvP,GAAAX,EAAA,IAACiS,GAAmB,CAAA,MAAOtR,EAAK,GAC7B,SAACX,EAAAA,IAAA2R,EAAA,CAAM,QAAShR,EAAK,IAAM,CAAA,CAAA,EADnBA,EAAK,EAEhB,CAAA,CAAA,CAIR,CCCO,SAASsV,GAAkBzX,EAAyC,CACjE,OAAAA,EAAM,OAAO,QAAQ,KAAM,CACjC,KAAKuO,EAAkB,gBACd,OAAA/M,EAAA,IAACkW,GAAmB,CAAA,GAAG1X,CAAO,CAAA,EACvC,KAAKuO,EAAkB,cACd,OAAA/M,EAAA,IAACmW,GAAsB,CAAA,GAAG3X,CAAO,CAAA,EAC1C,KAAKuO,EAAkB,OACd,OAAA/M,EAAA,IAACoW,GAAe,CAAA,GAAG5X,CAAO,CAAA,EACnC,KAAKuO,EAAkB,UACd,OAAA/M,EAAA,IAACqW,GAAkB,CAAA,GAAG7X,CAAO,CAAA,EACtC,KAAKuO,EAAkB,MACd,OAAA/M,EAAA,IAACsW,GAAc,CAAA,GAAG9X,CAAO,CAAA,EAClC,KAAKuO,EAAkB,YACd,OAAA/M,EAAA,IAACuW,GAAoB,CAAA,GAAG/X,CAAO,CAAA,EACxC,KAAKuO,EAAkB,OACf,MAAAyJ,EAAWhY,EAAM,OAAO,QAAgC,SACvD,OAAAwB,EAAA,IAACwW,EAAS,CAAA,GAAGhY,CAAO,CAAA,EAC7B,QACS,OAAA,IACX,CACF,CAEA,SAAS0X,GACP1X,EAIA,CACM,KAAA,CAAC,MAAAJ,EAAO,OAAAmT,CAAU,EAAA/S,EAEpB,IAAAiY,EACA,OAAArY,EAAM,SAAW,OACnBqY,QAAc9E,EAAO,CAAA,GAAG3C,GAAiB5Q,EAAM,MAAM,EAAE,KAAO,CAAA,EAG5DqY,EAAAzW,EAAA,IAAC0W,GAAA,CACC,MAAO,IAAI,KAAKtY,EAAM,KAAK,EAC3B,IAAK,IAAI,KAAKA,EAAM,GAAG,EACvB,QAAS,CAAC,UAAW,QAAQ,CAAA,CAAA,EAMjC4B,EAAA,IAACkS,GAAA,CACE,GAAG1T,EACJ,MAAOiY,EACP,MAAQzW,EAAA,IAAAwV,GAAA,CAAqB,OAAAjE,CAAgB,CAAA,CAAA,CAAA,CAGnD,CAEA,SAAS4E,GAAqB,CAC5B,OAAA5E,EACA,WAAAD,EACA,cAAAa,CACF,EAGG,CAGC,OAAAnS,EAAA,IAACqR,GAAA,CACC,QAAS,IAAM,CACbc,EAAc,CAAC,MAAOZ,EAAO,QAAQ,YAAa,CAAA,CACpD,EACA,OAAAA,EACA,WAAAD,CAAA,CAAA,CAGN,CAEA,SAAS8E,GACP5X,EACA,CACM,KAAA,CAAC,OAAA+S,EAAQ,MAAAnT,CAAS,EAAAI,EAClB8I,EAASiK,EAAO,QAAQ,QAAQ,KAAUrB,GAAAA,EAAE,MAAQ9R,CAAK,EAE7D,OAAA4B,EAAA,IAACkS,GAAA,CACE,GAAG1T,EACJ,MACE8I,EACE,OAAOA,EAAO,OAAU,SACtBA,EAAO,MAENtH,EAAA,IAAA2R,EAAA,CAAO,GAAGrK,EAAO,MAAO,EAEzB,KAEN,MAAQtH,EAAA,IAAA6R,GAAA,CAAkB,OAAAN,CAAgB,CAAA,CAAA,CAAA,CAGhD,CAEA,SAAS8E,GACP7X,EACA,CAEE,OAAAwB,EAAA,IAACkS,GAAA,CACE,GAAG1T,EACJ,MAAOwB,EAAAA,IAAC2W,GAAgB,CAAA,GAAGnY,CAAO,CAAA,EAClC,MAAOwB,EAAA,IAACgW,GAAqB,CAAA,OAAQxX,EAAM,OAAQ,CAAA,CAAA,CAGzD,CAEA,SAASmY,GACPnY,EACA,CACM,KAAA,CAAC,MAAAsT,GAASC,IACV,CAAC,OAAAR,EAAQ,MAAAnT,CAAS,EAAAI,EAElBV,EAAUM,EAAM,IAAI0E,GAAKyO,EAAO,QAAQ,QAAQ,KAAUrB,GAAAA,EAAE,MAAQpN,CAAC,CAAC,EACtE8T,EAAgB,EAChBC,EAAgBzY,EAAM,OAASwY,EAG/BE,EACJ9W,EAAAA,IAAC6N,EAAAA,SACE,CAAA,SAAA/P,EACE,OAAO,OAAO,EACd,MAAM,EAAG8Y,CAAa,EACtB,IAAI,CAAC1G,EAAGlK,IAAM,CACb,IAAIsD,EAAO,GACX,OAAItD,IAAM,IACAsD,GAAA,MAEFA,GAAA,OAAO4G,EAAG,OAAU,SAAWA,EAAG,MAAQ4B,EAAM5B,EAAG,KAAK,EACzD5G,CACR,CAAA,CACL,CAAA,EAIF,OAAOuN,EAAgB,EACrB7W,EAAA,IAAC2R,EAAA,CACC,QAAQ,uBACR,OAAQ,CAAC,MAAAmF,EAAc,MAAOD,CAAa,CAAA,CAG7C,EAAAC,CAEJ,CAEA,SAASR,GACP9X,EAIA,CACA,KAAM,CAAC,OAAA+S,EAAQ,MAAAnT,EAAO,SAAAkU,CAAA,EAAY9T,EAE5BuY,EAAgBzE,EACnBtS,EAAAA,IAAA2R,EAAA,CAAO,GAAG8D,GAAoBnD,CAAQ,EAAG,EACxC,KAEE0E,EACJzF,EAAO,QAAQ,YAAc,SAC1BvR,EAAA,IAAAiX,GAAA,CAAgB,MAAA7Y,CAAqB,CAAA,EAEtCA,EAIF,OAAA4B,EAAA,IAACkS,GAAA,CACE,GAAG1T,EACJ,aACGqP,WACE,CAAA,SAAA,CAAAkJ,EAAc,IAAEC,CAAA,EACnB,EAEF,MAAQhX,EAAA,IAAA0V,GAAA,CAAiB,OAAAnE,CAAgB,CAAA,CAAA,CAAA,CAG/C,CAEA,SAASgF,GACP/X,EACA,CACM,KAAA,CAAC,MAAAJ,EAAO,OAAAmT,CAAU,EAAA/S,EAClB,CAAC,UAAAyE,EAAW,KAAA6R,CAAA,EAAQlB,GACxBrC,EAAO,QAAQ,SACX,GAAGA,EAAO,QAAQ,QAAQ,IAAInT,CAAK,GACnC,qBAAqBmT,EAAO,QAAQ,KAAK,IAAInT,CAAK,GACtD,OACA,CAAC,QAAS,CAAC,CAACA,CAAK,CAAA,EAGb8Y,SACHrJ,EACC,SAAA,CAAA,SAAA,CAAA7N,EAAA,IAACmV,GAAS,CAAA,QAAQ,SAAS,KAAK,iBAAiB,EAChDnV,EAAA,IAAAmV,GAAA,CAAS,QAAQ,OAAO,KAAK,OAAO,CACvC,CAAA,CAAA,EAEIgC,SACHtJ,EACC,SAAA,CAAA,SAAA,CAAA7N,EAAA,IAAC0B,GAAA,CACC,KAAK,KACL,IAAKoT,GAAA,YAAAA,EAAM,MAAM,MACjB,MAAOA,GAAA,YAAAA,EAAM,MAAM,KACnB,UAAU,MAAA,CACZ,EACCA,GAAA,YAAAA,EAAM,MAAM,IACf,CAAA,CAAA,EAGI5T,EAAQ+B,GAAa,CAAC6R,EAAOoC,EAAWC,EAG5C,OAAAnX,EAAA,IAACkS,GAAA,CACE,GAAG1T,EACJ,MAAA0C,EACA,MAAQlB,EAAA,IAAAuV,GAAA,CAA2B,OAAAhE,CAAgB,CAAA,CAAA,CAAA,CAGzD,CClPO,SAAS6F,GAAW,CACzB,QAAAvH,EACA,cAAAO,EACA,UAAAlQ,CACF,EAAoB,CAClB,KAAM,CAAC,eAAAuQ,EAAgB,OAAAW,EAAQ,WAAAF,CAAc,EAAAf,GAC3CN,EACAO,CAAA,EAGF,OAAKK,EAAe,OAGlBzQ,EAAA,IAAC,MAAI,CAAA,UAAWS,EAAK,0CAA2CP,CAAS,EACtE,SAAeuQ,EAAA,IAAI,CAAC4G,EAAOpG,IAAU,CACpC,MAAMM,EAAS1B,EAAQ,QAAUI,EAAE,MAAQoH,EAAM,GAAG,EAEpD,GAAI,CAAC9F,EAAe,OAAA,KAEd,MAAA+F,EAAqBC,GAAiC,CACpD,MAAAvG,EAAa,CAAC,GAAGP,CAAc,EAC1BO,EAAA,OAAOC,EAAO,EAAG,CAC1B,IAAKM,EAAO,IACZ,MAAOgG,EAAQ,MACf,WAAY,GACZ,SAAUA,EAAQ,UAAYhG,EAAO,eAAA,CACtC,EACDL,EAAWF,CAAU,CAAA,EAGvB,cACG,MACE,CAAA,SAAA,CAAA,CAACqG,EAAM,YACNrX,EAAA,IAACiV,EAAA,CACC,QAAQ,UACR,MAAM,UACN,KAAK,KACL,OAAO,eACP,QAAS,IAAM,CACb7D,EAAOiG,EAAM,GAAG,CAClB,EAEA,eAACG,GAAU,EAAA,CAAA,CACb,EAEFxX,EAAA,IAACiW,GAAA,CACC,OAAA1E,EACA,WAAY8F,EAAM,WAClB,MAAOA,EAAM,UAAY,KAAOA,EAAM,SAAWA,EAAM,MACvD,SAAUA,EAAM,SAChB,cAAeC,CAAA,CACjB,CAAA,GApBQD,EAAM,GAqBhB,CAEH,CAAA,CACH,CAAA,EA7CiC,IA+CrC,CCzDO,MAAMI,GAAyBC,EAAA,cACpC,IACF,ECeO,SAASC,GAAiB,CAC/B,YAAAC,EACA,OAAAC,EACA,UAAAC,EACA,gBAAAC,EAAkB,EAClB,eAAAC,EACA,gBAAAC,EAAkB,GAClB,QAAAC,EACA,YAAAC,EACA,GAAG3Z,CACL,EAAkD,CAMhD,MAAMa,EALWqD,EAAAA,OAAqB,CACpC,aAAc,CAAC,EAAG,EAAG,EAAG,CAAC,EACzB,QAAS,GACT,mBAAoB,EAAA,CACrB,EACsB,QAEjB,CAAC,kBAAAjF,EAAmB,qBAAAQ,CAAoB,EAAIuM,GAAmB,EAE/DiE,EAASxP,GAAoB,CAC7B,CAACI,EAAM,KACIuY,GAAA,YAAAA,EAAc3Y,EAAGI,EAAM,OAGvB,KAETA,EAAA,oBAAsBA,EAAM,GAAG,MAAM,YACrCA,EAAA,GAAG,MAAM,YAAc,OACvBA,EAAA,mBAAqB,SAAS,gBAAgB,MAAM,WACjD,SAAA,gBAAgB,MAAM,WAAa,OAC5CA,EAAM,QAAU,GAAA,EAGZN,EAAiBE,GAA0B,OAC/C,GAAIA,EAAE,SAAW,GAAKI,EAAM,IAAM,KAAM,CAItC,GAHAA,EAAM,QAAU,KAEDiG,EAAA9G,EAAM,gBAAN,YAAA8G,EAAA,KAAA9G,EAAsBS,MACtB,GAAO,OAElBgZ,GACFhZ,EAAE,gBAAgB,EAEhB+Y,GACF/Y,EAAE,eAAe,EAEnBI,EAAM,GAAKJ,EAAE,UACbI,EAAM,GAAKJ,EAAE,cACbI,EAAM,aAAe,CAAC,EAAGJ,EAAE,QAAS,EAAGA,EAAE,SAKrCkZ,IACI9Y,EAAA,eAAiB,WAAW,IAAM,CAC1B8Y,EAAAlZ,EAAGI,EAAM,EAAG,EACxBA,EAAM,mBAAqB,IAC1B,GAAG,IAGJuY,GAAeC,IACCpa,EAAA,OAAQ,cAAe2a,EAAe,EAAK,EAE7C3a,EAAA,OAAQ,YAAagC,EAAa,EAAK,EACvChC,EAAA,OAAQ,gBAAiBgC,EAAa,EAAK,CAC/D,CAAA,EAGI2Y,EAAiBnZ,GAAoB,CACrC,GAAAA,EAAE,YAAcI,EAAM,GAAI,CAC5B,MAAM6J,EAASjK,EAAE,QAAUI,EAAM,aAAa,EACxC8J,EAASlK,EAAE,QAAUI,EAAM,aAAa,GAG3C,KAAK,IAAI6J,CAAM,GAAK6O,GACnB,KAAK,IAAI5O,CAAM,GAAK4O,IACtB,CAAC1Y,EAAM,SAEPoP,EAAMxP,CAAC,EAGLI,EAAM,UACCwY,GAAA,MAAAA,EAAA5Y,EAAGiK,EAAQC,GACpB9J,EAAM,aAAe,CAAC,EAAGJ,EAAE,QAAS,EAAGA,EAAE,SAE7C,CAAA,EAGIQ,EAAeR,GAAoB,OACnC,GAAAA,EAAE,YAAcI,EAAM,GAAI,CAExBA,EAAM,gBACR,aAAaA,EAAM,cAAc,EAGnC,MAAMgZ,EAAqBhZ,EAAM,mBACjCA,EAAM,mBAAqB,GAGvBA,EAAM,UACRyY,GAAA,MAAAA,EAAY7Y,IAGVI,EAAM,KAEJJ,EAAE,OAAS,mBACPqG,EAAA9G,EAAA,cAAA,MAAA8G,EAAA,KAAA9G,EAAcS,EAAGI,EAAM,IAGzBJ,EAAE,QAAUI,EAAM,GAAG,SAASJ,EAAE,MAAqB,IAEnDoZ,EACYF,GAAA,MAAAA,EAAAlZ,EAAGI,EAAM,IAEb6Y,GAAA,MAAAA,EAAAjZ,EAAGI,EAAM,MAKzB,SAAS,gBAAgB,MAAM,WAC7BA,EAAM,oBAAsB,GAC9BA,EAAM,GAAG,MAAM,YAAcA,EAAM,qBAAuB,IAE5DA,EAAM,GAAK,OACXA,EAAM,QAAU,GACKpB,EAAA,OAAQ,cAAema,EAAe,EAAK,EAC3Cna,EAAA,OAAQ,YAAawB,EAAa,EAAK,EACvCxB,EAAA,OAAQ,gBAAiBwB,EAAa,EAAK,CAClE,CAAA,EAGK,MAAA,CACL,SAAU,CACR,cAAemI,EAAmB7I,CAAa,CACjD,CAAA,CAEJ,CCtKO,MAAMuZ,GAAWvY,EACtBC,EAAAA,IAAC,OAAK,CAAA,EAAE,6KAA8K,CAAA,EACtL,cAAc,ECFHuY,GAAmBxY,EAC9BC,EAAAA,IAAC,OAAK,CAAA,EAAE,oHAAqH,CAAA,EAC7H,sBAAsB,ECCXwY,GAAuB9P,GAAM,cAExC,IAAK,EASS,SAAA+P,EACd7O,EACA9L,EAC6C,CACvC,KAAA,CAAC,SAAA4a,GAAYC,KACbC,EAAkBC,aAAWL,EAAoB,EAEvD,OAAOnX,UAAQ,IAAM,CACnB,GAAI,CAACuI,EACH,MAAO,GAKT,MAAMkP,EAAO,CACX,WAHiBC,GAAgBnP,GAAO9L,GAAA,YAAAA,EAAS,YAAa,EAAK,EAInE,YAAa,GAAG4a,CAAQ,kCACtB5a,GAAA,YAAAA,EAAS,iBAAkB8L,EAAM,IACnC,EAAA,EAGF,OAAIgP,IAEEE,EAAK,aACPA,EAAK,WAAaE,GAChBF,EAAK,WACL,CAAC,GAAGF,EAAiB,UAAW9a,GAAA,MAAAA,EAAS,UAAY,OAAS,EAAE,EAChE4a,CAAA,GAKJI,EAAK,YAAcE,GAAUF,EAAK,YAAaF,EAAiBF,CAAQ,GAGnEI,CAAA,EACN,CACDJ,EACA9O,EACA9L,GAAA,YAAAA,EAAS,eACTA,GAAA,YAAAA,EAAS,UACT8a,CAAA,CACD,CACH,CAEA,SAASG,GACPnP,EACAqP,EACoB,CACpB,GAAKrP,EAAM,IAEP,IAAAsP,GAActP,EAAM,GAAG,EACzB,GAAIqP,EAAW,CAEP,MAAAE,EAAYvP,EAAM,WAAa,MACrC,OAAOA,EAAM,IAAI,QACf,IAAI,OAAOA,EAAM,UAAY,GAAG,EAChC,aAAauP,CAAS,EAAA,CACxB,KAEA,QAAOvP,EAAM,IAIjB,MAAO,GAAGwP,GAAiB,EAAE,SAAS,QAAQ,IAAIxP,EAAM,GAAG,GAC7D,CAEA,SAASoP,GAAUK,EAAmB5F,EAAgB6F,EAAyB,CAC7E,MAAMC,EAAM,IAAI,IAAIF,EAAWC,CAAO,EAC/B,cAAA,QAAQ7F,CAAM,EAAE,QAAQ,CAAC,CAACpV,EAAKD,CAAK,IAAM,CAC3Cmb,EAAA,aAAa,OAAOlb,EAAKD,CAAe,CAAA,CAC7C,EACMmb,EAAI,UACb,CCzFgB,SAAAC,GAAoBD,EAAajQ,EAAe,CACxD,MAAAzH,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAO0X,EACRjQ,IAAMzH,EAAK,SAAWyH,GACjB,SAAA,KAAK,YAAYzH,CAAI,EAC9BA,EAAK,MAAM,EACF,SAAA,KAAK,YAAYA,CAAI,CAChC,CCLO,MAAM4X,GAAe1Z,EAC1BC,EAAAA,IAAC,OAAK,CAAA,EAAE,mJAAoJ,CAAA,EAC5J,kBAAkB,ECIb,SAAS0Z,GAAiBza,EAAU,CACzC,OAAI0a,KACK1a,EAAE,QAGJA,EAAE,OACX,CCLO,SAAS2a,GAAkBpb,EAAc,CACxC,KAAA,CAAC,UAAAqb,EAAW,SAAAC,CAAY,EAAAtb,EAmE9B,MAAO,CAAC,UAlEkDS,GAAA,CACxD,OAAQA,EAAE,IAAK,CACb,IAAK,YACc8a,EAAA9a,EAAG,CAAC,KAAM,CAAC,GAAI,WAAW,CAAA,EAAIT,CAAK,EACpD,MACF,IAAK,aACcub,EAAA9a,EAAG,CAAC,KAAM,CAAC,GAAI,WAAW,CAAA,EAAIT,CAAK,EACpD,MACF,IAAK,UACcub,EAAA9a,EAAG,CAAC,IAAK,CAAC,GAAI,WAAW,CAAA,EAAIT,CAAK,EACnD,MACF,IAAK,YACcub,EAAA9a,EAAG,CAAC,IAAK,CAAC,GAAI,WAAW,CAAA,EAAIT,CAAK,EACnD,MACF,IAAK,SACcub,EAAA9a,EAAG,CAAC,IAAK,CAAC,GAAI,YAAa,MAAO,CAAA,GAAKT,CAAK,EAC7D,MACF,IAAK,WACcub,EAAA9a,EAAG,CAAC,IAAK,CAAC,GAAI,YAAa,MAAO,CAAA,GAAKT,CAAK,EAC7D,MACF,IAAK,MACHwb,GAA2B/a,CAAC,EAC5B,MACF,IAAK,OACCya,GAAiBza,CAAC,EAEpB8a,EACE9a,EACA,CACE,IAAK,CAAC,GAAI,YAAa,MAAO6a,CAAQ,EACtC,KAAM,CAAC,GAAI,YAAa,MAAOD,CAAS,CAC1C,EACArb,CAAA,EAIFub,EACE9a,EACA,CAAC,KAAM,CAAC,GAAI,YAAa,MAAO4a,EAAU,EAC1Crb,CAAA,EAGJ,MACF,IAAK,MACCkb,GAAiBza,CAAC,EAEpB8a,EACE9a,EACA,CACE,IAAK,CAAC,GAAI,YAAa,MAAO6a,CAAQ,EACtC,KAAM,CAAC,GAAI,YAAa,MAAOD,CAAS,CAC1C,EACArb,CAAA,EAIFub,EACE9a,EACA,CAAC,KAAM,CAAC,GAAI,YAAa,MAAO4a,EAAU,EAC1Crb,CAAA,EAGJ,KACJ,CAAA,CAGe,CACnB,CAYA,SAASub,EACP9a,EACAgb,EACA,CAAC,UAAAJ,EAAW,SAAAC,GACZ,mBACI,KAAAxU,EAAA,SAAS,gBAAT,YAAAA,EAAwB,WAAY,QAAS,OACjDrG,EAAE,eAAe,EACjB,MAAMib,EAAOjb,EAAE,cAGTkb,EAAelb,EAAE,OAAuB,QAAQ,iBAAiB,EACnE,GAAA,CAACkb,GAAe,CAACD,EAAM,OAErB,MAAAE,EAAMD,EAAY,QAAQ,iBAAiB,EACjD,GAAI,CAACC,EAAK,OAGV,IAAIC,EAAW,SAASD,EAAI,aAAa,eAAe,CAAW,EAC/DE,EAAY,SAASH,EAAY,aAAa,eAAe,CAAW,EAC5E,GAAI,OAAO,MAAME,CAAQ,GAAK,OAAO,MAAMC,CAAS,EAAG,OAGjD,MAAAC,IAAanP,EAAA6O,EAAW,MAAX,YAAA7O,EAAgB,QAAS,IACxCwB,EAAAqN,EAAW,MAAX,YAAArN,EAAgB,MAAO,YACzByN,EAAW,KAAK,IAAIP,EAAUO,EAAWE,CAAU,IAC1C5N,EAAAsN,EAAW,MAAX,YAAAtN,EAAgB,MAAO,cAChC0N,EAAW,KAAK,IAAI,EAAGA,EAAWE,CAAU,GAIxC,MAAAC,IAAcC,EAAAR,EAAW,OAAX,YAAAQ,EAAiB,QAAS,IAC1CC,EAAAT,EAAW,OAAX,YAAAS,EAAiB,MAAO,YAC1BJ,EAAY,KAAK,IAAIT,EAAWS,EAAYE,CAAW,IAC9CG,EAAAV,EAAW,OAAX,YAAAU,EAAiB,MAAO,cACjCL,EAAY,KAAK,IAAI,EAAGA,EAAYE,CAAW,GAIjD,MAAMI,EAAWV,EAAK,cACpB,mBAAmBG,CAAQ,sBAAsBC,CAAS,IAAA,EAE5D,GAAI,CAACM,EAAU,OAIT,MAAAC,EADSC,GAAuBF,CAAQ,EACT,SAAA,GAAcA,EAGvCT,EAAA,aAAa,WAAY,IAAI,EACpBU,EAAA,aAAa,WAAY,GAAG,EACjDA,EAAqB,MAAM,CAC7B,CAGA,SAASb,GAA2B/a,EAAwB,CAC1D,MAAMib,EAAOjb,EAAE,cACf,GAAIA,EAAE,SACJib,EAAK,MAAM,MACN,CACL,MAAMa,EAASD,GAAuBZ,EAAM,CAAC,SAAU,GAAK,EACxD,IAAAc,EACAC,EACD,GACDA,EAAOF,EAAO,YACVE,IACKD,EAAAC,SAEFA,GAGLD,GAAQ,CAACA,EAAK,SAAS,SAAS,aAAa,GAC/CE,GAAsBF,CAAI,CAE9B,CACF,CCtIa,MAAAG,EAAezD,gBAAiC,IAAK,ECtB3D,SAAS0D,GAAkB,CAAC,MAAAnK,EAAO,SAAAoK,GAAkB,CACpD,KAAA,CACJ,QAAAC,EACA,WAAAC,EAAa,OACb,iBAAAC,EAAmB,MAAA,EACjB3C,EAAAA,WAAWsC,CAAY,EACrBM,EAASH,EAAQrK,CAAK,EAEtByK,EAAcD,GAAA,YAAAA,EAAQ,QAE5B,IAAIE,EAAU,gBACV,OAAAF,GAAA,YAAAA,EAAQ,SAAU,SACVE,EAAA,kBACDF,GAAA,YAAAA,EAAQ,SAAU,QACjBE,EAAA,eAGLlb,EACL,0IACA4a,EAAWG,EAAmBD,GAC9BE,GAAA,YAAAA,EAAQ,QAAS,SACjBA,GAAA,YAAAA,EAAQ,SACRA,GAAA,YAAAA,EAAQ,SACRE,EACAD,EACAD,GAAA,YAAAA,EAAQ,SAAA,CAEZ,CCtBO,SAASG,GAAU,CACxB,SAAAvB,EACA,aAAAwB,EACA,MAAA5K,EACA,KAAA9K,EACA,GAAA8D,CACF,EAAmB,CACjB,KAAM,CAAC,QAAAqR,CAAA,EAAWzC,EAAA,WAAWsC,CAAY,EACnCM,EAASH,EAAQrK,CAAK,EAEtB6K,EAAyBza,EAAAA,QAAQ,KAC9B,CACL,MAAOgZ,EACP,UAAWwB,EACX,cAAe1V,EAAK,aAAA,GAErB,CAACkU,EAAUwB,EAAc1V,EAAK,aAAa,CAAC,EAEzC4V,EAAQX,GAAkB,CAC9B,MAAAnK,EACA,SAAU,EAAA,CACX,EAGC,OAAAjR,EAAA,IAAC,MAAA,CACC,SAAU,GACV,KAAK,WACL,gBAAeiR,EAAQ,EACvB,GAAAhH,EACA,UAAW8R,EAEX,SAAA/b,EAAA,IAAC,OAAI,UAAU,mDACZ,WAAO,KAAKmG,EAAM2V,CAAU,CAC/B,CAAA,CAAA,CAAA,CAGN,CCxCO,SAASE,GAAqB/c,EAAU,CACtC,OAAAA,EAAE,UAAYya,GAAiBza,CAAC,CACzC,CCAO,SAASgd,GAAiB,CAAC,MAAAhL,EAAO,WAAAiL,EAAY,SAAAb,GAAkB,CACrE,MAAMc,EAAaC,KACbC,EAAW9O,KACX,CAAC,WAAA+O,EAAY,gBAAAC,EAAiB,iBAAAC,EAAkB,SAAAC,GACpD5D,EAAAA,WAAWsC,CAAY,EAElB,OAAA1a,EACL,0EACAgc,GAAY,iBACZJ,GAAYG,GAAoBF,EAC5B,yBACA,QACJ,CAACA,GAAc,mBACf,CAACA,GARarL,IAAU,GAQE,mBAC1BiL,GACE,CAACC,GACD,4EACFD,GACEC,GACA,oDACF,CAACD,GACC,CAACb,IACAkB,GAAmBE,IACpB,uCAAA,CAEN,CClBA,MAAMC,GAAuB,CAAC,SAAU,IAAK,QAAS,SAAU,UAAU,EAcnE,SAASC,GAAS,CACvB,KAAAxW,EACA,MAAA8K,EACA,SAAA2L,EACA,UAAA1c,EACA,MAAA6b,CACF,EAAkB,CACV,KAAA,CACJ,aAAAc,EACA,QAAAvB,EACA,UAAAwB,EACA,UAAAC,EACA,SAAAN,EACA,uBAAAO,EACA,gBAAAT,EACA,eAAAU,EACA,cAAAC,CAAA,EACErE,EAAAA,WAAWsC,CAAY,EAErBgC,EAAgBza,SAAO,EAAK,EAC5BwZ,EAAaW,EAAa,SAAS1W,EAAK,EAAE,EAC1C,CAACiX,EAAWC,CAAY,EAAI1Y,WAAS,EAAK,EAE1C2Y,EAAyBre,GACrBA,EAAE,OAAuB,QAAQyd,GAAqB,KAAK,GAAG,CAAC,EAGnEa,EAA6Dte,GAAA,CAE/Dge,IAAmB,aACnBR,GACA,CAACU,EAAc,SACf,CAACG,EAAsBre,CAAC,IAExBA,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EAClBwd,EAAStW,EAAM8K,CAAK,EACtB,EAGIuM,EAAkB,CAAC,CAACX,EAAa,OAEjCY,EAAgBxe,GAAoB,CACpCqe,EAAsBre,CAAC,IACvBge,IAAmB,WACjBV,IAAoBiB,GAAmB,CAACf,GAC1CK,EAAU3W,CAAI,EACLsW,GACTA,EAAStW,EAAM8K,CAAK,EAEbgM,IAAmB,cACxBE,EAAc,QACZZ,GAAmBiB,EACrBV,EAAU3W,CAAI,EAEdsW,GAAA,MAAAA,EAAWtW,EAAM8K,GAEVsL,GACCQ,EAAA5W,EAAM6V,GAAqB/c,CAAC,CAAC,GAE3C,EAGI,CAAC,SAAAgD,CAAQ,EAAI0V,GAAiB,CAClC,cAAoB1Y,GAAA,CACJke,EAAA,QAAUle,EAAE,cAAgB,OAC5C,EACA,QAASwe,EACT,YAAalB,EACT,IAAM,CACAY,EAAc,SAChBL,EAAU3W,CAAI,CAGlB,EAAA,MAAA,CACL,EAEKuX,EAA6Cze,GAAA,CAC7Csd,GAAmBtd,EAAE,MAAQ,KAC/BA,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EACdge,IAAmB,WACrBH,EAAU3W,CAAI,EAEd4W,EAAU5W,CAAI,GAEPlH,EAAE,MAAQ,SAAW,CAAC4d,EAAa,QAAUJ,IACtDxd,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EAClBwd,EAAStW,EAAM8K,CAAK,EACtB,EAGI0M,EAA6C1e,GAAA,CAC7C+d,GAA0BT,IACvBM,EAAa,SAAS1W,EAAK,EAAE,GAChC4W,EAAU5W,CAAI,GAIdgX,EAAc,UAChBle,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EACpB,EAGI2e,EAAiB3B,GAAiB,CAAC,MAAAhL,EAAO,WAAAiL,CAAW,CAAA,EAErD2B,EAAajB,GAAY,MAE7B,OAAA5c,EAAA,IAAC6d,EAAA,CACC,KAAK,MACL,gBAAe5M,EAAQ,GAAKiM,EAAgB,EAAI,GAChD,gBAAehB,EACf,SAAU,GACV,UAAWzb,EAAKP,EAAW0d,CAAc,EACzC,KAAMC,IAAe,MAAS,OAAoB1X,EAClD,cAAeyB,EAAmB2V,CAAkB,EACpD,UAAW3V,EAAmB8V,CAAe,EAC7C,cAAe9V,EAAmB+V,CAAkB,EACpD,eAAgB/V,EAAmB,IAAMyV,EAAa,EAAI,CAAC,EAC3D,eAAgBzV,EAAmB,IAAMyV,EAAa,EAAK,CAAC,EAC5D,MAAAtB,EACC,GAAG9Z,EAEH,SAAQqZ,EAAA,IAAI,CAACG,EAAQnB,IACpBta,EAAA,IAAC4b,GAAA,CACC,SAAU3K,EACV,aAAcmM,EACd,MAAO9C,EACP,KAAAnU,CAAA,EACK,GAAGA,EAAK,EAAE,IAAIsV,EAAO,GAAG,EAAA,CAEhC,CAAA,CAAA,CAGP,CChKO,MAAMqC,GAAoD,CAC/D,IAAK,WACL,OAAQ,IAAM9d,EAAAA,IAAC+d,GAAkB,EAAA,EACjC,MAAO,SACP,MAAO,qBACP,KAAM,CAAC5X,EAAMiU,IACPA,EAAI,cACEpa,EAAAA,IAAAmV,GAAA,CAAS,KAAK,YAAY,QAAQ,MAAO,CAAA,EAE5CnV,MAACge,IAAkB,KAAA7X,CAAY,CAAA,CAE1C,EAKA,SAAS6X,GAAkB,CAAC,KAAA7X,GAA+B,CACzD,KAAM,CAAC,aAAA0W,EAAc,UAAAC,CAAS,EAAIjE,aAAWsC,CAAY,EAEvD,OAAAnb,EAAA,IAACie,GAAA,CACC,QAASpB,EAAa,SAAS1W,EAAK,EAAE,EACtC,SAAU,IAAM2W,EAAU3W,CAAI,CAAA,CAAA,CAGpC,CAEA,SAAS4X,IAAoB,CACrB,KAAA,CAAC,MAAAjM,GAASC,IAEV,CAAC,KAAA+C,EAAM,aAAA+H,EAAc,kBAAAqB,CAAiB,EAAIrF,EAAAA,WAAWsC,CAAY,EACjEgD,EAAkB,CAAC,CAACrJ,EAAK,QAAUA,EAAK,SAAW+H,EAAa,OAChEuB,EAAmB,CAACD,GAAmB,CAAC,CAACtB,EAAa,OAG1D,OAAA7c,EAAA,IAACie,GAAA,CACC,aAAYnM,EAAM,CAAC,QAAS,aAAa,EACzC,gBAAiBsM,EACjB,QAASD,EACT,SAAU,IAAM,CAEZD,EADEC,EACgB,CAAE,EAEFrJ,EAAK,IAASuJ,GAAAA,EAAE,EAAE,CAFhB,CAIxB,CAAA,CAAA,CAGN,CCrDO,MAAMC,GAAoBve,EAC/BC,EAAAA,IAAC,OAAK,CAAA,EAAE,+DAAgE,CAAA,EACxE,uBAAuB,ECOT,SAAAue,GAAW,CAAC,MAAAtN,GAAyB,CACnD,KAAM,CAAC,QAAAqK,EAAS,eAAAkD,EAAgB,aAAAC,EAAc,cAAAC,GAC5C7F,EAAAA,WAAWsC,CAAY,EACnBM,EAASH,EAAQrK,CAAK,EAEtB8K,EAAQX,GAAkB,CAC9B,MAAAnK,EACA,SAAU,EAAA,CACX,EAEK,CAACmM,EAAWC,CAAY,EAAI1Y,WAAS,EAAK,EAE1Cga,EAAalD,EAAO,YAAcA,EAAO,IACzCmD,EAAenD,EAAO,eAAiBiD,EACvC,CAAC,QAAAG,EAAS,SAAAC,GAAYN,GAAkB,CAAA,EAExCO,EAAaH,GAAgBC,IAAYF,EAE3C,IAAAK,EACAD,GAAcD,IAAa,MAClBE,EAAA,YACFD,GAAcD,IAAa,OACzBE,EAAA,aACFJ,IACEI,EAAA,QAGb,MAAMC,EAAgB,IAAM,CAC1B,GAAI,CAACL,EAAc,OAEf,IAAAM,EAGAH,GAAcD,IAAa,OAC7BI,EAAU,CAAC,SAAU,MAAO,QAASP,CAAU,EAGtCI,GAAcD,IAAa,MACpCI,EAAU,CAAC,QAAS,OAAW,SAAU,QAIzCA,EAAU,CAAC,SAAU,OAAQ,QAASP,CAAU,EAGlDF,GAAA,MAAAA,EAAeS,EAAO,EAGlBC,EAAcJ,GAAc3B,EAC5BgC,EAAe,CACnB,QAAS,CAAC,QAAS,EAAG,EAAG,CAAC,EAC1B,OAAQ,CAAC,QAAS,EAAG,EAAG,MAAM,CAAA,EAI9B,OAAAha,EAAA,KAAC,MAAA,CACC,KAAK,eACL,SAAU,GACV,gBAAe6L,EAAQ,EACvB,YAAW+N,EACX,UAAWve,EACTsb,EACA,iCACA6C,GAAgB,gBAClB,EACA,aAAc,IAAM,CAClBvB,EAAa,EAAI,CACnB,EACA,aAAc,IAAM,CAClBA,EAAa,EAAK,CACpB,EACA,UAAgBpe,GAAA,EACVA,EAAE,MAAQ,KAAOA,EAAE,MAAQ,WAC7BA,EAAE,eAAe,EACHggB,IAElB,EACA,QAASA,EAER,SAAA,CAAOxD,EAAA,WACLzb,EAAAA,IAAA,MAAA,CAAI,UAAU,YAAa,WAAO,OAAO,CAAE,CAAA,EAE5Cyb,EAAO,OAAO,EAEhBzb,EAAAA,IAACwU,IACE,SACCoK,GAAA5e,EAAA,IAACqL,GAAE,KAAF,CACC,SAAU+T,EACV,QAASD,EAAc,UAAY,SACnC,QAAS,GACT,WAAY,CAAC,KAAM,OAAO,EAE1B,UAAU,0BACV,cAAY,oBACZ,cAAa,CAACA,EAEd,SAAAnf,EAAA,IAACse,GAAA,CACC,KAAK,KACL,UAAW7d,EACT,aACAqe,IAAa,OACXD,IAAYF,GACZ,iCACJ,CAAA,CACF,CAAA,EAbI,WAAA,EAgBV,CAAA,CAAA,CAAA,CAGN,CCrHO,SAASU,IAAiB,CAC/B,KAAM,CAAC,QAAA/D,CAAA,EAAWzC,EAAA,WAAWsC,CAAY,EAEvC,OAAAnb,EAAA,IAAC,MAAA,CACC,KAAK,MACL,gBAAe,EACf,SAAU,GACV,UAAU,sBAET,SAAAsb,EAAQ,IAAI,CAACG,EAAQ6D,IACnBtf,EAAAA,IAAAue,GAAA,CAAW,MAAOe,CAAA,EAAkB7D,EAAO,GAAK,CAClD,CAAA,CAAA,CAGP,CCwCO,SAAS8D,GAA+B,CAC7C,UAAArf,EACA,QAASsf,EACT,iBAAAhD,EAAmB,GACnB,cAAAU,EAAgB,GAChB,WAAAZ,EAAa,GACb,KAAAxH,EACA,aAAc2K,EACd,oBAAqBC,EACrB,kBAAmBC,EACnB,eAAgBC,EAChB,aAAcC,EACd,cAAAnB,EAAgB,GAChB,SAAAoB,EACA,gBAAAvD,EAAkB,GAClB,eAAAU,EAAiB,WACjB,eAAA8C,EACA,uBAAA/C,EACA,SAAAP,EACA,YAAAuD,EACA,UAAAC,EACA,KAAAC,EACA,SAAUC,EACV,uBAAAC,EAAyB,GACzB,WAAA7E,EACA,iBAAAC,EACA,GAAGvZ,CACL,EAAkB,CAChB,MAAMoa,EAAW9O,KACX8S,EAAkB,CAAC,CAAChE,GAAYG,EAClC6D,IACcnD,EAAA,GACHZ,EAAA,IAGT,KAAA,CAACO,EAAcqB,CAAiB,EAAI1V,EACxCiX,EACAC,GAA4B,CAAC,EAC7BC,CAAA,EAGI,CAACnB,GAAgBC,EAAY,EAAIjW,EACrCoX,EACA,OACAC,CAAA,EAGI/C,GAAY/W,EAAA,YACfI,GAAwB,CACjB,MAAAma,EAAY,CAAC,GAAGzD,CAAY,EAClC,GAAI,CAACyD,EAAU,SAASna,EAAK,EAAE,EACnBma,EAAA,KAAKna,EAAK,EAAE,MACjB,CACL,MAAM8K,GAAQqP,EAAU,QAAQna,EAAK,EAAE,EAC7Bma,EAAA,OAAOrP,GAAO,CAAC,CAC3B,CACAiN,EAAkBoC,CAAS,CAC7B,EACA,CAACzD,EAAcqB,CAAiB,CAAA,EAG5BnB,EAAYhX,EAAA,YAEhB,CAACI,EAA4Boa,IAAoB,CAC/C,IAAID,GAAiC,CAAA,EACjCna,IACFma,GAAYC,EACR,CAAC,GAAG1D,GAAA,YAAAA,EAAc,OAAa5S,IAAAA,KAAO9D,EAAK,IAAKA,EAAK,EAAE,EACvD,CAACA,EAAK,EAAE,GAEd+X,EAAkBoC,EAAS,CAC7B,EACA,CAACzD,EAAcqB,CAAiB,CAAA,EAI5B5C,EAAUja,EAAAA,QAAQ,IAAM,CACtB,MAAAmf,EAAkBhB,EAAY,OAAYiB,IAAA,CACxC,MAAAC,GAAgBD,GAAE,eAAiB,UAOrC,GANAC,KAAkB,OAGlBA,KAAkB,WAAaL,GAG/BK,KAAkB,WAAa,CAACL,EAC3B,MAAA,EACT,CACD,EAGD,OADE9D,GAAmBU,IAAmB,aAAe,CAACZ,GAEtDmE,EAAgB,QAAQ1C,EAAoB,EAEvC0C,CAAA,EACN,CAACnE,EAAUmD,EAAajD,EAAiBU,EAAgBoD,CAAe,CAAC,EAEtEM,EAAqC,CACzC,gBAAAN,EACA,WAAA9E,EACA,iBAAAC,EACA,WAAAc,EACA,cAAAY,EACA,aAAAL,EACA,kBAAAqB,EACA,cAAAQ,EACA,gBAAAnC,EACA,eAAAU,EACA,KAAAnI,EACA,QAAAwG,EACA,eAAAkD,GACA,aAAAC,GACA,UAAA3B,GACA,UAAAC,EACA,SAAAN,EACA,uBAAAO,EACA,KAAAkD,EACA,iBAAA1D,CAAA,EAGIoE,EAAWhH,GAAkB,CACjC,UAAW2C,EAAkBjB,EAAQ,OAAS,EAAIA,EAAQ,OAC1D,SAAUxG,EAAK,OAAS,CAAA,CACzB,EAEK+L,EAAiC,CACrC,YAAAb,CAAA,EAGGC,EAGSA,EAAApf,EAAA,aAAaof,EAAWY,CAAc,EAFtCZ,EAAAjgB,EAAAA,IAAC8gB,GAAgB,CAAA,GAAGD,CAAgB,CAAA,EAM5C,MAAAE,GAAWne,GAAaud,CAAa,EACxBa,OAAAA,GAAA,CACjB,IAAKD,GACL,kBAAwB9hB,GAAA,CAEpBmhB,GACA7D,IACAM,GAAA,MAAAA,EAAc,SAEd,CAAE5d,EAAE,OAAuB,QAAQ,iBAAiB,GAEpDif,EAAkB,CAAE,CAAA,CAExB,CAAA,CACD,EAGEle,EAAAA,IAAAmb,EAAa,SAAb,CAAsB,MAAOwF,EAC5B,SAAAvb,EAAA,KAAC,MAAA,CACE,GAAG2C,GAAW9F,EAAU2e,EAAU,CACjC,UAAY3hB,GAAqB,CAC3BA,EAAE,MAAQ,UACZA,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EACd4d,GAAA,MAAAA,EAAc,QAChBqB,EAAkB,CAAE,CAAA,GAEbjf,EAAE,MAAQ,UACnBA,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EACd4d,GAAA,MAAAA,EAAc,SAChBiD,GAAA,MAAAA,EACEhL,EAAK,OAAO3O,GAAQ0W,GAAA,YAAAA,EAAc,SAAS1W,EAAK,GAAG,KAG9CuT,GAAiBza,CAAC,GAAKA,EAAE,MAAQ,MAC1CA,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EACdsd,GACF2B,EAAkBpJ,EAAK,IAAY3O,GAAAA,EAAK,EAAE,CAAC,EAGjD,CAAA,CACD,EACD,KAAK,OACL,SAAU,EACV,gBAAe2O,EAAK,OAAS,EAC7B,gBAAewG,EAAQ,OAAS,EAChC,IAAKyF,GACL,uBAAsBxE,EAAkB,GAAO,OAC/C,kBAAiBwD,EACjB,UAAWtf,EACTP,EACA,+DACF,EAEC,SAAA,CAAC,CAAAgd,SAAkBmC,GAAe,EAAA,EAClCY,CAAA,CAAA,CAEL,CAAA,CAAA,CAEJ,CAKA,SAASa,GAAe,CAAC,YAAAd,GAA8B,CACrD,KAAM,CAAC,KAAAlL,CAAA,EAAQ+D,EAAA,WAAWsC,CAAY,EACtC,aACGtN,EACE,SAAA,CAAA,SAAAiH,EAAK,IAAI,CAAC3O,EAAMkU,IACfra,EAAA,IAAC2c,GAAA,CACC,KAAAxW,EACA,MAAOkU,EAEP,SAAU2F,CAAA,EADL7Z,EAAK,EAGb,CAAA,CACH,CAAA,CAEJ,CC7QA,MAAM8a,GAAQ,EAAI,KAAO,KAgBlB,SAASC,GAAc,CAC5B,KAAAvV,EACA,UAAAzL,EACA,cAAAihB,EACA,UAAAC,EAAY,EACd,EAAU,CACF,KAAA,CAAC,MAAAtP,GAASC,IACV,CAAC,WAAAsP,GAAc5I,EAAiB9M,EAAM,CAAC,UAAW,GAAK,EAO7D,GAJIA,EAAK,WAAaA,EAAK,UAAYsV,IAAS,CAACtV,EAAK,YACxCyV,EAAA,IAGVA,GAAazV,EAAK,OAAS,SAAW0V,EAAY,CACpD,MAAMC,EAAMxP,EAAM,CAChB,QAAS,sBACT,OAAQ,CAAC,SAAUnG,EAAK,IAAI,CAAA,CAC7B,EAEC,OAAA3L,EAAA,IAAC,MAAA,CACC,UAAWS,EAAKP,EAAW,cAAc,EACzC,IAAKmhB,EACL,IAAAC,EACA,UAAW,EAAA,CAAA,CAGjB,CACA,aAAQC,GAAa,CAAA,UAAWJ,EAAe,KAAMxV,EAAK,IAAM,CAAA,CAClE,CClDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAUA,SAAS6V,IAAW,CAClBA,OAAAA,GAAW,OAAO,OAAS,OAAO,OAAO,KAAI,EAAK,SAAUtX,EAAQ,CAClE,QAASlE,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CACzC,IAAIyb,EAAS,UAAUzb,CAAC,EACxB,QAAS3H,KAAOojB,EACV,OAAO,UAAU,eAAe,KAAKA,EAAQpjB,CAAG,IAClD6L,EAAO7L,CAAG,EAAIojB,EAAOpjB,CAAG,EAG7B,CACD,OAAO6L,CACX,EACSsX,GAAS,MAAM,KAAM,SAAS,CACvC,CCvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAUA,SAASA,IAAW,CAClB,OAAAA,GAAW,OAAO,OAAS,OAAO,OAAO,KAAI,EAAK,SAAUtX,EAAQ,CAClE,QAASlE,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CACzC,IAAIyb,EAAS,UAAUzb,CAAC,EACxB,QAAS3H,KAAOojB,EACV,OAAO,UAAU,eAAe,KAAKA,EAAQpjB,CAAG,IAClD6L,EAAO7L,CAAG,EAAIojB,EAAOpjB,CAAG,EAG7B,CACD,OAAO6L,CACX,EACSsX,GAAS,MAAM,KAAM,SAAS,CACvC,CCvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAUA,SAASE,GAAKC,EAAS5jB,EAAI6jB,EAAM,CAC/B,IAAIC,EACAC,GAAQD,EAAoBD,EAAK,cAAgB,KAAOC,EAAoB,GAC5EE,EACJ,OAAO,UAAY,CACjB,IAAIC,EACAJ,EAAK,KAAOA,EAAK,OAAS,MAAQA,EAAK,UAASI,EAAU,KAAK,IAAG,GACtE,IAAIC,EAAUN,IACVO,EAAcD,EAAQ,SAAWH,EAAK,QAAUG,EAAQ,KAAK,SAAUE,EAAKlR,EAAO,CACrF,OAAO6Q,EAAK7Q,CAAK,IAAMkR,CAC7B,CAAK,EACD,GAAI,CAACD,EACH,OAAOH,EAETD,EAAOG,EACP,IAAIG,EAGJ,GAFIR,EAAK,KAAOA,EAAK,OAAS,MAAQA,EAAK,UAASQ,EAAa,KAAK,IAAG,GACzEL,EAAShkB,EAAG,MAAM,OAAQkkB,CAAO,EAC7BL,EAAK,KAAOA,EAAK,OAAS,MAAQA,EAAK,QAAS,CAClD,IAAIS,EAAa,KAAK,OAAO,KAAK,IAAG,EAAKL,GAAW,GAAG,EAAI,IACxDM,EAAgB,KAAK,OAAO,KAAK,IAAG,EAAKF,GAAc,GAAG,EAAI,IAC9DG,EAAsBD,EAAgB,GACtCE,EAAM,SAAaC,EAAKC,EAAK,CAE/B,IADAD,EAAM,OAAOA,CAAG,EACTA,EAAI,OAASC,GAClBD,EAAM,IAAMA,EAEd,OAAOA,CACf,EACM,QAAQ,KAAK,OAAcD,EAAIF,EAAe,CAAC,EAAI,KAAOE,EAAIH,EAAY,CAAC,EAAI,MAAO;AAAA;AAAA;AAAA,yBAA6F,KAAK,IAAI,EAAG,KAAK,IAAI,IAAM,IAAME,EAAqB,GAAG,CAAC,EAAI,iBAAkBX,GAAQ,KAAO,OAASA,EAAK,GAAG,CACpS,CACD,OAAAA,GAAQ,MAAgBA,EAAK,UAAY,MAAgBA,EAAK,SAASG,CAAM,EACtEA,CACX,CACA,CACA,SAASY,GAAavkB,EAAOwkB,EAAK,CAChC,GAAIxkB,IAAU,OACZ,MAAM,IAAI,MAAM,wBAA0BwkB,EAAM,KAAOA,EAAM,GAAG,EAEhE,OAAOxkB,CAEX,CACA,IAAIykB,GAAc,SAAqBjS,EAAGC,EAAG,CAC3C,OAAO,KAAK,IAAID,EAAIC,CAAC,EAAI,CAC3B,ECtDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAkBA,IAAIiS,GAAsB,SAA6B7R,EAAO,CAC5D,OAAOA,CACT,EACI8R,GAAwB,SAA+BC,EAAO,CAIhE,QAHIvU,EAAQ,KAAK,IAAIuU,EAAM,WAAaA,EAAM,SAAU,CAAC,EACrDtU,EAAM,KAAK,IAAIsU,EAAM,SAAWA,EAAM,SAAUA,EAAM,MAAQ,CAAC,EAC/DC,EAAM,CAAA,EACDC,EAAKzU,EAAOyU,GAAMxU,EAAKwU,IAC9BD,EAAI,KAAKC,CAAE,EAEb,OAAOD,CACT,EACIE,GAAqB,SAA4BC,EAAUC,EAAI,CACjE,IAAI/jB,EAAU8jB,EAAS,cACvB,GAAK9jB,EAGL,KAAIgkB,EAAU,SAAiBra,EAAM,CACnC,IAAIY,EAAQZ,EAAK,MACfa,EAASb,EAAK,OAChBoa,EAAG,CACD,MAAO,KAAK,MAAMxZ,CAAK,EACvB,OAAQ,KAAK,MAAMC,CAAM,CAC/B,CAAK,CACL,EACEwZ,EAAQhkB,EAAQ,sBAAqB,CAAE,EACvC,IAAIoK,EAAW,IAAI,eAAe,SAAUC,EAAS,CACnD,IAAIC,EAAQD,EAAQ,CAAC,EACrB,GAAIC,GAAS,MAAQA,EAAM,cAAe,CACxC,IAAI2Z,EAAM3Z,EAAM,cAAc,CAAC,EAC/B,GAAI2Z,EAAK,CACPD,EAAQ,CACN,MAAOC,EAAI,WACX,OAAQA,EAAI,SACtB,CAAS,EACD,MACD,CACF,CACDD,EAAQhkB,EAAQ,sBAAqB,CAAE,CAC3C,CAAG,EACD,OAAAoK,EAAS,QAAQpK,EAAS,CACxB,IAAK,YACT,CAAG,EACM,UAAY,CACjBoK,EAAS,UAAUpK,CAAO,CAC9B,EACA,EAoBIkkB,GAAuB,SAA8BJ,EAAUC,EAAI,CACrE,IAAI/jB,EAAU8jB,EAAS,cACvB,GAAK9jB,EAGL,KAAIgkB,EAAU,UAAmB,CAC/BD,EAAG/jB,EAAQ8jB,EAAS,QAAQ,WAAa,aAAe,WAAW,CAAC,CACxE,EACE,OAAAE,IACAhkB,EAAQ,iBAAiB,SAAUgkB,EAAS,CAC1C,QAAS,EACb,CAAG,EACM,UAAY,CACjBhkB,EAAQ,oBAAoB,SAAUgkB,CAAO,CACjD,EACA,EAiBIG,GAAiB,SAAwBnkB,EAASsK,EAAOwZ,EAAU,CACrE,GAAIxZ,GAAS,MAAQA,EAAM,cAAe,CACxC,IAAI2Z,EAAM3Z,EAAM,cAAc,CAAC,EAC/B,GAAI2Z,EAAK,CACP,IAAInjB,EAAO,KAAK,MAAMmjB,EAAIH,EAAS,QAAQ,WAAa,aAAe,WAAW,CAAC,EACnF,OAAOhjB,CACR,CACF,CACD,OAAO,KAAK,MAAMd,EAAQ,sBAAuB,EAAC8jB,EAAS,QAAQ,WAAa,QAAU,QAAQ,CAAC,CACrG,EASIM,GAAgB,SAAuBC,EAAQC,EAAOR,EAAU,CAClE,IAAIS,EAAwBC,EACxBC,EAAoBH,EAAM,YAC5BI,EAAcD,IAAsB,OAAS,EAAIA,EACjDE,EAAWL,EAAM,SACfM,EAAWP,EAASK,GACvBH,EAAyBT,EAAS,gBAAkB,MAAgBS,EAAuB,UAAY,MAAgBA,EAAuB,UAAUC,EAAyB,CAAE,EAAEA,EAAuBV,EAAS,QAAQ,WAAa,OAAS,KAAK,EAAIc,EAAUJ,EAAuB,SAAWG,EAAUH,EAAsB,CAC3U,EACIK,GAAc,SAAqBC,EAAO,CAC5C,IAAIC,EAAQ,KACZ,KAAK,OAAS,GACd,KAAK,cAAgB,KACrB,KAAK,YAAc,GACnB,KAAK,qBAAuB,KAC5B,KAAK,uBAAyB,KAC9B,KAAK,kBAAoB,GACzB,KAAK,cAAgB,IAAI,IACzB,KAAK,4BAA8B,GACnC,KAAK,gBAAkB,KACvB,KAAK,kBAAoB,EACzB,KAAK,oBAAsB,IAAI,IAC/B,KAAK,SAAW,UAAY,CAC1B,IAAIC,EAAM,KACNC,EAAM,UAAe,CACvB,OAAID,IAEO,OAAO,eAAmB,IAC5BA,EAAM,IAAI,eAAe,SAAU3a,EAAS,CACjDA,EAAQ,QAAQ,SAAUC,EAAO,CAC/Bya,EAAM,gBAAgBza,EAAM,OAAQA,CAAK,CACrD,CAAW,CACX,CAAS,EAEM,KAEf,EACI,MAAO,CACL,WAAY,UAAsB,CAChC,IAAI4a,EACJ,OAAQA,EAAOD,MAAU,KAAO,OAASC,EAAK,YAC/C,EACD,QAAS,SAAiBta,EAAQ,CAChC,IAAIua,EACJ,OAAQA,EAAQF,MAAU,KAAO,OAASE,EAAM,QAAQva,EAAQ,CAC9D,IAAK,YACf,CAAS,CACF,EACD,UAAW,SAAmBA,EAAQ,CACpC,IAAIwa,EACJ,OAAQA,EAAQH,EAAG,IAAO,KAAO,OAASG,EAAM,UAAUxa,CAAM,CACjE,CACP,CACA,IACE,KAAK,MAAQ,KACb,KAAK,WAAa,SAAU0X,EAAM,CAChC,OAAO,QAAQA,CAAI,EAAE,QAAQ,SAAU+C,EAAO,CAC5C,IAAItmB,EAAMsmB,EAAM,CAAC,EACfvmB,EAAQumB,EAAM,CAAC,EACb,OAAOvmB,EAAU,KAAa,OAAOwjB,EAAKvjB,CAAG,CACvD,CAAK,EACDgmB,EAAM,QAAU7C,GAAS,CACvB,MAAO,GACP,cAAe,EACf,SAAU,EACV,aAAc,EACd,WAAY,EACZ,mBAAoB,EACpB,iBAAkB,EAClB,WAAY,GACZ,WAAYsB,GACZ,eAAgBC,GAChB,SAAU,UAAoB,CAAE,EAChC,eAAgBU,GAChB,YAAa,CACX,MAAO,EACP,OAAQ,CACT,EACD,aAAc,EACd,eAAgB,IAChB,eAAgB,aAChB,yBAA0B,CAAE,EAC5B,MAAO,CACR,EAAE7B,CAAI,CACX,EACE,KAAK,OAAS,SAAUgD,EAAM,CAC5BP,EAAM,QAAQ,UAAY,MAAgBA,EAAM,QAAQ,SAASA,EAAOO,CAAI,CAChF,EACE,KAAK,YAAclD,GAAK,UAAY,CAClC,OAAA2C,EAAM,eAAc,EACb,CAACA,EAAM,YAAaA,EAAM,MAAQA,EAAM,MAAM,WAAa,KAAMA,EAAM,MAAQA,EAAM,MAAM,SAAW,IAAI,CAClH,EAAE,SAAUQ,EAAa,CACxBR,EAAM,OAAOQ,CAAW,CAC5B,EAAK,CACD,IAAK,GACL,MAAO,UAAiB,CACtB,OAAOR,EAAM,QAAQ,KACtB,EACD,YAAa,CAAC,KAAK,YAAa,KAAK,MAAQ,KAAK,MAAM,WAAa,KAAM,KAAK,MAAQ,KAAK,MAAM,SAAW,IAAI,CACtH,CAAG,EACD,KAAK,QAAU,UAAY,CACzBA,EAAM,OAAO,OAAO,OAAO,EAAE,QAAQ,SAAUhG,EAAG,CAChD,OAAOA,EAAC,CACd,CAAK,EACDgG,EAAM,OAAS,GACfA,EAAM,cAAgB,IAC1B,EACE,KAAK,UAAY,UAAY,CAC3B,OAAAA,EAAM,oBAAoB,QAAQA,EAAM,SAAS,OAAO,EACjD,UAAY,CACjBA,EAAM,SAAS,aACfA,EAAM,QAAO,CACnB,CACA,EACE,KAAK,YAAc,UAAY,CAC7B,IAAIS,EAAgBT,EAAM,QAAQ,iBAAgB,EAC9CA,EAAM,gBAAkBS,IAC1BT,EAAM,QAAO,EACbA,EAAM,cAAgBS,EACtBT,EAAM,gBAAgBA,EAAM,aAAc,CACxC,YAAa,OACb,SAAU,MAClB,CAAO,EACDA,EAAM,OAAO,KAAKA,EAAM,QAAQ,mBAAmBA,EAAO,SAAUpb,EAAM,CACxEob,EAAM,WAAapb,EACnBob,EAAM,YAAW,CAClB,CAAA,CAAC,EACFA,EAAM,OAAO,KAAKA,EAAM,QAAQ,qBAAqBA,EAAO,SAAUV,EAAQ,CAC5EU,EAAM,kBAAoB,EACtBA,EAAM,eAAiBV,IAGvBU,EAAM,uBAAyB,OACjC,aAAaA,EAAM,oBAAoB,EACvCA,EAAM,qBAAuB,MAE/BA,EAAM,YAAc,GACpBA,EAAM,gBAAkBA,EAAM,aAAeV,EAAS,UAAY,WAClEU,EAAM,aAAeV,EACrBU,EAAM,YAAW,EACjBA,EAAM,qBAAuB,WAAW,UAAY,CAClDA,EAAM,qBAAuB,KAC7BA,EAAM,YAAc,GACpBA,EAAM,gBAAkB,KACxBA,EAAM,YAAW,CAC3B,EAAWA,EAAM,QAAQ,cAAc,EAChC,CAAA,CAAC,EAER,EACE,KAAK,QAAU,UAAY,CACzB,OAAOA,EAAM,WAAWA,EAAM,QAAQ,WAAa,QAAU,QAAQ,CACzE,EACE,KAAK,YAAc3C,GAAK,UAAY,CAClC,MAAO,CAAC2C,EAAM,QAAQ,MAAOA,EAAM,QAAQ,aAAcA,EAAM,QAAQ,aAAcA,EAAM,QAAQ,UAAU,CAC9G,EAAE,SAAUU,EAAOC,EAAcC,EAAcC,EAAY,CAC1D,OAAAb,EAAM,4BAA8B,GAC7B,CACL,MAAOU,EACP,aAAcC,EACd,aAAcC,EACd,WAAYC,CAClB,CACA,EAAK,CACD,IAAK,EACT,CAAG,EACD,KAAK,uBAAyB,SAAUC,EAAclU,EAAO,CAG3D,QAFImU,EAA4B,IAAI,IAChCC,EAAuB,IAAI,IACtBha,EAAI4F,EAAQ,EAAG5F,GAAK,EAAGA,IAAK,CACnC,IAAIia,EAAcH,EAAa9Z,CAAC,EAChC,GAAI,CAAA+Z,EAA0B,IAAIE,EAAY,IAAI,EAGlD,KAAIC,EAA8BF,EAAqB,IAAIC,EAAY,IAAI,EAM3E,GALIC,GAA+B,MAAQD,EAAY,IAAMC,EAA4B,IACvFF,EAAqB,IAAIC,EAAY,KAAMA,CAAW,EAC7CA,EAAY,IAAMC,EAA4B,KACvDH,EAA0B,IAAIE,EAAY,KAAM,EAAI,EAElDF,EAA0B,OAASf,EAAM,QAAQ,MACnD,MAEH,CACD,OAAOgB,EAAqB,OAAShB,EAAM,QAAQ,MAAQ,MAAM,KAAKgB,EAAqB,OAAM,CAAE,EAAE,KAAK,SAAUzU,EAAGC,EAAG,CACxH,OAAOD,EAAE,IAAMC,EAAE,GACvB,CAAK,EAAE,CAAC,EAAI,MACZ,EACE,KAAK,gBAAkB6Q,GAAK,UAAY,CACtC,MAAO,CAAC2C,EAAM,YAAa,EAAEA,EAAM,aAAa,CACpD,EAAK,SAAUmB,EAAOC,EAAe,CACjC,IAAIV,EAAQS,EAAM,MAChBR,EAAeQ,EAAM,aACrBP,EAAeO,EAAM,aACrBN,EAAaM,EAAM,WACjBE,EAAMrB,EAAM,4BAA4B,OAAS,EAAI,KAAK,IAAI,MAAM,KAAMA,EAAM,2BAA2B,EAAI,EACnHA,EAAM,4BAA8B,GAEpC,QADIc,EAAed,EAAM,kBAAkB,MAAM,EAAGqB,CAAG,EAC9CC,EAAMD,EAAKC,EAAMZ,EAAOY,IAAO,CACtC,IAAItnB,EAAM6mB,EAAWS,CAAG,EACpBC,EAAsBvB,EAAM,QAAQ,QAAU,EAAIc,EAAaQ,EAAM,CAAC,EAAItB,EAAM,uBAAuBc,EAAcQ,CAAG,EACxHlX,EAAQmX,EAAsBA,EAAoB,IAAMZ,EAAeC,EACvEY,EAAeJ,EAAc,IAAIpnB,CAAG,EACpC+B,EAAO,OAAOylB,GAAiB,SAAWA,EAAexB,EAAM,QAAQ,aAAasB,CAAG,EACvFjX,EAAMD,EAAQrO,EACd0lB,EAAOF,EAAsBA,EAAoB,KAAOD,EAAMtB,EAAM,QAAQ,MAChFc,EAAaQ,CAAG,EAAI,CAClB,MAAOA,EACP,MAAOlX,EACP,KAAMrO,EACN,IAAKsO,EACL,IAAKrQ,EACL,KAAMynB,CACd,CACK,CACD,OAAAzB,EAAM,kBAAoBc,EACnBA,CACX,EAAK,CACD,IAAK,GACL,MAAO,UAAiB,CACtB,OAAOd,EAAM,QAAQ,KACtB,CACL,CAAG,EACD,KAAK,eAAiB3C,GAAK,UAAY,CACrC,MAAO,CAAC2C,EAAM,kBAAmBA,EAAM,UAAWA,EAAM,YAAY,CACxE,EAAK,SAAUc,EAAcY,EAAWC,EAAc,CAClD,OAAO3B,EAAM,MAAQc,EAAa,OAAS,GAAKY,EAAY,EAAIE,GAAe,CAC7E,aAAcd,EACd,UAAWY,EACX,aAAcC,CACf,CAAA,EAAI,IACT,EAAK,CACD,IAAK,GACL,MAAO,UAAiB,CACtB,OAAO3B,EAAM,QAAQ,KACtB,CACL,CAAG,EACD,KAAK,WAAa3C,GAAK,UAAY,CACjC,MAAO,CAAC2C,EAAM,QAAQ,eAAgBA,EAAM,eAAc,EAAIA,EAAM,QAAQ,SAAUA,EAAM,QAAQ,KAAK,CAC1G,EAAE,SAAU6B,EAAgBlD,EAAOmD,EAAUpB,EAAO,CACnD,OAAO/B,IAAU,KAAO,CAAE,EAAGkD,EAAe1E,GAAS,CAAE,EAAEwB,EAAO,CAC9D,SAAUmD,EACV,MAAOpB,CACR,CAAA,CAAC,CACN,EAAK,CACD,IAAK,GACL,MAAO,UAAiB,CACtB,OAAOV,EAAM,QAAQ,KACtB,CACL,CAAG,EACD,KAAK,iBAAmB,SAAUlZ,EAAM,CACtC,IAAIib,EAAgB/B,EAAM,QAAQ,eAC9BgC,EAAWlb,EAAK,aAAaib,CAAa,EAC9C,OAAKC,EAIE,SAASA,EAAU,EAAE,GAH1B,QAAQ,KAAK,2BAA6BD,EAAgB,gCAAgC,EACnF,GAGb,EACE,KAAK,gBAAkB,SAAUjb,EAAMvB,EAAO,CAC5C,IAAIzD,EAAOke,EAAM,kBAAkBA,EAAM,iBAAiBlZ,CAAI,CAAC,EAC/D,GAAI,CAAChF,GAAQ,CAACgF,EAAK,YAAa,CAC9BkZ,EAAM,oBAAoB,QAAQ,SAAUiC,EAAQjoB,EAAK,CACnDioB,IAAWnb,IACbkZ,EAAM,SAAS,UAAUlZ,CAAI,EAC7BkZ,EAAM,oBAAoB,OAAUhmB,CAAG,EAEjD,CAAO,EACD,MACD,CACD,IAAIkoB,EAAWlC,EAAM,oBAAoB,IAAIle,EAAK,GAAG,EACjDogB,IAAapb,IACXob,GACFlC,EAAM,SAAS,UAAUkC,CAAQ,EAEnClC,EAAM,SAAS,QAAQlZ,CAAI,EAC3BkZ,EAAM,oBAAoB,IAAIle,EAAK,IAAKgF,CAAI,GAE9C,IAAIqb,EAAmBnC,EAAM,QAAQ,eAAelZ,EAAMvB,EAAOya,CAAK,EACtEA,EAAM,WAAWle,EAAMqgB,CAAgB,CAC3C,EACE,KAAK,WAAa,SAAUrgB,EAAM/F,EAAM,CACtC,IAAIqmB,EACAC,GAAYD,EAAwBpC,EAAM,cAAc,IAAIle,EAAK,GAAG,IAAM,KAAOsgB,EAAwBtgB,EAAK,KAC9GwgB,EAAQvmB,EAAOsmB,EACfC,IAAU,IACRxgB,EAAK,MAAQke,EAAM,cAIrBA,EAAM,gBAAgBA,EAAM,aAAc,CACxC,YAAaA,EAAM,mBAAqBsC,EACxC,SAAU,MACpB,CAAS,EAEHtC,EAAM,4BAA4B,KAAKle,EAAK,KAAK,EACjDke,EAAM,cAAgB,IAAI,IAAIA,EAAM,cAAc,IAAIle,EAAK,IAAK/F,CAAI,CAAC,EACrEikB,EAAM,OAAO,EAAK,EAExB,EACE,KAAK,eAAiB,SAAUlZ,EAAM,CAC/BA,GAGLkZ,EAAM,gBAAgBlZ,EAAM,MAAS,CACzC,EACE,KAAK,gBAAkBuW,GAAK,UAAY,CACtC,MAAO,CAAC2C,EAAM,WAAU,EAAIA,EAAM,gBAAiB,CAAA,CACvD,EAAK,SAAUuC,EAASzB,EAAc,CAElC,QADI0B,EAAe,CAAA,EACVC,EAAI,EAAGC,EAAMH,EAAQ,OAAQE,EAAIC,EAAKD,IAAK,CAClD,IAAIE,EAAMJ,EAAQE,CAAC,EACfxB,EAAcH,EAAa6B,CAAG,EAClCH,EAAa,KAAKvB,CAAW,CAC9B,CACD,OAAOuB,CACX,EAAK,CACD,IAAK,GACL,MAAO,UAAiB,CACtB,OAAOxC,EAAM,QAAQ,KACtB,CACL,CAAG,EACD,KAAK,wBAA0B,SAAUV,EAAQ,CAC/C,IAAIwB,EAAed,EAAM,kBACzB,OAAO1B,GAAawC,EAAa8B,GAAwB,EAAG9B,EAAa,OAAS,EAAG,SAAUlU,EAAO,CACpG,OAAO0R,GAAawC,EAAalU,CAAK,CAAC,EAAE,KAC/C,EAAO0S,CAAM,CAAC,CAAC,CACf,EACE,KAAK,sBAAwB,SAAUO,EAAUgD,EAAO,CACtD,IAAI9mB,EAAOikB,EAAM,UACb6C,IAAU,SACRhD,GAAYG,EAAM,aACpB6C,EAAQ,QACChD,GAAYG,EAAM,aAAejkB,EAC1C8mB,EAAQ,MAERA,EAAQ,SAGRA,IAAU,QACZhD,EAAWA,EACFgD,IAAU,MACnBhD,EAAWA,EAAW9jB,EACb8mB,IAAU,WACnBhD,EAAWA,EAAW9jB,EAAO,GAE/B,IAAI+mB,EAAiB9C,EAAM,QAAQ,WAAa,cAAgB,eAC5D+C,EAAa/C,EAAM,cAAgB,aAAcA,EAAM,cAAgBA,EAAM,cAAc,SAAS,gBAAgB8C,CAAc,EAAI9C,EAAM,cAAc8C,CAAc,EAAI,EAC5KE,EAAYD,EAAa/C,EAAM,QAAO,EAC1C,OAAO,KAAK,IAAI,KAAK,IAAIgD,EAAWnD,CAAQ,EAAG,CAAC,CACpD,EACE,KAAK,kBAAoB,SAAUjT,EAAOiW,EAAO,CAC3CA,IAAU,SACZA,EAAQ,QAEVjW,EAAQ,KAAK,IAAI,EAAG,KAAK,IAAIA,EAAOoT,EAAM,QAAQ,MAAQ,CAAC,CAAC,EAC5D,IAAIiB,EAAc3C,GAAa0B,EAAM,gBAAiB,EAACpT,CAAK,CAAC,EAC7D,GAAIiW,IAAU,OACZ,GAAI5B,EAAY,KAAOjB,EAAM,aAAeA,EAAM,UAAYA,EAAM,QAAQ,iBAC1E6C,EAAQ,cACC5B,EAAY,OAASjB,EAAM,aAAeA,EAAM,QAAQ,mBACjE6C,EAAQ,YAER,OAAO,CAAC7C,EAAM,aAAc6C,CAAK,EAGrC,IAAIhD,EAAWgD,IAAU,MAAQ5B,EAAY,IAAMjB,EAAM,QAAQ,iBAAmBiB,EAAY,MAAQjB,EAAM,QAAQ,mBACtH,MAAO,CAACA,EAAM,sBAAsBH,EAAUgD,CAAK,EAAGA,CAAK,CAC/D,EACE,KAAK,cAAgB,UAAY,CAC/B,OAAO7C,EAAM,oBAAoB,KAAO,CAC5C,EACE,KAAK,oBAAsB,UAAY,CACjCA,EAAM,yBAA2B,OACnC,aAAaA,EAAM,sBAAsB,EACzCA,EAAM,uBAAyB,KAErC,EACE,KAAK,eAAiB,SAAUH,EAAUoD,EAAO,CAC/C,IAAIC,EAAQD,IAAU,OAAS,CAAE,EAAGA,EAClCE,EAAcD,EAAM,MACpBL,EAAQM,IAAgB,OAAS,QAAUA,EAC3CvD,EAAWsD,EAAM,SACnBlD,EAAM,oBAAmB,EACrBJ,IAAa,UAAYI,EAAM,cAAa,GAC9C,QAAQ,KAAK,wEAAwE,EAEvFA,EAAM,gBAAgBA,EAAM,sBAAsBH,EAAUgD,CAAK,EAAG,CAClE,YAAa,OACb,SAAUjD,CAChB,CAAK,CACL,EACE,KAAK,cAAgB,SAAUhT,EAAOwW,EAAQ,CAC5C,IAAIC,EAAQD,IAAW,OAAS,CAAE,EAAGA,EACnCE,EAAcD,EAAM,MACpBE,EAAeD,IAAgB,OAAS,OAASA,EACjD1D,EAAWyD,EAAM,SACnBzW,EAAQ,KAAK,IAAI,EAAG,KAAK,IAAIA,EAAOoT,EAAM,QAAQ,MAAQ,CAAC,CAAC,EAC5DA,EAAM,oBAAmB,EACrBJ,IAAa,UAAYI,EAAM,cAAa,GAC9C,QAAQ,KAAK,wEAAwE,EAEvF,IAAIwD,EAAwBxD,EAAM,kBAAkBpT,EAAO2W,CAAY,EACrE1D,EAAW2D,EAAsB,CAAC,EAClCX,EAAQW,EAAsB,CAAC,EACjCxD,EAAM,gBAAgBH,EAAU,CAC9B,YAAa,OACb,SAAUD,CAChB,CAAK,EACGA,IAAa,UAAYI,EAAM,cAAa,IAC9CA,EAAM,uBAAyB,WAAW,UAAY,CACpDA,EAAM,uBAAyB,KAC/B,IAAIyD,EAAezD,EAAM,oBAAoB,IAAIA,EAAM,QAAQ,WAAWpT,CAAK,CAAC,EAChF,GAAI6W,EAAc,CAChB,IAAIC,EAAyB1D,EAAM,kBAAkBpT,EAAOiW,CAAK,EAC/Dc,EAAYD,EAAuB,CAAC,EACjClF,GAAYmF,EAAW3D,EAAM,YAAY,GAC5CA,EAAM,cAAcpT,EAAO,CACzB,MAAOiW,EACP,SAAUjD,CACxB,CAAa,CAEb,MACUI,EAAM,cAAcpT,EAAO,CACzB,MAAOiW,EACP,SAAUjD,CACtB,CAAW,CAEX,CAAO,EAEP,EACE,KAAK,SAAW,SAAU0C,EAAOsB,EAAQ,CACvC,IAAIC,EAAQD,IAAW,OAAS,CAAE,EAAGA,EACnChE,EAAWiE,EAAM,SACnB7D,EAAM,oBAAmB,EACrBJ,IAAa,UAAYI,EAAM,cAAa,GAC9C,QAAQ,KAAK,wEAAwE,EAEvFA,EAAM,gBAAgBA,EAAM,aAAesC,EAAO,CAChD,YAAa,OACb,SAAU1C,CAChB,CAAK,CACL,EACE,KAAK,aAAe,UAAY,CAC9B,IAAIkE,EACJ,SAAUA,EAAwB9D,EAAM,gBAAe,EAAGA,EAAM,QAAQ,MAAQ,CAAC,IAAM,KAAO,OAAS8D,EAAsB,MAAQ9D,EAAM,QAAQ,cAAgBA,EAAM,QAAQ,aAAeA,EAAM,QAAQ,UAClN,EACE,KAAK,gBAAkB,SAAUV,EAAQyE,EAAO,CAC9C,IAAIpE,EAAcoE,EAAM,YACtBnE,EAAWmE,EAAM,SACnB/D,EAAM,QAAQ,WAAWV,EAAQ,CAC/B,SAAUM,EACV,YAAaD,CACd,EAAEK,CAAK,CACZ,EACE,KAAK,QAAU,UAAY,CACzBA,EAAM,cAAgB,IAAI,IAC1BA,EAAM,OAAO,EAAK,CACtB,EACE,KAAK,WAAWD,CAAK,EACrB,KAAK,WAAa,KAAK,QAAQ,YAC/B,KAAK,aAAe,KAAK,QAAQ,cACjC,KAAK,kBAAoB,KAAK,QAAQ,yBACtC,KAAK,kBAAkB,QAAQ,SAAUje,EAAM,CAC7Cke,EAAM,cAAc,IAAIle,EAAK,IAAKA,EAAK,IAAI,CAC/C,CAAG,EACD,KAAK,YAAW,CAClB,EACI8gB,GAA0B,SAAiCoB,EAAKC,EAAMC,EAAiBnqB,EAAO,CAChG,KAAOiqB,GAAOC,GAAM,CAClB,IAAIE,GAAUH,EAAMC,GAAQ,EAAI,EAC5BG,EAAeF,EAAgBC,CAAM,EACzC,GAAIC,EAAerqB,EACjBiqB,EAAMG,EAAS,UACNC,EAAerqB,EACxBkqB,EAAOE,EAAS,MAEhB,QAAOA,CAEV,CACD,OAAIH,EAAM,EACDA,EAAM,EAEN,CAEX,EACA,SAASpC,GAAeyC,EAAO,CAU7B,QATIvD,EAAeuD,EAAM,aACvB3C,EAAY2C,EAAM,UAClB1C,EAAe0C,EAAM,aACnB3D,EAAQI,EAAa,OAAS,EAC9BwD,EAAY,SAAmB1X,EAAO,CACxC,OAAOkU,EAAalU,CAAK,EAAE,KAC/B,EACM2X,EAAa3B,GAAwB,EAAGlC,EAAO4D,EAAW3C,CAAY,EACtE6C,EAAWD,EACRC,EAAW9D,GAASI,EAAa0D,CAAQ,EAAE,IAAM7C,EAAeD,GACrE8C,IAEF,MAAO,CACL,WAAYD,EACZ,SAAUC,CACd,CACA,CC3nBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAkBA,IAAIC,GAA4B,OAAO,SAAa,IAAcC,EAAAA,gBAAwBC,EAAAA,UAC1F,SAASC,GAAmBnrB,EAAS,CACnC,IAAIorB,EAAWC,EAAAA,WAAiB,UAAY,CAC1C,MAAO,EACX,EAAK,CAAE,CAAA,EAAE,CAAC,EACJC,EAAkB5H,GAAS,CAAE,EAAE1jB,EAAS,CAC1C,SAAU,SAAkBslB,EAAUwB,EAAM,CACtCA,EACFyE,GAAS,UAACH,CAAQ,EAElBA,IAEFprB,EAAQ,UAAY,MAAgBA,EAAQ,SAASslB,EAAUwB,CAAI,CACpE,CACL,CAAG,EACG0E,EAAkBC,EAAAA,SAAe,UAAY,CAC7C,OAAO,IAAIpF,GAAYiF,CAAe,CAC5C,CAAK,EACDhG,EAAWkG,EAAgB,CAAC,EAC9B,OAAAlG,EAAS,WAAWgG,CAAe,EACnCJ,EAAAA,UAAgB,UAAY,CAC1B,OAAO5F,EAAS,WACjB,EAAE,CAAE,CAAA,EACL0F,GAA0B,UAAY,CACpC,OAAO1F,EAAS,aACpB,CAAG,EACMA,CACT,CACA,SAASoG,GAAe1rB,EAAS,CAC/B,OAAOmrB,GAAmBzH,GAAS,CACjC,mBAAoB2B,GACpB,qBAAsBK,GACtB,WAAYE,EAChB,EAAK5lB,CAAO,CAAC,CACb,CC5CO,MAAM2rB,GAAqB/gB,GAAM,cACtC,IACF,ECEO,SAASghB,EAAmB,CAAC,QAAAxa,EAAS,UAAAhP,EAAW,cAAAypB,GAAuB,CAC7E,KAAM,CAAC,QAAAhgB,EAAS,YAAA/C,CAAW,EAAIiS,aAAW4Q,EAAkB,EACtDG,EAAcjgB,EAAQ/C,CAAW,EACjCijB,EAAU3a,GAAYlP,EAAA,IAAA2R,EAAA,CAAM,QAAQ,2BAA4B,CAAA,EAChE,CAAC,YAAAmY,CAAA,EAAerR,EAAiBmR,CAAW,EAEhD,OAAAxkB,EAAA,KAAC,MAAA,CACC,UAAW3E,EACTP,EACA,wEACF,EAEA,SAAA,CAACF,EAAA,IAAA,MAAA,CAAI,UAAU,UAAW,SAAQ6pB,EAAA,EACjCF,GACC3pB,EAAA,IAAC,MAAI,CAAA,UAAU,0BACb,SAAAA,EAAA,IAAC0R,GAAA,CACC,QAAQ,OACR,MAAM,UACN,QAAS,IAAM,CACToY,GACFtQ,GAAoBsQ,CAAW,CAEnC,EAEA,SAAA9pB,EAAAA,IAAC2R,EAAM,CAAA,QAAQ,UAAW,CAAA,CAAA,CAAA,EAE9B,CAAA,CAAA,CAAA,CAIR,CCpCO,SAASoY,GAAiBvrB,EAAyB,CAClD,KAAA,CAAC,MAAAoL,EAAO,UAAA1J,CAAa,EAAA1B,EACrB,CAAC,MAAAsT,GAASC,IACV,CAAC,WAAAsP,CAAA,EAAc5I,EAAiB7O,CAAK,EAE3C,OAAKyX,EAKHrhB,EAAA,IAAC,MAAA,CACC,UAAWS,EAAKP,EAAW,QAAQ,EACnC,IAAKmhB,EACL,IAAKvP,EAAM,CACT,QAAS,oBACT,OAAQ,CAAC,KAAMlI,EAAM,IAAI,CAAA,CAC1B,CAAA,CAAA,EAVI5J,EAAA,IAAC0pB,EAAoB,CAAA,GAAGlrB,CAAO,CAAA,CAa1C,CCfA,MAAMwrB,GAAU,QAET,SAASC,GAAgBzrB,EAAyB,CACjD,KAAA,CAAC,MAAAoL,EAAO,UAAA1J,CAAa,EAAA1B,EACrB,CAAC,MAAAsT,GAASC,IACV,CAACmY,EAAUC,CAAW,EAAIxlB,WAAS,EAAK,EACxC,CAAC1B,EAAWmnB,CAAY,EAAIzlB,WAAS,EAAI,EACzC,CAAC0lB,EAAUC,CAAW,EAAI3lB,WAAS,EAAK,EACxC,CAAC4lB,EAAUC,CAAW,EAAI7lB,WAAwB,IAAI,EACtD,CAAC,WAAA0c,CAAA,EAAc5I,EAAiB7O,CAAK,EAuB3C,OArBA6gB,EAAAA,UAAU,IAAM,CACT7gB,IACAyX,EAEMzX,EAAM,WAAcogB,IAC7BG,EAAY,EAAI,EAChBC,EAAa,EAAK,GAEFM,GAAArJ,CAAU,EACvB,KAAiBsJ,GAAA,CAChBH,EAAYG,EAAS,IAAI,CAAA,CAC1B,EACA,MAAM,IAAM,CACXL,EAAY,EAAI,CAAA,CACjB,EACA,QAAQ,IAAM,CACbF,EAAa,EAAK,CAAA,CACnB,EAdHE,EAAY,EAAI,EAelB,EACC,CAAC1gB,EAAOyX,CAAU,CAAC,EAElBpe,EAEAjD,EAAA,IAAC6E,GAAA,CACC,gBAAe,GACf,aAAYiN,EAAM,CAAC,QAAS,wBAAwB,CAAA,CAAA,EAKtDoY,EAEAlqB,EAAA,IAAC0pB,EAAA,CACE,GAAGlrB,EACJ,QAASwB,EAAAA,IAAC2R,EAAM,CAAA,QAAQ,oCAAqC,CAAA,CAAA,CAAA,EAK/D0Y,EAEArqB,EAAA,IAAC0pB,EAAA,CACE,GAAGlrB,EACJ,QAASwB,EAAAA,IAAC2R,EAAM,CAAA,QAAQ,yCAA0C,CAAA,CAAA,CAAA,EAMtE3R,EAAA,IAAC,MAAA,CACC,UAAWS,EACT,8FACAP,CACF,EAEA,eAAC,MAAI,CAAA,UAAU,oBAAqB,SAAA,GAAGqqB,CAAQ,GAAG,CAAA,CAAA,CAGxD,CAEA,SAASG,GAAgB9oB,EAAa,CAC7B,OAAA8R,GAAU,IAAI9R,EAAK,CACxB,aAAc,OAEd,gBAAiB,GACjB,QAAS,CACP,OAAQ,YACV,CAAA,CACD,CACH,CCrFO,SAASgpB,GAAiBpsB,EAAyB,CAClD,KAAA,CAAC,MAAAoL,EAAO,UAAA1J,CAAa,EAAA1B,EACrB,CAAC,WAAA6iB,CAAA,EAAc5I,EAAiB7O,CAAK,EACrCnL,EAAMiE,SAAyB,IAAI,EACnC,CAACmoB,EAAcC,CAAe,EAAInmB,WAAS,EAAK,EAMlD,OAJJ8lB,EAAAA,UAAU,IAAM,OACdK,EAAgB,GAACxlB,EAAA7G,EAAI,UAAJ,MAAA6G,EAAa,YAAYsE,EAAM,MAAK,CAAA,EACpD,CAACA,CAAK,CAAC,EAENihB,GAAgB,CAACxJ,EACZrhB,EAAA,IAAC0pB,EAAoB,CAAA,GAAGlrB,CAAO,CAAA,EAItCwB,EAAA,IAAC,QAAA,CACC,UAAAE,EACA,IAAAzB,EACA,SAAQ,GACR,aAAa,8BACb,YAAW,GACX,SAAQ,GAER,SAAAuB,EAAA,IAAC,SAAA,CACC,IAAKqhB,EACL,KAAMzX,EAAM,KACZ,QAAS,IAAM,CACbkhB,EAAgB,EAAI,CACtB,CAAA,CACF,CAAA,CAAA,CAGN,CChCO,SAASC,GAAiBvsB,EAAyB,CAClD,KAAA,CAAC,MAAAoL,EAAO,UAAA1J,CAAa,EAAA1B,EACrB,CAAC,WAAA6iB,CAAA,EAAc5I,EAAiB7O,CAAK,EACrCnL,EAAMiE,SAAyB,IAAI,EACnC,CAACmoB,EAAcC,CAAe,EAAInmB,WAAS,EAAK,EAMlD,OAJJ8lB,EAAAA,UAAU,IAAM,OACdK,EAAgB,GAACxlB,EAAA7G,EAAI,UAAJ,MAAA6G,EAAa,YAAYsE,EAAM,MAAK,CAAA,EACpD,CAACA,CAAK,CAAC,EAENihB,GAAgB,CAACxJ,EACZrhB,EAAA,IAAC0pB,EAAoB,CAAA,GAAGlrB,CAAO,CAAA,EAItCwB,EAAA,IAAC,QAAA,CACC,UAAAE,EACA,IAAAzB,EACA,SAAQ,GACR,aAAa,8BACb,SAAQ,GAER,SAAAuB,EAAA,IAAC,SAAA,CACC,IAAKqhB,EACL,KAAMzX,EAAM,KACZ,QAAS,IAAM,CACbkhB,EAAgB,EAAI,CACtB,CAAA,CACF,CAAA,CAAA,CAGN,CC9BO,SAASE,GAAexsB,EAAyB,CAChD,KAAA,CAAC,MAAAoL,EAAO,UAAA1J,CAAa,EAAA1B,EACrB,CAAC,MAAAsT,GAASC,IACV,CAAC,WAAAsP,CAAA,EAAc5I,EAAiB7O,CAAK,EAE3C,OAAKyX,EAKHrhB,EAAA,IAAC,SAAA,CACC,MAAO8R,EAAM,CACX,QAAS,oBACT,OAAQ,CAAC,KAAMlI,EAAM,IAAI,CAAA,CAC1B,EACD,UAAWnJ,EAAKP,EAAW,eAAe,EAC1C,IAAK,GAAGmhB,CAAU,YAAA,CAAA,EAVbrhB,EAAA,IAAC0pB,EAAoB,CAAA,GAAGlrB,CAAO,CAAA,CAa1C,CCfO,SAASysB,GAAwBzsB,EAAyB,CACzD,KAAA,CAAC,MAAAoL,EAAO,UAAA1J,CAAa,EAAA1B,EACrB,CAAC,MAAAsT,GAASC,IACVtT,EAAMiE,SAA0B,IAAI,EACpC,CAACwoB,EAAaC,CAAc,EAAIxmB,WAAS,EAAK,EAC9CymB,EAAY1oB,EAAAA,SACZ,CAACO,EAAWmnB,CAAY,EAAIzlB,WAAS,EAAK,EAC1C,CAAC,WAAA0c,CAAA,EAAc5I,EAAiB7O,CAAK,EA4B3C,OA1BA6gB,EAAAA,UAAU,IAAM,CAETpJ,EAEMzX,EAAM,WAAaA,EAAM,UAAY,KAC9CuhB,EAAe,EAAI,EACV1sB,EAAI,UACTA,EAAA,QAAQ,OAAS,IAAM,CACzB,aAAa2sB,EAAU,OAAO,EAC9BhB,EAAa,EAAK,CAAA,EAGpBrR,GAAgBsI,EAAYzX,CAAK,EAAE,KAAY2P,GAAA,CACzC9a,EAAI,UACNA,EAAI,QAAQ,IAAM8a,EACpB,CACD,EAIS6R,EAAA,QAAU,WAAW,IAAM,CACnCD,EAAe,EAAI,GAClB,GAAI,GAnBPA,EAAe,EAAI,CAoBrB,EACC,CAACvhB,EAAOyX,CAAU,CAAC,EAElB6J,EACKlrB,EAAA,IAAC0pB,EAAoB,CAAA,GAAGlrB,CAAO,CAAA,SAIrC,MAAI,CAAA,UAAWiC,EAAKP,EAAW,eAAe,EAC5C,SAAA,CAAA+C,SAAc4B,GAAe,EAAA,EAC9B7E,EAAA,IAAC,SAAA,CACC,IAAAvB,EACA,MAAOqT,EAAM,CACX,QAAS,oBACT,OAAQ,CAAC,KAAMlI,EAAM,IAAI,CAAA,CAC1B,EACD,UAAWnJ,EAAK,gBAAiBwC,GAAa,QAAQ,CAAA,CACxD,CACF,CAAA,CAAA,CAEJ,CAEA,eAAe8V,GACbM,EACAzP,EACiB,CACX,MAAA2P,EAAM,IAAI,IAAIF,CAAS,EAG7B,GAAI,CAACE,EAAI,aAAa,IAAI,gBAAgB,EAAG,CAC3C,KAAM,CAAC,KAAAzE,CAAA,EAAQ,MAAMpB,GAAU,KAC7B,gBAAgB9J,EAAM,EAAE,oBAAA,EAE1B2P,EAAI,aAAa,OAAO,gBAAiBzE,EAAK,aAAa,CAC7D,CAEA,OAAOuW,GAA0B9R,CAAG,CACtC,CAEA,SAAS8R,GAA0B9R,EAAU,CAE3C,MAAO,sDAAsD,mBAC3DA,EAAI,SAAS,CACd,CAAA,EACH,CC7EO,MAAM+R,GAAoB,CAC/B,KAAMrB,GACN,MAAOW,GACP,MAAOG,GACP,MAAOhB,GACP,IAAKiB,GACL,YAAaC,GACb,WAAYA,GACZ,KAAMA,GACN,WAAYvB,CACd,EAEO,SAAS6B,GAAmB3hB,EAAkB,CACnD,MAAM4hB,EAAO5hB,GAAA,YAAAA,EAAO,KACdhM,EAAOgM,GAAA,YAAAA,EAAO,KACpB,OACE0hB,GAAkBE,CAAI,GAAKF,GAAkB1tB,CAAI,GAAK8rB,CAE1D,CCzBO,MAAM+B,GAAkB1rB,EAC7BC,EAAAA,IAAC,OAAK,CAAA,EAAE,yDAA0D,CAAA,EAClE,qBAAqB,EC6BhB,SAAS0rB,GAAqB,CACnC,QAAA/hB,EACA,QAAAgiB,EACA,WAAAC,EAAa,GACb,UAAA1rB,EACA,kBAAA2rB,EACA,cAAAlC,EAAgB,GAChB,GAAGnrB,CACL,EAA8B,CACtB,MAAA6d,EAAWyP,GAAc,qBAAqB,EAE9C,CAACllB,EAAaC,CAAc,EAAI2B,EACpChK,EAAM,YACNA,EAAM,oBAAsB,EAC5BA,EAAM,mBAAA,EAGForB,EAAcjgB,EAAQ/C,CAAW,EACjC+Z,EAAetf,EAAAA,QAAQ,KACpB,CAAC,QAAAsI,EAAS,YAAA/C,IAChB,CAAC+C,EAAS/C,CAAW,CAAC,EACnBmlB,EAAUR,GAAmB3B,CAAW,EAE9C,GAAI,CAACA,EACO,OAAA+B,GAAA,MAAAA,IACH,KAGH,MAAAK,EAAcriB,EAAQ,OAAS,EAAI/C,EACnCqlB,EAAW,IAAM,CACrBplB,EAAeD,EAAc,CAAC,CAAA,EAE1BslB,EAAkBtlB,EAAc,EAChCulB,EAAe,IAAM,CACzBtlB,EAAeD,EAAc,CAAC,CAAA,EAGhC,OACGxB,EAAAA,KAAAqkB,GAAmB,SAAnB,CAA4B,MAAO9I,EACjC,SAAA,CACCiL,GAAA5rB,EAAA,IAACosB,GAAA,CACC,YAAaP,EACb,SAAAxP,EACA,QAAAsP,EACA,OAAQK,EAAcC,EAAW,OACjC,WAAYC,EAAkBC,EAAe,OAC7C,cAAAxC,CAAA,CACF,SAED,MAAI,CAAA,UAAWlpB,EAAK,qCAAsCP,CAAS,EACjE,SAAA,CACCmc,GAAArc,EAAA,IAACiV,EAAA,CACC,KAAK,KACL,UAAU,qEACV,SAAU,CAACiX,EACX,QAASC,EAET,eAACE,GAAsB,EAAA,CAAA,CACzB,EAEFrsB,EAAAA,IAACwU,GAAgB,CAAA,QAAS,GACxB,SAAAxU,EAAA,IAACqL,GAAE,IAAF,CACC,UAAU,oDAET,GAAG2J,GAEJ,SAAAhV,EAAA,IAAC+rB,EAAA,CACC,UAAU,0BACV,MAAOnC,EACP,cAAAD,CAAA,CACF,CAAA,EAPKC,EAAY,EAAA,EASrB,EACCvN,GACCrc,EAAA,IAACiV,EAAA,CACC,KAAK,KACL,UAAU,sEACV,SAAU,CAAC+W,EACX,QAASC,EAET,eAACK,GAAuB,EAAA,CAAA,CAC1B,CAAA,EAEJ,CACF,CAAA,CAAA,CAEJ,CAUA,SAASF,GAAO,CACd,OAAAG,EACA,WAAAC,EACA,QAAAb,EACA,SAAAtP,EACA,YAAAoQ,EACA,cAAA9C,CACF,EAAgB,CACd,KAAM,CAAC,QAAAhgB,EAAS,YAAA/C,CAAW,EAAIiS,aAAW4Q,EAAkB,EACtDG,EAAcjgB,EAAQ/C,CAAW,EACjC,CAAC,YAAAkjB,CAAA,EAAerR,EAAiBmR,CAAW,EA4B5C8C,EAAiBrQ,EAXrBrc,EAAA,IAACiV,EAAA,CACC,QAAS,IAAM,CACT6U,GACFtQ,GAAoBsQ,CAAW,CAEnC,EAEA,eAACvR,GAAiB,EAAA,CAAA,CAAA,EArBpBvY,EAAA,IAAC0R,GAAA,CACC,gBAAY6G,GAAiB,EAAA,EAC7B,QAAQ,OACR,QAAS,IAAM,CACTuR,GACFtQ,GAAoBsQ,CAAW,CAEnC,EAEA,SAAA9pB,EAAAA,IAAC2R,EAAM,CAAA,QAAQ,UAAW,CAAA,CAAA,CAAA,EAqB5B,OAAAvM,EAAA,KAAC,MAAI,CAAA,UAAU,6GACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8CACZ,SAAA,CAAAqnB,EACA9C,EAAgB+C,EAAiB,MAAA,EACpC,EACAtnB,EAAAA,KAAC,MAAI,CAAA,UAAU,sEACb,SAAA,CAAApF,EAAA,IAACkhB,GAAA,CACC,KAAM0I,EACN,cAAc,YACd,UAAW,EAAA,CACb,EACC5pB,EAAA,IAAA,MAAA,CAAI,UAAU,sDACZ,WAAY,KACf,CAAA,EACF,EACAoF,EAAAA,KAAC,MAAI,CAAA,UAAU,+DACZ,SAAA,CAAC,CAAAiX,UACCxO,EACC,SAAA,CAAA,SAAA,CAAC7N,EAAAA,IAAAiV,EAAA,CAAW,SAAU,CAACuX,EAAY,QAASA,EAC1C,SAAAxsB,EAAA,IAACyrB,KAAgB,CACnB,CAAA,EACAzrB,EAAAA,IAAC,MAAK,CAAA,SAAA4G,EAAc,CAAE,CAAA,EACtB5G,EAAAA,IAAC,OAAI,SAAC,GAAA,CAAA,EACNA,EAAAA,IAAC,MAAK,CAAA,SAAA2J,EAAQ,MAAO,CAAA,EACrB3J,EAAAA,IAACiV,GAAW,SAAU,CAACsX,EAAQ,QAASA,EACtC,SAACvsB,EAAA,IAAA2sB,GAAA,CAAA,CAAiB,CACpB,CAAA,EACA3sB,EAAAA,IAAC,MAAI,CAAA,UAAU,2BAA4B,CAAA,CAAA,EAC7C,EAEFA,EAAAA,IAACiV,GAAW,OAAO,eAAe,QAAS0W,EACzC,SAAA3rB,EAAA,IAACwX,KAAU,CACb,CAAA,CAAA,EACF,CACF,CAAA,CAAA,CAEJ,CCxMO,SAASoV,GAAkBpuB,EAAc,CAE5C,OAAAwB,EAAA,IAAC4S,GAAA,CACC,KAAK,qBACL,WAAW,SACX,UAAU,gBAEV,SAAA5S,EAAAA,IAAC6sB,GAAS,CAAA,GAAGruB,CAAO,CAAA,CAAA,CAAA,CAG1B,CAEA,SAASquB,GAAQruB,EAAc,CACvB,KAAA,CAAC,MAAAiU,GAASE,KAChB,OAAQ3S,EAAAA,IAAA0rB,GAAA,CAAqB,QAASjZ,EAAQ,GAAGjU,CAAO,CAAA,CAC1D,CC4BO,SAASsuB,GACdtuB,EACqB,CACrB,MAAMuuB,EAAMC,KACN,CAACC,EAAeC,CAAgB,EAAIvoB,EAAA,SACxC,CAACnG,EAAM,OAAS,CAACA,EAAM,YAAA,EAKnB2uB,EAAgB3uB,EAAM,SACtB,CAAC4uB,EAAeC,CAAgB,EAAI7kB,EACxChK,EAAM,OAASuuB,EACfvuB,EAAM,cAAgBuuB,EACb3uB,GAAA,CACP8uB,EAAiB,EAAK,EACtBC,GAAA,MAAAA,EAAgB/uB,EAClB,CAAA,EAGI,CACJ,IAAAsnB,EACA,IAAA4H,EACA,YAAAngB,EACA,SAAAogB,EACA,eAAAC,EACA,kBAAAC,EACA,uBAAArgB,CAAA,EACEsgB,GAAuBN,EAAe5uB,CAAK,EAEzCmvB,EAAQ5nB,EAAAA,YAAY,IAAM,CAC9BmnB,EAAiB,EAAI,EACrBG,EAAiBN,CAAG,EACpBI,GAAA,MAAAA,EAAgB,MAChBM,EAAkB,EAAK,GACtB,CAACV,EAAKM,EAAkBF,EAAeM,CAAiB,CAAC,EAEtD,CAACG,EAAeC,CAAgB,EAAIlpB,WAAyB,IAC1D,CAACmpB,GAAeV,CAAa,CAAC,CACtC,EAEK9Y,EAAmBvO,EAAA,YACtBwC,GAAwB,CACnBmd,GAAOnd,EAAS,QAAQmd,CAAG,EAAI,EACtBnd,EAAAmd,EACF4H,GAAO/kB,EAAS,QAAQ+kB,CAAG,EAAI,IAC7B/kB,EAAA+kB,GAIP,MAAAlvB,EAAQgvB,EACVA,EAAc,IAAI7kB,CAAQ,EAC1BwlB,GAAYxlB,EAAUglB,CAAQ,EAClCF,EAAiBjvB,CAAK,EACtByvB,EAAiB,CAACC,GAAe1vB,CAAK,CAAC,CAAC,EACxC8uB,EAAiB,EAAK,CACxB,EACA,CAACG,EAAkB3H,EAAK4H,EAAKF,EAAeG,CAAQ,CAAA,EAGhDS,EAAcjoB,EAAA,YACjBkoB,GAAmB,CAAChB,GAAiBiB,GAAUd,EAAea,CAAG,EAClE,CAACb,EAAeH,CAAa,CAAA,EAGzBkB,EAAepoB,EAAA,YAClBqoB,IACQ,CACL,QAAS,IAAM,CACb9Z,GAAA,MAAAA,EAAmB8Z,GACfhhB,IACFqgB,GAAA,MAAAA,EAAoB,IAExB,CAAA,GAGJ,CAACnZ,EAAkBmZ,EAAmBrgB,CAAsB,CAAA,EAGvD,MAAA,CACL,cAAeggB,EACf,iBAAkBC,EAClB,eAAAG,EACA,kBAAAC,EACA,YAAAO,EACA,iBAAkB,IAAM,GACxB,gBAAiB,IAAM,GACvB,cAAe,IAAM,GACrB,aAAAG,EACA,cAAAP,EACA,iBAAAC,EACA,cAAAZ,EACA,MAAAU,EACA,iBAAAT,EACA,IAAAxH,EACA,IAAA4H,EACA,YAAAngB,EACA,SAAAogB,EACA,uBAAAngB,CAAA,CAEJ,CCrHO,SAASihB,GAAW,CAAC,mBAAAC,EAAoB,GAAG9vB,GAAyB,CACpE,MAAAa,EAAQytB,GAAmBtuB,CAAK,EAChCmE,EAAWD,SAAuB,IAAI,EACtCqqB,EAAMC,KAENuB,EAASD,GACbtuB,EAAA,IAACiT,GAAA,CACC,QAAQ,cACR,YACEjT,EAAA,IAAC0R,GAAA,CACC,SAAUrS,EAAM,cAChB,QAAQ,OACR,MAAM,UACN,QAAS,IAAM,CACbA,EAAM,MAAM,CACd,EAEA,SAAAW,EAAAA,IAAC2R,EAAM,CAAA,QAAQ,OAAQ,CAAA,CAAA,CACzB,EAGF,SAAA3R,EAAA,IAAC0R,GAAA,CACC,QAAQ,OACR,MAAM,UACN,QAAS,IAAM,CACbrS,EAAM,iBAAiB0tB,CAAG,EAC1B1tB,EAAM,kBAAkB,EAAK,CAC/B,EAEA,SAAAW,EAAAA,IAAC2R,EAAM,CAAA,QAAQ,OAAQ,CAAA,CAAA,CACzB,CAAA,CAAA,EAIEnE,EACJxN,EAAA,IAACyN,GAAA,CACC,OAAQ,EACR,UAAU,eACV,OAAQpO,EAAM,eACd,aAAcA,EAAM,kBACpB,KAAK,UACL,WAAYsD,EACZ,qBAAsB,GACtB,kBAAmB,GAEnB,SAAAyC,EAAA,KAACwN,GAAO,CAAA,KAAK,OACX,SAAA,CAAA5S,EAAA,IAAC8S,GAAA,CACC,UAAU,0BACV,QAASwb,EAAqB,oBAAsB,KAEpD,SAACtuB,EAAA,IAAAwuB,GAAA,CAAS,MAAAnvB,EAAc,cAAe,EAAG,CAAA,CAC5C,EACCkvB,CAAA,EACH,CAAA,CAAA,EAIE5gB,EAA+C,CACnD,QAAc1O,GAAA,CACZA,EAAE,gBAAgB,EAClBA,EAAE,eAAe,EACZ2O,GAAc3O,CAAC,EAGlBI,EAAM,kBAAkB,EAAK,EAF7BA,EAAM,kBAAkB,EAAI,CAIhC,CAAA,EAGF,cACGwO,WACC,CAAA,SAAA,CAAA7N,EAAA,IAAC8N,GAAA,CACC,IAAKnL,EACL,aAAcgL,EACd,mBACGI,GAAc,CAAA,UAAWtN,EAAKjC,EAAM,UAAY,eAAe,EAAG,EAEpE,GAAGA,EAEJ,SAAAwB,EAAA,IAACgO,GAAA,CACC,aAAcL,EACd,MAAAtO,EACA,MAAOA,EAAM,cACb,SAAUA,EAAM,iBAChB,cAAeA,EAAM,aAAA,CACvB,CAAA,CACF,EACCmO,CACH,CAAA,CAAA,CAEJ,CAKO,SAASihB,GAAejwB,EAA4B,CACnD,KAAA,CAAC,IAAAknB,EAAK,IAAA4H,CAAO,EAAA9uB,EACb,CAAC,MAAAsT,GAASC,IACV,CAAC,OAAA2c,GAAUC,KACX,CACJ,MAAO,CAAC,SAAApqB,EAAU,OAAA4J,EAAQ,MAAA/P,EAAQ,KAAM,IAAAK,CAAG,EAC3C,WAAY,CAAC,QAAA+H,EAAS,MAAA4H,CAAK,GACzBC,GAAc,CAChB,KAAM7P,EAAM,KACZ,MAAO,CACL,SAAesE,GAAA,CACb,GAAI,CAACA,EAAG,OACF,MAAAsrB,EAAOvf,GAAqB/L,CAAC,EACnC,GAAI4iB,GAAO0I,EAAK,QAAQ1I,CAAG,EAAI,EAC7B,OAAO5T,EAAM,CACX,QAAS,2BACT,OAAQ,CAAC,KAAM4c,EAAO5rB,CAAC,CAAC,CAAA,CACzB,EAEH,GAAIwqB,GAAOc,EAAK,QAAQd,CAAG,EAAI,EAC7B,OAAOxb,EAAM,CACX,QAAS,4BACT,OAAQ,CAAC,KAAM4c,EAAO5rB,CAAC,CAAC,CAAA,CACzB,CAEL,CACF,CAAA,CACD,EAEK8rB,EAAoCxwB,EACtCyQ,GAAqBzQ,CAAK,EAC1B,KAEEkQ,EAAsC,CAC1C,SAAerP,GAAA,CACbsF,EAAStF,GAAIA,EAAE,iBAAiB,CAAK,CACvC,EACA,OAAAkP,EACA,MAAOygB,EACP,QAAApoB,EACA,aAAc4H,GAAA,YAAAA,EAAO,QACrB,SAAU3P,CAAA,EAGZ,aAAQ4vB,GAAY,CAAA,GAAGtmB,GAAWuG,EAAW9P,CAAK,CAAG,CAAA,CACvD,CAEA,SAASoP,GAAc3O,EAAwC,CAC7D,MAAO,CAAC,OAAQ,SAAU,WAAW,EAAE,SACpCA,EAAE,cAA8B,WAAa,EAAA,CAElD,CClLO,MAAM4vB,GAAW9uB,EACtBC,EAAAA,IAAC,OAAK,CAAA,EAAE,sJAAuJ,CAAA,EAC/J,cAAc,ECkBT,SAAS8uB,GAAiB,CAC/B,UAAA5uB,EACA,SAAA6uB,EACA,SAAA5uB,EACA,KAAAC,EAAO,KACP,KAAA4uB,EACA,gBAAAC,EAAkB,QAClB,QAAAC,EAAU,OACV,SAAAC,EAAW,kBACX,YAAAC,EAAc,EAChB,EAAiB,CACT,KAAA,CACJ,aAAAC,EACA,kBAAAC,EACA,qBAAAC,EACA,mBAAAC,EACA,sBAAAC,CAAA,EACE5W,EAAAA,WAAWpB,EAAsB,EAC/BiY,EAASX,IAAa,OAASO,EAAoBE,EACnDG,EAAgBN,GAAgBL,IAAS,UAEzCY,EAAW,CACf,KAAM,CAAC,QAAAV,EAAS,MAAO,IAAW,EAClC,QAAS,CACP,QAAAA,EACA,MAAO,IACT,EACA,OAAQ,CACN,MAAO,EACP,cAAe,CACb,QAAS,MACX,CACF,CAAA,EAGIW,EAAgBC,GAAQJ,IAAW,UAAY,UAAYtvB,CAAI,EAGnE,OAAAJ,EAAA,IAACqL,GAAE,IAAF,CACC,SAAAukB,EACA,QAAS,GACT,QAASR,EAAc,SAAWM,EAClC,WAAY,CAAC,KAAM,QAAS,SAAU,GAAI,EAC1C,QAAczwB,GAAA,CAEZ,MAAMiL,EAASjL,EAAE,OACbowB,IAAiBnlB,EAAO,QAAQ,QAAQ,GAAKA,EAAO,QAAQ,GAAG,KACjEqlB,EAAqB,QAAQ,EAC7BE,EAAsB,QAAQ,EAElC,EACA,UAAWhvB,EACTP,EACA6uB,IAAa,OACT,8BACA,+BACJ,sBACAI,EACAU,EACAF,GAAiB,GAAGV,CAAe,kCACnCU,GAAiBZ,IAAa,QAAU,SACxCY,GAAiBZ,IAAa,SAAW,SAC3C,EAEC,wBAA4C5uB,EAAU,CACrD,UAAWM,EACTN,EAAS,MAAM,UACf,gBACAuvB,IAAW,WAAa,mBAC1B,EACA,cAAeA,IAAW,SAAA,CAC3B,CAAA,CAAA,CAGP,CAEA,SAASI,GAAQ1vB,EAAgD,CAC/D,OAAQA,EAAM,CACZ,IAAK,UACI,MAAA,OACT,IAAK,KACI,MAAA,QACT,IAAK,KACI,MAAA,QACT,IAAK,KACI,MAAA,QACT,QACE,OAAOA,GAAQ,EACnB,CACF,CCvGO,SAAS2vB,GAAiB,CAC/B,SAAA5vB,EACA,aAAA6vB,EAAe,GACf,gBAAAC,EAAkB,EACpB,EAA0B,CACxB,OAAOpvB,EAAAA,aAAaV,EAAU,CAC5B,UAAWM,EACTN,EAAS,MAAM,UACf6vB,GAAgB,kBAChBA,GAAgBC,GAAmB,mBACnC,wBACF,CAAA,CACD,CACH,CCnBO,MAAMC,GAAenwB,EAC1BC,EAAAA,IAAC,OAAK,CAAA,EAAE,mGAAoG,CAAA,EAC5G,kBAAkB,ECQb,SAASmwB,GAAgB,CAC9B,SAAAhwB,EACA,UAAAD,EACA,iBAAAkwB,EACA,GAAG5xB,CACL,EAAyB,CACjB,KAAA,CACJ,aAAA6wB,EACA,kBAAAC,EACA,qBAAAC,EACA,KAAAjmB,EACA,wBAAA+mB,CAAA,EACExX,EAAAA,WAAWpB,EAAsB,EAE/B6Y,EAA0BD,GAA2B,CAAChB,EACtDkB,EACJ,CAACH,IAAqBf,GAAgBgB,GAElCG,EAAe,IAAM,CACJjB,EAAAD,IAAsB,OAAS,SAAW,MAAM,CAAA,EAGjEmB,EAA0B,IAAM,CAC9B,MAAAC,EAAYpB,IAAsB,UAAY,OAAS,UAC7DqB,GAAkB,GAAGrnB,CAAI,mBAAoBonB,IAAc,SAAS,EACpEnB,EAAqBmB,CAAS,CAAA,EAI9B,OAAA1wB,EAAA,IAAC4wB,GAAA,CACC,UAAWnwB,EAAK,wBAAyBP,CAAS,EAClD,OAAO,WACP,KAAK,KACL,aACEqwB,EACEvwB,EAAA,IAACiV,EAAA,CACC,KAAK,KACL,QAAS,IAAM,CACTqb,EACsBG,IAEXD,GAEjB,EAEA,eAACN,GAAa,EAAA,CAAA,CAEd,EAAA,OAEL,GAAG1xB,EAEH,SAAA2B,CAAA,CAAA,CAGP,CChEgB,SAAA0wB,GAAqBC,EAAmB,GAAO,CAC7DrG,EAAAA,UAAU,KACJqG,EACO,SAAA,gBAAgB,UAAU,OAAO,kBAAkB,EAEnD,SAAA,gBAAgB,UAAU,IAAI,kBAAkB,EAEpD,IAAM,CACF,SAAA,gBAAgB,UAAU,OAAO,kBAAkB,CAAA,GAE7D,CAACA,CAAO,CAAC,CACd,CCeO,SAASC,GAAgB,CAC9B,SAAA5wB,EACA,kBAAmB6wB,EACnB,oBAAAC,EACA,mBAAoBC,EACpB,0BAAAC,EACA,qBAAAC,EACA,KAAA9nB,EACA,wBAAA+mB,EACA,OAAAvmB,EAAS,WACT,UAAA5J,EACA,cAAAmxB,EAAgB,iBAChB,kBAAAC,EAAoB,GACpB,GAAGrvB,CACL,EAAyB,CACvB4uB,GAAqB,CAACS,CAAiB,EACjC,MAAAjV,EAAWyP,GAAc,qBAAqB,EAK9CyF,EAHyBlwB,EAAAA,QAAQ,IAC7BiI,EAAekoB,GAAoB,GAAGloB,CAAI,kBAAkB,EAArD,GACd,CAACA,CAAI,CAAC,EACiD,UAAY,OAChE,CAACgmB,EAAmBC,CAAoB,EAAI/mB,EAChDwoB,EACA3U,EAAW,SAAWkV,EACtBN,CAAA,EAGIQ,EAA4BpwB,EAAAA,QAAQ,IAAM,CAC9C,GAAIgb,EACK,MAAA,SAET,GAAI8U,GAA6B,KACxB,OAAAA,EAET,MAAMO,EAAeF,GACnB,GAAGloB,CAAI,0BACP,MAAA,EAEF,OAAIooB,IAGGP,GAA6B,SACnC,EAAA,CAAC9U,EAAU/S,EAAM6nB,CAAyB,CAAC,EACxC,CAAC3B,EAAoBmC,CAAsB,EAAInpB,EACnD0oB,EACAO,EACAL,CAAA,EAEI3B,EAAwB1pB,EAAA,YAC3B2pB,GAAmC,CAClCiC,EAAuBjC,CAAM,EACXiB,GAAA,GAAGrnB,CAAI,0BAA2BomB,CAAM,CAC5D,EACA,CAACiC,EAAwBroB,CAAI,CAAA,EAGzBsoB,EACJvV,IAAaiT,IAAsB,QAAUE,IAAuB,QAGpE,OAAAxvB,EAAA,IAACyX,GAAuB,SAAvB,CACC,MAAO,CACL,kBAAA6X,EACA,qBAAAC,EACA,mBAAAC,EACA,sBAAAC,EACA,wBAAAY,EACA,KAAA/mB,EACA,aAAc+S,CAChB,EAEA,SAAAjX,EAAA,KAAC,MAAA,CACE,GAAGnD,EACJ,UAAWxB,EAAK,mBAAoB4wB,EAAenxB,EAAW4J,CAAM,EAEnE,SAAA,CAAA3J,EACDH,EAAAA,IAACwU,IACE,SACCod,GAAA5xB,EAAA,IAAC6xB,GAAA,CACC,SAAS,QAET,QAAS,IAAM,CACbtC,EAAqB,QAAQ,EAC7BE,EAAsB,QAAQ,CAChC,CAAA,EAJI,oBAAA,EAOV,CAAA,CAAA,CACF,CAAA,CAAA,CAGN","x_google_ignoreList":[0,1,64,65,66,67,68]}